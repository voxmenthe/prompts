# Content Items

There two endpoints: "List Content Items" and "Search Content Items". They are designed to be used in different scenarios. If you want to sync content from Shelf into your database - "List CIL Content API" is the right choice.

### Search CIL Content API

* **Search event submission**: When using the Search API, a search event is submitted, which is then processed by the Content Insights pipeline. This could be useful for tracking and analyzing user search behavior over time.
* **Appear on Search Queries reports**: The data from the search event will eventually appear on Search Queries reports, providing insights into the types of queries that users are performing.
* **Vector search**: It applies vector search to find the most relevant content items based on the search term.

### List CIL Content API

* **Data listing without search events**: This API lists CIL content items without creating a search event or contributing to the Content Insights pipeline.
* **No `searchResultsUrl`**: The response from the List API does not include a `searchResultsUrl`, which would otherwise be used to link directly to the search results.
* **Paginate over content items**: It's designed to paginate over content items rather than perform a relevance-based search.

So, to decide which API to use, consider whether you need insights and tracking of user search behavior (use the "Search CIL Content API") or whether you simply need to list content items without additional analytics (use the "List CIL Content API").

### Pagination Mechanics

1. **Initial Request**: The initial API request includes a pagination parameter `size`, which defines the number of items to be returned in a single response. Additionally, clients can specify a `from` parameter to skip a certain number of items from the start, effectively controlling the starting point of the data retrieval.
2. **Iterative Pagination**: To navigate through the content items, the API uses a `nextToken` parameter. After the initial request, the API response includes a `nextToken` value, which is a unique identifier for the next page of results.
3. **Subsequent Requests**: For subsequent requests, clients include this `nextToken` in their request to retrieve the next set of items. This token ensures that each request fetches a new page of results, starting exactly where the last one ended.
4. **Page Info**: Each response also contains a `pageInfo` object, providing metadata about the pagination state. This includes information like `currentPage`, `hasNextPage`, `totalPages`, and `totalResultsCount`, giving a comprehensive overview of the pagination context.
5. **Efficient Data Retrieval**: This pagination system allows for efficient data retrieval, especially in scenarios where the total number of content items is large. Clients can systematically fetch all items in a controlled and manageable manner.

## List Content Items

> Used to list and paginate over CIL content items. Does not apply vector search.\
> Useful to pull content synced from various sources via a single API.\
> \
> Permissions: users will be able to search only across collections they have access to.\
>

OpenAPI:

```json
{"openapi":"3.1.0","info":{"title":"Shelf Content Integration Layer API","version":"1.0.0"},"tags":[{"description":"There two endpoints: \"List Content Items\" and \"Search Content Items\".\nThey are designed to be used in different scenarios.\nIf you want to sync content from Shelf into your database - \"List CIL Content API\" is the right choice.\n\n## Search CIL Content API\n\n- **Search event submission**: When using the Search API, a search event is submitted, which is then processed by the Content Insights pipeline.\nThis could be useful for tracking and analyzing user search behavior over time.\n\n- **Appear on Search Queries reports**: The data from the search event will eventually appear on Search Queries reports, providing insights into the types of queries that users are performing.\n\n- **Vector search**: It applies vector search to find the most relevant content items based on the search term.\n\n## List CIL Content API\n\n- **Data listing without search events**: This API lists CIL content items without creating a search event or contributing to the Content Insights pipeline.\n\n- **No `searchResultsUrl`**: The response from the List API does not include a `searchResultsUrl`, which would otherwise be used to link directly to the search results.\n\n- **Paginate over content items**: It's designed to paginate over content items rather than perform a relevance-based search.\n\nSo, to decide which API to use, consider whether you need insights and tracking of user search behavior (use the \"Search CIL Content API\") or whether you simply need to list content items without additional analytics (use the \"List CIL Content API\").\n\n## Pagination Mechanics\n\n1. **Initial Request**: The initial API request includes a pagination parameter `size`, which defines the number of items to be returned in a single response.\nAdditionally, clients can specify a `from` parameter to skip a certain number of items from the start, effectively controlling the starting point of the data retrieval.\n\n2. **Iterative Pagination**: To navigate through the content items, the API uses a `nextToken` parameter.\nAfter the initial request, the API response includes a `nextToken` value, which is a unique identifier for the next page of results.\n\n3. **Subsequent Requests**: For subsequent requests, clients include this `nextToken` in their request to retrieve the next set of items.\nThis token ensures that each request fetches a new page of results, starting exactly where the last one ended.\n\n4. **Page Info**: Each response also contains a `pageInfo` object, providing metadata about the pagination state.\nThis includes information like `currentPage`, `hasNextPage`, `totalPages`, and `totalResultsCount`, giving a comprehensive overview of the pagination context.\n\n5. **Efficient Data Retrieval**: This pagination system allows for efficient data retrieval, especially in scenarios where the total number of content items is large.\nClients can systematically fetch all items in a controlled and manageable manner.","name":"Content Items"}],"servers":[{"description":"US region","url":"https://api.shelf.io"},{"description":"EU region","url":"https://api.shelf-eu.com"},{"description":"CA region","url":"https://api.shelf-ca.com"}],"security":[{"auth_token":[]}],"components":{"securitySchemes":{"auth_token":{"type":"apiKey","description":"Shelf API Token. See [Create API Token](https://docs.shelf.io/dev-portal/authentication/create-api-token) for more details.","in":"header","name":"Authorization"}}},"paths":{"/cil-content/items/list":{"post":{"operationId":"listCILContentItems","summary":"List Content Items","description":"Used to list and paginate over CIL content items. Does not apply vector search.\nUseful to pull content synced from various sources via a single API.\n\nPermissions: users will be able to search only across collections they have access to.\n","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"type":"object","properties":{"fieldsFilters":{"type":"object","properties":{"type":{"type":"array","items":{"type":"string"}},"contentTypeId":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"array","items":{"type":"string"}},"ratingMoreThan":{"type":"array","maxItems":1,"minItems":1,"items":{"type":"number","maximum":4,"minimum":0}},"shelf_categoryId":{"type":"array","maxItems":20,"minItems":0,"items":{"type":"string"}},"shelf_categoryIdToExclude":{"type":"array","description":"Filter content by ids of categories it does not belong to.","maxItems":20,"minItems":0,"items":{"type":"string"}},"shelf_categoryOp":{"type":"string","description":"Specifies how to filter content by ids of categories if multiple ids provided. \"and\" - matching content should have all provided category ids. \"or\" - matching content should have any one of provided category ids.","default":"or","enum":["and","or"]},"shelf_reviewStatus":{"type":"array","description":"Filter content by review status. Can be provided only if Content Review feature is enabled.","maxLength":3,"minLength":0,"items":{"type":"string","enum":["up-to-date","out-of-date","none"]}},"source":{"type":"array","items":{"type":"string"}}}}}},{"type":"object","properties":{"collectionIds":{"type":"array","description":"Filter content by ids of collections it belongs to.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"collectionIdsToExclude":{"type":"array","description":"Filter content by ids of collections it does not belong to.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"connectorIds":{"type":"array","description":"Filter content by ids of connectors it was synchronized with.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"createdAfter":{"type":"string","description":"Filter content that was created starting from the given date. Creation date from source system is used.","format":"date"},"createdBefore":{"type":"string","description":"Filter content that was created up to the given date. Creation date from source system is used.","format":"date"},"idsToExclude":{"type":"array","description":"Filter out specific external ids","maxItems":1000,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"idsToInclude":{"type":"array","description":"Filter specific external ids","maxItems":1000,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"includeDeepResults":{"type":"boolean","description":"If specified `parentId` would be also searched through grand parent locations"},"includePrivateContent":{"type":"boolean","description":"If specified private content would be included in search results","default":true},"parentId":{"type":"string","description":"Filter content that is in given location"},"query":{"type":"string","description":"Filters content by searchable text, like `title`, `description`, `text` and `tags` fields."},"queryFields":{"type":"array","description":"Filters content by specific fields by query provided. If not specified, all searchable fields are used.","maxItems":5,"minItems":1,"items":{"oneOf":[{"type":"string","enum":["title"]},{"type":"string","pattern":"^fields\\\\.shelf_customField_.+$"}]}},"searchLanguage":{"type":"string","description":"Filters content by language code. Specify `any` to search across all languages.","maxLength":5,"minLength":2},"tags":{"type":"array","description":"Filters content by tags. Uses `tagsOp` parameter to specify how to treat multiple tags.","maxItems":200,"minItems":0,"items":{"type":"string","maxLength":40,"minLength":1}},"tagsOp":{"type":"string","description":"Specifies how to filter content by tags if multiple tags provided. \"and\" - matching content should have all provided tags. \"or\" - matching content should have any one of provided tags.","default":"or","enum":["and","or"]},"tagsToExclude":{"type":"array","description":"Filter content by tags it does not belong to.","maxItems":200,"minItems":0,"items":{"type":"string","maxLength":40,"minLength":1}},"updatedAfter":{"type":"string","description":"Filter content that was updated after or equal the given date. Update date from source system is used.","format":"date"},"updatedAfterStrict":{"type":"string","description":"Filter content that was updated strictly after the given date. Update date from source system is used.","format":"date"},"updatedBefore":{"type":"string","description":"Filter content that was updated before or equal the given date. Update date from source system is used.","format":"date"},"updatedBeforeStrict":{"type":"string","description":"Filter content that was updated strictly before the given date. Update date from source system is used.","format":"date"}}},{"type":"object","properties":{"sortBy":{"type":"string","description":"Specify how (by what) to sort search results. Review sorting may be provided only if Content Review feature is enabled.","enum":["TITLE","CREATED_DATE","UPDATED_DATE","RELEVANCE","VIEWS","RATING","LAST_REVIEWED_DATE","SCHEDULED_REVIEW_BY","REVIEW_FREQUENCY"]},"sortOrder":{"type":"string","description":"Specify either ascending or descnding sort order to apply to `sortBy` parameter.","enum":["ASC","DESC"]}}},{"type":"object","properties":{"from":{"type":"integer","description":"Filters out content by numbered position in the search results, for example if the value is `3`, then the first item of the search will be the 4th one, meaning that the first three were skipped.","maximum":10000,"minimum":0},"nextToken":{"type":"string","description":"Next token should be used to retrieve next portion of the results (next page). Next token from the response of this API can be used correctly ONLY if filters & sorting in new request have not changed comparing to the request where next token was returned. If filters or sorting have changed, use this API without next token, and after retrieving first page with changed filters or sorting next token will be returned by this API and can be used. Use only nextToken returned by this API, do not change it."},"size":{"type":"integer","description":"Using this parameter it's possible to filter out the amount of gems in response.","maximum":1000,"minimum":0}}}]}}}},"responses":{"200":{"description":"Page of CIL Items","content":{"application/json":{"schema":{"type":"object","required":["items","pageInfo"],"properties":{"pageInfo":{"allOf":[{"type":"object","description":"This object holds information about pagination. Use it to know how to iterate over array of results","properties":{"currentPage":{"type":"number","default":1,"maximum":100,"minimum":1},"hasNextPage":{"type":"boolean"},"hasPreviousPage":{"type":"boolean"},"pageSize":{"type":"number"},"totalPages":{"type":"number","maximum":100,"minimum":1},"totalResultsCount":{"type":"number","maximum":999999,"minimum":0}}},{"type":"object","properties":{"nextToken":{"type":"string"}}}]},"items":{"type":"array","items":{"allOf":[{"type":"object","required":["fields"],"properties":{"accountId":{"type":"string","description":"ID of account","maxLength":64,"minLength":6},"collectionIds":{"type":"array","description":"List of collection IDs this content item belongs to in external system","items":{"type":"string","description":"Collection ID from external system","maxLength":512,"minLength":1}},"connectorId":{"type":"string","description":"Connector ID which synced this content item to CIL"},"createdAt":{"type":"string","description":"Date when content was first created in CIL","format":"date"},"externalId":{"type":"string","description":"External content item ID, provided by CIL Connector, corresponding to id in source system"},"externalURL":{"type":"string","description":"Url pointing to content in source system"},"fields":{"type":"array","items":{"type":"object","required":["key","value","type","label"],"properties":{"type":{"type":"string"},"data":{"type":"object","additionalProperties":true},"key":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}}}},"iconURL":{"type":"string","description":"Icon url for this content item. Present if this content item corresponds to Shelf KMS gem."},"id":{"type":"string","description":"Content item ID (internal to CIL)"},"internalCollectionIds":{"type":"array","description":"List of internal collection IDs this content item belongs to in CIL","items":{"type":"string","maxLength":26,"minLength":26}},"internalId":{"type":"string","description":"Content item ID (internal to CIL)"},"lang":{"type":"string","description":"Language code of content item"},"lastViewedAt":{"type":"string","description":"Date when content was last viewed at","format":"date"},"locations":{"type":"array","description":"List of locations of this content item belongs to an external system","items":{"type":"object","required":["grandParentIds","collectionId"],"properties":{"collectionId":{"type":"string","description":"Collection ID from external system","maxLength":512,"minLength":1},"grandParentIds":{"type":"array","items":{"type":"string","maxLength":64,"minLength":6}},"parentId":{"type":"string","maxLength":64,"minLength":6}}}},"originalCreatedAt":{"type":"string","description":"Date when content was first created in source system","format":"date"},"originalUpdatedAt":{"type":"string","description":"Date when content was last updated in source system","format":"date"},"tags":{"type":"array","description":"List of tags for this content item","items":{"type":"string"}},"title":{"type":"string","description":"Content item title"},"updatedAt":{"type":"string","description":"Date when content was last updated in CIL","format":"date"}}},{"type":"object","properties":{"description":{"type":"string","description":"CIL item description"},"attachments":{"type":"array","description":"List of attachments for this content item","items":{"type":"object","description":"Attachments","properties":{"attachmentId":{"type":"string","description":"Attachment ID"},"converted":{"type":"array","description":"An array of objects, each representing a converted file format available for the attachment","items":{"type":"object","properties":{"attachmentId":{"type":"string","description":"Attachment ID"},"extension":{"type":"string","description":"The file extension of the attachment","enum":["md","txt","html","json"]}}}},"extension":{"type":"string","description":"The file extension of the attachment","enum":["pdf","docx","txt","md","html","pptx"]}}}}}}]}}}}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"oneOf":[{"type":"object","title":"API Error with code","required":["error"],"properties":{"error":{"type":"object","description":"API Error with code","required":["status","message","code"],"properties":{"code":{"type":"string","description":"Error code"},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}},{"type":"object","title":"Bad request payload (AJV)","required":["error"],"properties":{"error":{"type":"object","description":"API Error With detail","required":["status","message","detail"],"properties":{"detail":{"type":"array","description":"Detail info","items":{"type":"object","properties":{"instancePath":{"type":"string"},"keyword":{"type":"string"},"message":{"type":"string"},"params":{"type":"object"},"schemaPath":{"type":"string"}}}},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}]}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","title":"API Error with code","required":["error"],"properties":{"error":{"type":"object","description":"API Error with code","required":["status","message","code"],"properties":{"code":{"type":"string","description":"Error code"},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}}}}},"tags":["Content Items"]}}}}
```

## List Content Items with Content Review CSV

> Used to get CSV with CIL content items with their Content Review info.\
> Search parameters are the same as for the List Content Items endpoint.\
> Permissions: users will be able to get CSV with items only across collections they have access to.\
> Users can get CSV only if the Content Review feature is enabled.\
>

OpenAPI:

```json
{"openapi":"3.1.0","info":{"title":"Shelf Content Integration Layer API","version":"1.0.0"},"tags":[{"description":"There two endpoints: \"List Content Items\" and \"Search Content Items\".\nThey are designed to be used in different scenarios.\nIf you want to sync content from Shelf into your database - \"List CIL Content API\" is the right choice.\n\n## Search CIL Content API\n\n- **Search event submission**: When using the Search API, a search event is submitted, which is then processed by the Content Insights pipeline.\nThis could be useful for tracking and analyzing user search behavior over time.\n\n- **Appear on Search Queries reports**: The data from the search event will eventually appear on Search Queries reports, providing insights into the types of queries that users are performing.\n\n- **Vector search**: It applies vector search to find the most relevant content items based on the search term.\n\n## List CIL Content API\n\n- **Data listing without search events**: This API lists CIL content items without creating a search event or contributing to the Content Insights pipeline.\n\n- **No `searchResultsUrl`**: The response from the List API does not include a `searchResultsUrl`, which would otherwise be used to link directly to the search results.\n\n- **Paginate over content items**: It's designed to paginate over content items rather than perform a relevance-based search.\n\nSo, to decide which API to use, consider whether you need insights and tracking of user search behavior (use the \"Search CIL Content API\") or whether you simply need to list content items without additional analytics (use the \"List CIL Content API\").\n\n## Pagination Mechanics\n\n1. **Initial Request**: The initial API request includes a pagination parameter `size`, which defines the number of items to be returned in a single response.\nAdditionally, clients can specify a `from` parameter to skip a certain number of items from the start, effectively controlling the starting point of the data retrieval.\n\n2. **Iterative Pagination**: To navigate through the content items, the API uses a `nextToken` parameter.\nAfter the initial request, the API response includes a `nextToken` value, which is a unique identifier for the next page of results.\n\n3. **Subsequent Requests**: For subsequent requests, clients include this `nextToken` in their request to retrieve the next set of items.\nThis token ensures that each request fetches a new page of results, starting exactly where the last one ended.\n\n4. **Page Info**: Each response also contains a `pageInfo` object, providing metadata about the pagination state.\nThis includes information like `currentPage`, `hasNextPage`, `totalPages`, and `totalResultsCount`, giving a comprehensive overview of the pagination context.\n\n5. **Efficient Data Retrieval**: This pagination system allows for efficient data retrieval, especially in scenarios where the total number of content items is large.\nClients can systematically fetch all items in a controlled and manageable manner.","name":"Content Items"}],"servers":[{"description":"US region","url":"https://api.shelf.io"},{"description":"EU region","url":"https://api.shelf-eu.com"},{"description":"CA region","url":"https://api.shelf-ca.com"}],"security":[{"auth_token":[]}],"components":{"securitySchemes":{"auth_token":{"type":"apiKey","description":"Shelf API Token. See [Create API Token](https://docs.shelf.io/dev-portal/authentication/create-api-token) for more details.","in":"header","name":"Authorization"}}},"paths":{"/cil-content/items/list/csv":{"post":{"operationId":"listCILContentItemsCSV","summary":"List Content Items with Content Review CSV","description":"Used to get CSV with CIL content items with their Content Review info.\nSearch parameters are the same as for the List Content Items endpoint.\nPermissions: users will be able to get CSV with items only across collections they have access to.\nUsers can get CSV only if the Content Review feature is enabled.\n","parameters":[{"description":"Time zone name used to localize date-time values.","schema":{"type":"string"},"in":"header","name":"time-zone"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"type":"object","properties":{"fieldsFilters":{"type":"object","properties":{"type":{"type":"array","items":{"type":"string"}},"contentTypeId":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"array","items":{"type":"string"}},"ratingMoreThan":{"type":"array","maxItems":1,"minItems":1,"items":{"type":"number","maximum":4,"minimum":0}},"shelf_categoryId":{"type":"array","maxItems":20,"minItems":0,"items":{"type":"string"}},"shelf_categoryIdToExclude":{"type":"array","description":"Filter content by ids of categories it does not belong to.","maxItems":20,"minItems":0,"items":{"type":"string"}},"shelf_categoryOp":{"type":"string","description":"Specifies how to filter content by ids of categories if multiple ids provided. \"and\" - matching content should have all provided category ids. \"or\" - matching content should have any one of provided category ids.","default":"or","enum":["and","or"]},"shelf_reviewStatus":{"type":"array","description":"Filter content by review status. Can be provided only if Content Review feature is enabled.","maxLength":3,"minLength":0,"items":{"type":"string","enum":["up-to-date","out-of-date","none"]}},"source":{"type":"array","items":{"type":"string"}}}},"uiLanguage":{"type":"string","description":"Language into which column names are translated in a csv file"}}},{"type":"object","properties":{"collectionIds":{"type":"array","description":"Filter content by ids of collections it belongs to.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"collectionIdsToExclude":{"type":"array","description":"Filter content by ids of collections it does not belong to.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"connectorIds":{"type":"array","description":"Filter content by ids of connectors it was synchronized with.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"createdAfter":{"type":"string","description":"Filter content that was created starting from the given date. Creation date from source system is used.","format":"date"},"createdBefore":{"type":"string","description":"Filter content that was created up to the given date. Creation date from source system is used.","format":"date"},"idsToExclude":{"type":"array","description":"Filter out specific external ids","maxItems":1000,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"idsToInclude":{"type":"array","description":"Filter specific external ids","maxItems":1000,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"includeDeepResults":{"type":"boolean","description":"If specified `parentId` would be also searched through grand parent locations"},"includePrivateContent":{"type":"boolean","description":"If specified private content would be included in search results","default":true},"parentId":{"type":"string","description":"Filter content that is in given location"},"query":{"type":"string","description":"Filters content by searchable text, like `title`, `description`, `text` and `tags` fields."},"queryFields":{"type":"array","description":"Filters content by specific fields by query provided. If not specified, all searchable fields are used.","maxItems":5,"minItems":1,"items":{"oneOf":[{"type":"string","enum":["title"]},{"type":"string","pattern":"^fields\\\\.shelf_customField_.+$"}]}},"searchLanguage":{"type":"string","description":"Filters content by language code. Specify `any` to search across all languages.","maxLength":5,"minLength":2},"tags":{"type":"array","description":"Filters content by tags. Uses `tagsOp` parameter to specify how to treat multiple tags.","maxItems":200,"minItems":0,"items":{"type":"string","maxLength":40,"minLength":1}},"tagsOp":{"type":"string","description":"Specifies how to filter content by tags if multiple tags provided. \"and\" - matching content should have all provided tags. \"or\" - matching content should have any one of provided tags.","default":"or","enum":["and","or"]},"tagsToExclude":{"type":"array","description":"Filter content by tags it does not belong to.","maxItems":200,"minItems":0,"items":{"type":"string","maxLength":40,"minLength":1}},"updatedAfter":{"type":"string","description":"Filter content that was updated after or equal the given date. Update date from source system is used.","format":"date"},"updatedAfterStrict":{"type":"string","description":"Filter content that was updated strictly after the given date. Update date from source system is used.","format":"date"},"updatedBefore":{"type":"string","description":"Filter content that was updated before or equal the given date. Update date from source system is used.","format":"date"},"updatedBeforeStrict":{"type":"string","description":"Filter content that was updated strictly before the given date. Update date from source system is used.","format":"date"}}},{"type":"object","properties":{"sortBy":{"type":"string","description":"Specify how (by what) to sort search results. Review sorting may be provided only if Content Review feature is enabled.","enum":["TITLE","CREATED_DATE","UPDATED_DATE","RELEVANCE","VIEWS","RATING","LAST_REVIEWED_DATE","SCHEDULED_REVIEW_BY","REVIEW_FREQUENCY"]},"sortOrder":{"type":"string","description":"Specify either ascending or descnding sort order to apply to `sortBy` parameter.","enum":["ASC","DESC"]}}},{"type":"object","properties":{"from":{"type":"integer","description":"Filters out content by numbered position in the search results, for example if the value is `3`, then the first item of the search will be the 4th one, meaning that the first three were skipped.","maximum":10000,"minimum":0},"nextToken":{"type":"string","description":"Next token should be used to retrieve next portion of the results (next page). Next token from the response of this API can be used correctly ONLY if filters & sorting in new request have not changed comparing to the request where next token was returned. If filters or sorting have changed, use this API without next token, and after retrieving first page with changed filters or sorting next token will be returned by this API and can be used. Use only nextToken returned by this API, do not change it."},"size":{"type":"integer","description":"Using this parameter it's possible to filter out the amount of gems in response.","maximum":1000,"minimum":0}}}]}}}},"responses":{"200":{"description":"CSV URL","content":{"application/json":{"schema":{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["url"],"properties":{"url":{"type":"string","description":"URL to download CSV","format":"url"}}}}}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"oneOf":[{"type":"object","title":"API Error with code","required":["error"],"properties":{"error":{"type":"object","description":"API Error with code","required":["status","message","code"],"properties":{"code":{"type":"string","description":"Error code"},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}},{"type":"object","title":"Bad request payload (AJV)","required":["error"],"properties":{"error":{"type":"object","description":"API Error With detail","required":["status","message","detail"],"properties":{"detail":{"type":"array","description":"Detail info","items":{"type":"object","properties":{"instancePath":{"type":"string"},"keyword":{"type":"string"},"message":{"type":"string"},"params":{"type":"object"},"schemaPath":{"type":"string"}}}},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}]}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","title":"API Error with code","required":["error"],"properties":{"error":{"type":"object","description":"API Error with code","required":["status","message","code"],"properties":{"code":{"type":"string","description":"Error code"},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}}}}},"tags":["Content Items"]}}}}
```

## Get Content Item Custom Fields

> Used to get the custom fields of a content item.

OpenAPI:

````json
{"openapi":"3.1.0","info":{"title":"Shelf Content Integration Layer API","version":"1.0.0"},"tags":[{"description":"There two endpoints: \"List Content Items\" and \"Search Content Items\".\nThey are designed to be used in different scenarios.\nIf you want to sync content from Shelf into your database - \"List CIL Content API\" is the right choice.\n\n## Search CIL Content API\n\n- **Search event submission**: When using the Search API, a search event is submitted, which is then processed by the Content Insights pipeline.\nThis could be useful for tracking and analyzing user search behavior over time.\n\n- **Appear on Search Queries reports**: The data from the search event will eventually appear on Search Queries reports, providing insights into the types of queries that users are performing.\n\n- **Vector search**: It applies vector search to find the most relevant content items based on the search term.\n\n## List CIL Content API\n\n- **Data listing without search events**: This API lists CIL content items without creating a search event or contributing to the Content Insights pipeline.\n\n- **No `searchResultsUrl`**: The response from the List API does not include a `searchResultsUrl`, which would otherwise be used to link directly to the search results.\n\n- **Paginate over content items**: It's designed to paginate over content items rather than perform a relevance-based search.\n\nSo, to decide which API to use, consider whether you need insights and tracking of user search behavior (use the \"Search CIL Content API\") or whether you simply need to list content items without additional analytics (use the \"List CIL Content API\").\n\n## Pagination Mechanics\n\n1. **Initial Request**: The initial API request includes a pagination parameter `size`, which defines the number of items to be returned in a single response.\nAdditionally, clients can specify a `from` parameter to skip a certain number of items from the start, effectively controlling the starting point of the data retrieval.\n\n2. **Iterative Pagination**: To navigate through the content items, the API uses a `nextToken` parameter.\nAfter the initial request, the API response includes a `nextToken` value, which is a unique identifier for the next page of results.\n\n3. **Subsequent Requests**: For subsequent requests, clients include this `nextToken` in their request to retrieve the next set of items.\nThis token ensures that each request fetches a new page of results, starting exactly where the last one ended.\n\n4. **Page Info**: Each response also contains a `pageInfo` object, providing metadata about the pagination state.\nThis includes information like `currentPage`, `hasNextPage`, `totalPages`, and `totalResultsCount`, giving a comprehensive overview of the pagination context.\n\n5. **Efficient Data Retrieval**: This pagination system allows for efficient data retrieval, especially in scenarios where the total number of content items is large.\nClients can systematically fetch all items in a controlled and manageable manner.","name":"Content Items"}],"servers":[{"description":"US region","url":"https://api.shelf.io"},{"description":"EU region","url":"https://api.shelf-eu.com"},{"description":"CA region","url":"https://api.shelf-ca.com"}],"security":[{"auth_token":[]}],"components":{"securitySchemes":{"auth_token":{"type":"apiKey","description":"Shelf API Token. See [Create API Token](https://docs.shelf.io/dev-portal/authentication/create-api-token) for more details.","in":"header","name":"Authorization"}}},"paths":{"/cil-content/items/{id}/fields":{"get":{"operationId":"getContentItemCustomFields","summary":"Get Content Item Custom Fields","description":"Used to get the custom fields of a content item.","parameters":[{"description":"Content Item ID","schema":{"type":"string","maxLength":64,"minLength":1},"in":"path","name":"id","required":true}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","required":["data"],"properties":{"data":{"type":"array","description":"Custom fields for the content item. Each field has a key, value, type, and label.\n\n**Schema**\n\n**Common requirements for all types**:\n- Max **500** custom fields per content item\n- **key**: string with pattern: `^([a-zA-Z0-9_-]+)$`, 1-100 chars\n- **label**: string, 1-255 chars\n\n**Field Types Available**:\n\n1. **String Array** (type: \"string-set\"):\n```yaml\nproperties:\n  key:\n    type: string\n    pattern: ^([a-zA-Z0-9_-]+)$\n    minLength: 1\n    maxLength: 100\n  value:\n    type: array\n    items:\n      type: string\n    uniqueItems: true\n    maxItems: 300\n  type:\n    enum: [string-set]\n  label:\n    type: string\n    minLength: 1\n    maxLength: 255\nrequired:\n  - key\n  - value\n  - type\n  - label\n```\n2. **String** (type: \"string\"):\n```yaml\nproperties:\n  key:\n    type: string\n    pattern: ^([a-zA-Z0-9_-]+)$\n    minLength: 1\n    maxLength: 100\n  value:\n    type: string\n    minLength: 1\n    maxLength: 2048\n  type:\n    enum: [string]\n  label:\n    type: string\n    minLength: 1\n    maxLength: 255\nrequired:\n  - key\n  - value\n  - type\n  - label\n```\n3. **Number** (type: \"number\"):\n```yaml\nproperties:\n  key:\n    type: string\n    pattern: ^([a-zA-Z0-9_-]+)$\n    minLength: 1\n    maxLength: 100\n  value:\n    type: number\n  type:\n    enum: [number]\n  label:\n    type: string\n    minLength: 1\n    maxLength: 255\nrequired:\n  - key\n  - value\n  - type\n  - label\n```\n4. **Boolean** (type: \"boolean\"):\n```yaml\nproperties:\n  key:\n    type: string\n    pattern: ^([a-zA-Z0-9_-]+)$\n    minLength: 1\n    maxLength: 100\n  value:\n    type: boolean\n  type:\n    enum: [boolean]\n  label:\n    type: string\n    minLength: 1\n    maxLength: 255\nrequired:\n  - key\n  - value\n  - type\n  - label\n```\n\n**Array Structure**:\n```yaml\ntype: array\nmaxItems: 500\nitems:\n  type: object\n  oneOf:\n    - # String Array schema\n    - # String schema\n    - # Number schema\n    - # Boolean schema\n```\n\n**Example**:\n```json\n[\n  {\n    \"key\": \"departments\",\n    \"value\": [\"Sales\", \"Marketing\"],\n    \"type\": \"string-set\",\n    \"label\": \"Departments\"\n  },\n  {\n    \"key\": \"author\",\n    \"value\": \"Jane Doe\",\n    \"type\": \"string\",\n    \"label\": \"Author\"\n  },\n  {\n    \"key\": \"review_priority\",\n    \"value\": 2,\n    \"type\": \"number\",\n    \"label\": \"Review Priority\"\n  },\n  {\n    \"key\": \"is_approved\",\n    \"value\": true,\n    \"type\": \"boolean\",\n    \"label\": \"Approved\"\n  }\n]\n```\n","maxItems":500,"items":{"type":"object","additionalProperties":false,"oneOf":[{"properties":{"type":{"type":"string","description":"Field type (string-set for arrays)","enum":["string-set"]},"key":{"type":"string","description":"Custom field key","maxLength":100,"minLength":1,"pattern":"^([a-zA-Z0-9_-]+)$"},"label":{"type":"string","description":"Human-readable label for the field","maxLength":255,"minLength":1},"value":{"type":"array","description":"Array of string values","maxItems":300,"uniqueItems":true,"items":{"type":"string","maxLength":255,"minLength":1}}}},{"properties":{"type":{"type":"string","description":"Field type (string)","enum":["string"]},"key":{"type":"string","description":"Custom field key","maxLength":100,"minLength":1,"pattern":"^([a-zA-Z0-9_-]+)$"},"label":{"type":"string","description":"Human-readable label for the field","maxLength":255,"minLength":1},"value":{"type":"string","description":"String value","maxLength":2048,"minLength":1}}},{"properties":{"type":{"type":"string","description":"Field type (number)","enum":["number"]},"key":{"type":"string","description":"Custom field key","maxLength":100,"minLength":1,"pattern":"^([a-zA-Z0-9_-]+)$"},"label":{"type":"string","description":"Human-readable label for the field","maxLength":255,"minLength":1},"value":{"type":"number","description":"Numeric value"}}},{"properties":{"type":{"type":"string","description":"Field type (boolean)","enum":["boolean"]},"key":{"type":"string","description":"Custom field key","maxLength":100,"minLength":1,"pattern":"^([a-zA-Z0-9_-]+)$"},"label":{"type":"string","description":"Human-readable label for the field","maxLength":255,"minLength":1},"value":{"type":"boolean","description":"Boolean value"}}}],"required":["key","value","type","label"]}}}}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"object","title":"Bad request payload (AJV)","required":["error"],"properties":{"error":{"type":"object","description":"API Error With detail","required":["status","message","detail"],"properties":{"detail":{"type":"array","description":"Detail info","items":{"type":"object","properties":{"instancePath":{"type":"string"},"keyword":{"type":"string"},"message":{"type":"string"},"params":{"type":"object"},"schemaPath":{"type":"string"}}}},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"object","required":["error"],"properties":{"error":{"type":"object","description":"API Error","required":["status","message","code"],"properties":{"code":{"type":"string","description":"ERROR_CODE"},"detail":{"description":"Detail info","oneOf":[{"type":"string"},{"type":"array","items":{"type":"object","properties":{"dataPath":{"type":"string"},"keyword":{"type":"string"},"message":{"type":"string"},"params":{"type":"object"},"schemaPath":{"type":"string"}}}}]},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}}}}},"tags":["Content Items"]}}}}
````

## Search Content Items

> Returns search results over CIL content items. Applies vector search.\
> \
> Permissions: users will be able to search only across collections that they have access to.\
>

OpenAPI:

```json
{"openapi":"3.1.0","info":{"title":"Shelf Content Integration Layer API","version":"1.0.0"},"tags":[{"description":"There two endpoints: \"List Content Items\" and \"Search Content Items\".\nThey are designed to be used in different scenarios.\nIf you want to sync content from Shelf into your database - \"List CIL Content API\" is the right choice.\n\n## Search CIL Content API\n\n- **Search event submission**: When using the Search API, a search event is submitted, which is then processed by the Content Insights pipeline.\nThis could be useful for tracking and analyzing user search behavior over time.\n\n- **Appear on Search Queries reports**: The data from the search event will eventually appear on Search Queries reports, providing insights into the types of queries that users are performing.\n\n- **Vector search**: It applies vector search to find the most relevant content items based on the search term.\n\n## List CIL Content API\n\n- **Data listing without search events**: This API lists CIL content items without creating a search event or contributing to the Content Insights pipeline.\n\n- **No `searchResultsUrl`**: The response from the List API does not include a `searchResultsUrl`, which would otherwise be used to link directly to the search results.\n\n- **Paginate over content items**: It's designed to paginate over content items rather than perform a relevance-based search.\n\nSo, to decide which API to use, consider whether you need insights and tracking of user search behavior (use the \"Search CIL Content API\") or whether you simply need to list content items without additional analytics (use the \"List CIL Content API\").\n\n## Pagination Mechanics\n\n1. **Initial Request**: The initial API request includes a pagination parameter `size`, which defines the number of items to be returned in a single response.\nAdditionally, clients can specify a `from` parameter to skip a certain number of items from the start, effectively controlling the starting point of the data retrieval.\n\n2. **Iterative Pagination**: To navigate through the content items, the API uses a `nextToken` parameter.\nAfter the initial request, the API response includes a `nextToken` value, which is a unique identifier for the next page of results.\n\n3. **Subsequent Requests**: For subsequent requests, clients include this `nextToken` in their request to retrieve the next set of items.\nThis token ensures that each request fetches a new page of results, starting exactly where the last one ended.\n\n4. **Page Info**: Each response also contains a `pageInfo` object, providing metadata about the pagination state.\nThis includes information like `currentPage`, `hasNextPage`, `totalPages`, and `totalResultsCount`, giving a comprehensive overview of the pagination context.\n\n5. **Efficient Data Retrieval**: This pagination system allows for efficient data retrieval, especially in scenarios where the total number of content items is large.\nClients can systematically fetch all items in a controlled and manageable manner.","name":"Content Items"}],"servers":[{"description":"US region","url":"https://api.shelf.io"},{"description":"EU region","url":"https://api.shelf-eu.com"},{"description":"CA region","url":"https://api.shelf-ca.com"}],"security":[{"auth_token":[]}],"components":{"securitySchemes":{"auth_token":{"type":"apiKey","description":"Shelf API Token. See [Create API Token](https://docs.shelf.io/dev-portal/authentication/create-api-token) for more details.","in":"header","name":"Authorization"}}},"paths":{"/cil-search/content":{"post":{"operationId":"searchContent","summary":"Search Content Items","description":"Returns search results over CIL content items. Applies vector search.\n\nPermissions: users will be able to search only across collections that they have access to.\n","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"type":"object","required":["origin"],"properties":{"origin":{"type":"string","description":"System where search request originated from."}}},{"type":"object","properties":{"purpose":{"type":"string","description":"Reason to trigger search request.","default":"search-results","enum":["search-results","ask-copilot"]}}},{"type":"object","properties":{"fieldsFilters":{"type":"object","properties":{"type":{"type":"array","items":{"type":"string"}},"contentTypeId":{"type":"array","items":{"type":"string"}},"ownerId":{"type":"array","items":{"type":"string"}},"ratingMoreThan":{"type":"array","maxItems":1,"minItems":1,"items":{"type":"number","maximum":4,"minimum":0}},"shelf_categoryId":{"type":"array","maxItems":20,"minItems":0,"items":{"type":"string"}},"shelf_categoryIdToExclude":{"type":"array","description":"Filter content by ids of categories it does not belong to.","maxItems":20,"minItems":0,"items":{"type":"string"}},"shelf_categoryOp":{"type":"string","description":"Specifies how to filter content by ids of categories if multiple ids provided. \"and\" - matching content should have all provided category ids. \"or\" - matching content should have any one of provided category ids.","default":"or","enum":["and","or"]},"shelf_reviewStatus":{"type":"array","description":"Filter content by review status. Can be provided only if Content Review feature is enabled.","maxLength":3,"minLength":0,"items":{"type":"string","enum":["up-to-date","out-of-date","none"]}},"source":{"type":"array","items":{"type":"string"}}}}}},{"type":"object","properties":{"enrichmentsFilters":{"type":"array","description":"Filter content by enrichments. Can be provided only if Content Enrichments feature is enabled.","maxItems":1,"minItems":1,"items":{"type":"object","required":["type"],"properties":{"type":{"type":"string","description":"Filter content by types of enrichments.","enum":["NER"]},"ids":{"type":"array","description":"Filter content by ids of enrichments instance ids.","items":{"type":"string"}},"values":{"type":"array","description":"Filter content by values of enrichments.","items":{"type":"object","required":["key","value"],"properties":{"key":{"type":"string","description":"Key of the enrichment"},"value":{"description":"Value of the enrichment. Can be a string, number, boolean or array of strings.","oneOf":[{"type":"array","items":{"type":"string"}},{"type":"number"},{"type":"string"},{"type":"boolean"}]}}}}}}}}},{"type":"object","properties":{"collectionIds":{"type":"array","description":"Filter content by ids of collections it belongs to.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"collectionIdsToExclude":{"type":"array","description":"Filter content by ids of collections it does not belong to.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"connectorIds":{"type":"array","description":"Filter content by ids of connectors it was synchronized with.","maxItems":50,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"createdAfter":{"type":"string","description":"Filter content that was created starting from the given date. Creation date from source system is used.","format":"date"},"createdBefore":{"type":"string","description":"Filter content that was created up to the given date. Creation date from source system is used.","format":"date"},"idsToExclude":{"type":"array","description":"Filter out specific external ids","maxItems":1000,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"idsToInclude":{"type":"array","description":"Filter specific external ids","maxItems":1000,"minItems":0,"items":{"type":"string","maxLength":64,"minLength":6}},"includeDeepResults":{"type":"boolean","description":"If specified `parentId` would be also searched through grand parent locations"},"includePrivateContent":{"type":"boolean","description":"If specified private content would be included in search results","default":true},"parentId":{"type":"string","description":"Filter content that is in given location"},"query":{"type":"string","description":"Filters content by searchable text, like `title`, `description`, `text` and `tags` fields."},"queryFields":{"type":"array","description":"Filters content by specific fields by query provided. If not specified, all searchable fields are used.","maxItems":5,"minItems":1,"items":{"oneOf":[{"type":"string","enum":["title"]},{"type":"string","pattern":"^fields\\\\.shelf_customField_.+$"}]}},"searchLanguage":{"type":"string","description":"Filters content by language code. Specify `any` to search across all languages.","maxLength":5,"minLength":2},"tags":{"type":"array","description":"Filters content by tags. Uses `tagsOp` parameter to specify how to treat multiple tags.","maxItems":200,"minItems":0,"items":{"type":"string","maxLength":40,"minLength":1}},"tagsOp":{"type":"string","description":"Specifies how to filter content by tags if multiple tags provided. \"and\" - matching content should have all provided tags. \"or\" - matching content should have any one of provided tags.","default":"or","enum":["and","or"]},"tagsToExclude":{"type":"array","description":"Filter content by tags it does not belong to.","maxItems":200,"minItems":0,"items":{"type":"string","maxLength":40,"minLength":1}},"updatedAfter":{"type":"string","description":"Filter content that was updated after or equal the given date. Update date from source system is used.","format":"date"},"updatedAfterStrict":{"type":"string","description":"Filter content that was updated strictly after the given date. Update date from source system is used.","format":"date"},"updatedBefore":{"type":"string","description":"Filter content that was updated before or equal the given date. Update date from source system is used.","format":"date"},"updatedBeforeStrict":{"type":"string","description":"Filter content that was updated strictly before the given date. Update date from source system is used.","format":"date"}}},{"type":"object","properties":{"sortBy":{"type":"string","description":"Specify how (by what) to sort search results.","enum":["TITLE","CREATED_DATE","UPDATED_DATE","RELEVANCE","VIEWS","RATING"]},"sortOrder":{"type":"string","description":"Specify either ascending or descnding sort order to apply to `sortBy` parameter.","enum":["ASC","DESC"]}}},{"type":"object","properties":{"from":{"type":"integer","description":"Filters out content by numbered position in the search results, for example if the value is `3`, then the first item of the search will be the 4th one, meaning that the first three were skipped.","maximum":10000,"minimum":0},"nextToken":{"type":"string","description":"Next token should be used to retrieve next portion of the results (next page). Next token from the response of this API can be used correctly ONLY if filters & sorting in new request have not changed comparing to the request where next token was returned. If filters or sorting have changed, use this API without next token, and after retrieving first page with changed filters or sorting next token will be returned by this API and can be used. Use only nextToken returned by this API, do not change it."},"size":{"type":"integer","description":"Using this parameter it's possible to filter out the amount of gems in response.","maximum":1000,"minimum":0}}}]}}}},"responses":{"200":{"description":"Search results","content":{"application/json":{"schema":{"type":"object","required":["items","pageInfo","searchLanguage","searchEventId"],"properties":{"pageInfo":{"allOf":[{"type":"object","description":"This object holds information about pagination. Use it to know how to iterate over array of results","properties":{"currentPage":{"type":"number","default":1,"maximum":100,"minimum":1},"hasNextPage":{"type":"boolean"},"hasPreviousPage":{"type":"boolean"},"pageSize":{"type":"number"},"totalPages":{"type":"number","maximum":100,"minimum":1},"totalResultsCount":{"type":"number","maximum":999999,"minimum":0}}},{"type":"object","properties":{"nextToken":{"type":"string"}}}]},"searchEventId":{"type":"string","description":"Search event ID associated with this search request"},"searchLanguage":{"type":"string","description":"Language code with which search request was executed"},"searchResultsUrl":{"type":"string","description":"Url pointing to Shelf KMS Search results with similar filters applied. Will not return exactly same results, because CIL Search covers more content than KMS Search."},"items":{"type":"array","items":{"allOf":[{"allOf":[{"type":"object","required":["fields"],"properties":{"accountId":{"type":"string","description":"ID of account","maxLength":64,"minLength":6},"collectionIds":{"type":"array","description":"List of collection IDs this content item belongs to in external system","items":{"type":"string","description":"Collection ID from external system","maxLength":512,"minLength":1}},"connectorId":{"type":"string","description":"Connector ID which synced this content item to CIL"},"createdAt":{"type":"string","description":"Date when content was first created in CIL","format":"date"},"externalId":{"type":"string","description":"External content item ID, provided by CIL Connector, corresponding to id in source system"},"externalURL":{"type":"string","description":"Url pointing to content in source system"},"fields":{"type":"array","items":{"type":"object","required":["key","value","type","label"],"properties":{"type":{"type":"string"},"data":{"type":"object","additionalProperties":true},"key":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}}}},"iconURL":{"type":"string","description":"Icon url for this content item. Present if this content item corresponds to Shelf KMS gem."},"id":{"type":"string","description":"Content item ID (internal to CIL)"},"internalCollectionIds":{"type":"array","description":"List of internal collection IDs this content item belongs to in CIL","items":{"type":"string","maxLength":26,"minLength":26}},"internalId":{"type":"string","description":"Content item ID (internal to CIL)"},"lang":{"type":"string","description":"Language code of content item"},"lastViewedAt":{"type":"string","description":"Date when content was last viewed at","format":"date"},"locations":{"type":"array","description":"List of locations of this content item belongs to an external system","items":{"type":"object","required":["grandParentIds","collectionId"],"properties":{"collectionId":{"type":"string","description":"Collection ID from external system","maxLength":512,"minLength":1},"grandParentIds":{"type":"array","items":{"type":"string","maxLength":64,"minLength":6}},"parentId":{"type":"string","maxLength":64,"minLength":6}}}},"originalCreatedAt":{"type":"string","description":"Date when content was first created in source system","format":"date"},"originalUpdatedAt":{"type":"string","description":"Date when content was last updated in source system","format":"date"},"tags":{"type":"array","description":"List of tags for this content item","items":{"type":"string"}},"title":{"type":"string","description":"Content item title"},"updatedAt":{"type":"string","description":"Date when content was last updated in CIL","format":"date"}}},{"type":"object","properties":{"description":{"type":"string","description":"Content item description"},"iconURL":{"type":"string","description":"Icon url for this content item. Present if this content item corresponds to Shelf KMS gem."},"jobId":{"type":"string","description":"Job ID that synced this content item to CIL"},"syncFlowId":{"allOf":[{"type":"string","maxLength":26,"minLength":26},{"description":"Sync Flow ID"}]}}},{"type":"object","properties":{"enrichments":{"type":"array","description":"List of enrichments for this content item, list is limited to up to 5 items.","items":{"type":"object","required":["id","type","values"],"properties":{"type":{"type":"string"},"id":{"type":"string"},"values":{"type":"array","items":{"type":"object","required":["key","label","value"],"properties":{"key":{"type":"string"},"label":{"type":"string"},"value":{"oneOf":[{"type":"string"},{"type":"number"},{"type":"boolean"},{"type":"array","items":{"type":"string"}}]}}}}}}},"enrichmentsCount":{"type":"object","description":"Count of enrichments for this content item","properties":{"NER":{"type":"number","description":"Count of NER enrichments for this content item"}}}}}]},{"type":"object","properties":{"type":{"type":"string","description":"Specifies that this is a content item","enum":["content-item"]},"text":{"type":"string","description":"Content item main text"}}}]}}}}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"oneOf":[{"type":"object","title":"API Error with code","required":["error"],"properties":{"error":{"type":"object","description":"API Error with code","required":["status","message","code"],"properties":{"code":{"type":"string","description":"Error code"},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}},{"type":"object","title":"Bad request payload (AJV)","required":["error"],"properties":{"error":{"type":"object","description":"API Error With detail","required":["status","message","detail"],"properties":{"detail":{"type":"array","description":"Detail info","items":{"type":"object","properties":{"instancePath":{"type":"string"},"keyword":{"type":"string"},"message":{"type":"string"},"params":{"type":"object"},"schemaPath":{"type":"string"}}}},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}]}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","title":"API Error with code","required":["error"],"properties":{"error":{"type":"object","description":"API Error with code","required":["status","message","code"],"properties":{"code":{"type":"string","description":"Error code"},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}}}}},"tags":["Content Items"]}}}}
```

## Get last 50 updated content items

> Get last 50 updated content items in a given sync flow

OpenAPI:

```json
{"openapi":"3.1.0","info":{"title":"Shelf Content Integration Layer API","version":"1.0.0"},"tags":[{"description":"There two endpoints: \"List Content Items\" and \"Search Content Items\".\nThey are designed to be used in different scenarios.\nIf you want to sync content from Shelf into your database - \"List CIL Content API\" is the right choice.\n\n## Search CIL Content API\n\n- **Search event submission**: When using the Search API, a search event is submitted, which is then processed by the Content Insights pipeline.\nThis could be useful for tracking and analyzing user search behavior over time.\n\n- **Appear on Search Queries reports**: The data from the search event will eventually appear on Search Queries reports, providing insights into the types of queries that users are performing.\n\n- **Vector search**: It applies vector search to find the most relevant content items based on the search term.\n\n## List CIL Content API\n\n- **Data listing without search events**: This API lists CIL content items without creating a search event or contributing to the Content Insights pipeline.\n\n- **No `searchResultsUrl`**: The response from the List API does not include a `searchResultsUrl`, which would otherwise be used to link directly to the search results.\n\n- **Paginate over content items**: It's designed to paginate over content items rather than perform a relevance-based search.\n\nSo, to decide which API to use, consider whether you need insights and tracking of user search behavior (use the \"Search CIL Content API\") or whether you simply need to list content items without additional analytics (use the \"List CIL Content API\").\n\n## Pagination Mechanics\n\n1. **Initial Request**: The initial API request includes a pagination parameter `size`, which defines the number of items to be returned in a single response.\nAdditionally, clients can specify a `from` parameter to skip a certain number of items from the start, effectively controlling the starting point of the data retrieval.\n\n2. **Iterative Pagination**: To navigate through the content items, the API uses a `nextToken` parameter.\nAfter the initial request, the API response includes a `nextToken` value, which is a unique identifier for the next page of results.\n\n3. **Subsequent Requests**: For subsequent requests, clients include this `nextToken` in their request to retrieve the next set of items.\nThis token ensures that each request fetches a new page of results, starting exactly where the last one ended.\n\n4. **Page Info**: Each response also contains a `pageInfo` object, providing metadata about the pagination state.\nThis includes information like `currentPage`, `hasNextPage`, `totalPages`, and `totalResultsCount`, giving a comprehensive overview of the pagination context.\n\n5. **Efficient Data Retrieval**: This pagination system allows for efficient data retrieval, especially in scenarios where the total number of content items is large.\nClients can systematically fetch all items in a controlled and manageable manner.","name":"Content Items"}],"servers":[{"description":"US region","url":"https://api.shelf.io"},{"description":"EU region","url":"https://api.shelf-eu.com"},{"description":"CA region","url":"https://api.shelf-ca.com"}],"security":[{"auth_token":[]}],"components":{"securitySchemes":{"auth_token":{"type":"apiKey","description":"Shelf API Token. See [Create API Token](https://docs.shelf.io/dev-portal/authentication/create-api-token) for more details.","in":"header","name":"Authorization"}}},"paths":{"/content-ingestion/preview/{syncFlowId}":{"get":{"operationId":"getLastUpdatedContentItems","summary":"Get last 50 updated content items","description":"Get last 50 updated content items in a given sync flow","parameters":[{"schema":{"allOf":[{"type":"string","maxLength":26,"minLength":26},{"description":"Sync Flow ID"}]},"in":"path","name":"syncFlowId","required":true}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"type":"object","required":["items"],"properties":{"items":{"type":"array","items":{"type":"object","required":["title","externalURL","collectionIds","updatedAt"],"properties":{"collectionIds":{"type":"array","items":{"type":"string"}},"externalURL":{"type":"string","description":"Link to external resource","maxLength":2048,"minLength":1},"title":{"type":"string","description":"Title of synced item","maxLength":255,"minLength":1},"updatedAt":{"type":"string","description":"Date of updating","format":"date-time"}}}}}}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"object","title":"Bad request payload (AJV)","required":["error"],"properties":{"error":{"type":"object","description":"API Error With detail","required":["status","message","detail"],"properties":{"detail":{"type":"array","description":"Detail info","items":{"type":"object","properties":{"instancePath":{"type":"string"},"keyword":{"type":"string"},"message":{"type":"string"},"params":{"type":"object"},"schemaPath":{"type":"string"}}}},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","title":"API Error with code","required":["error"],"properties":{"error":{"type":"object","description":"API Error with code","required":["status","message","code"],"properties":{"code":{"type":"string","description":"Error code"},"message":{"type":"string","description":"Error message"},"status":{"type":"number","description":"Status code"}}}}}}}}},"tags":["Content Items"]}}}}
```
