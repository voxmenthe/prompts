import{s as Ie,o as _e,n as F}from"../chunks/scheduler.18a86fab.js";import{S as be,i as $e,g as y,s as M,r as h,A as ge,h as u,f as l,c as J,j as we,u as f,x as _,k as Ue,y as Ce,a as i,v as w,d as U,t as j,w as d}from"../chunks/index.98837b22.js";import{T as je}from"../chunks/Tip.77304350.js";import{C as A}from"../chunks/CodeBlock.8d0c2e8a.js";import{H as de,E as Be}from"../chunks/getInferenceSnippets.06c2775f.js";import{H as ve,a as oe}from"../chunks/HfOption.6641485e.js";function Ze(I){let a,m='The <code>model_init</code> function is incompatible with the <a href="./main_classes/trainer#transformers.Trainer.optimizers">optimizers</a> parameter. Subclass <a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer">Trainer</a> and override the <a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer.create_optimizer_and_scheduler">create_optimizer_and_scheduler()</a> method to create a custom optimizer and scheduler.';return{c(){a=y("p"),a.innerHTML=m},l(n){a=u(n,"P",{"data-svelte-h":!0}),_(a)!=="svelte-tn5ltu"&&(a.innerHTML=m)},m(n,r){i(n,a,r)},p:F,d(n){n&&l(a)}}}function qe(I){let a,m='If <a href="./main_classes/trainer#transformers.Trainer.hyperparameter_search.compute_objective">compute_objective</a> isn’t defined, the default <a href="./main_classes/trainer#transformers.Trainer.hyperparameter_search.compute_objective">compute_objective</a> is called which is the sum of an evaluation metric like F1.';return{c(){a=y("p"),a.innerHTML=m},l(n){a=u(n,"P",{"data-svelte-h":!0}),_(a)!=="svelte-wa0ep5"&&(a.innerHTML=m)},m(n,r){i(n,a,r)},p:F,d(n){n&&l(a)}}}function We(I){let a,m='<a href="https://optuna.readthedocs.io/en/stable/tutorial/10_key_features/002_configurations.html#sphx-glr-tutorial-10-key-features-002-configurations-py" rel="nofollow">Optuna</a> optimizes categories, integers, and floats.',n,r,o;return r=new A({props:{code:"ZGVmJTIwb3B0dW5hX2hwX3NwYWNlKHRyaWFsKSUzQSUwQSUyMCUyMCUyMCUyMHJldHVybiUyMCU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMmxlYXJuaW5nX3JhdGUlMjIlM0ElMjB0cmlhbC5zdWdnZXN0X2Zsb2F0KCUyMmxlYXJuaW5nX3JhdGUlMjIlMkMlMjAxZS02JTJDJTIwMWUtNCUyQyUyMGxvZyUzRFRydWUpJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIycGVyX2RldmljZV90cmFpbl9iYXRjaF9zaXplJTIyJTNBJTIwdHJpYWwuc3VnZ2VzdF9jYXRlZ29yaWNhbCglMjJwZXJfZGV2aWNlX3RyYWluX2JhdGNoX3NpemUlMjIlMkMlMjAlNUIxNiUyQyUyMDMyJTJDJTIwNjQlMkMlMjAxMjglNUQpJTJDJTBBJTIwJTIwJTIwJTIwJTdEJTBBJTBBYmVzdF90cmlhbHMlMjAlM0QlMjB0cmFpbmVyLmh5cGVycGFyYW1ldGVyX3NlYXJjaCglMEElMjAlMjAlMjAlMjBkaXJlY3Rpb24lM0QlNUIlMjJtaW5pbWl6ZSUyMiUyQyUyMCUyMm1heGltaXplJTIyJTVEJTJDJTBBJTIwJTIwJTIwJTIwYmFja2VuZCUzRCUyMm9wdHVuYSUyMiUyQyUwQSUyMCUyMCUyMCUyMGhwX3NwYWNlJTNEb3B0dW5hX2hwX3NwYWNlJTJDJTBBJTIwJTIwJTIwJTIwbl90cmlhbHMlM0QyMCUyQyUwQSUyMCUyMCUyMCUyMGNvbXB1dGVfb2JqZWN0aXZlJTNEY29tcHV0ZV9vYmplY3RpdmUlMkMlMEEp",highlighted:`<span class="hljs-keyword">def</span> <span class="hljs-title function_">optuna_hp_space</span>(<span class="hljs-params">trial</span>):
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">&quot;learning_rate&quot;</span>: trial.suggest_float(<span class="hljs-string">&quot;learning_rate&quot;</span>, <span class="hljs-number">1e-6</span>, <span class="hljs-number">1e-4</span>, log=<span class="hljs-literal">True</span>),
        <span class="hljs-string">&quot;per_device_train_batch_size&quot;</span>: trial.suggest_categorical(<span class="hljs-string">&quot;per_device_train_batch_size&quot;</span>, [<span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>]),
    }

best_trials = trainer.hyperparameter_search(
    direction=[<span class="hljs-string">&quot;minimize&quot;</span>, <span class="hljs-string">&quot;maximize&quot;</span>],
    backend=<span class="hljs-string">&quot;optuna&quot;</span>,
    hp_space=optuna_hp_space,
    n_trials=<span class="hljs-number">20</span>,
    compute_objective=compute_objective,
)`,wrap:!1}}),{c(){a=y("p"),a.innerHTML=m,n=M(),h(r.$$.fragment)},l(s){a=u(s,"P",{"data-svelte-h":!0}),_(a)!=="svelte-eii0j4"&&(a.innerHTML=m),n=J(s),f(r.$$.fragment,s)},m(s,c){i(s,a,c),i(s,n,c),w(r,s,c),o=!0},p:F,i(s){o||(U(r.$$.fragment,s),o=!0)},o(s){j(r.$$.fragment,s),o=!1},d(s){s&&(l(a),l(n)),d(r,s)}}}function ze(I){let a,m='<a href="https://docs.ray.io/en/latest/tune/api/search_space.html" rel="nofollow">Ray Tune</a> optimizes floats, integers, and categorical parameters. It also offers multiple sampling distributions for each parameter such as uniform and log-uniform.',n,r,o;return r=new A({props:{code:"ZGVmJTIwcmF5X2hwX3NwYWNlKHRyaWFsKSUzQSUwQSUyMCUyMCUyMCUyMHJldHVybiUyMCU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMmxlYXJuaW5nX3JhdGUlMjIlM0ElMjB0dW5lLmxvZ3VuaWZvcm0oMWUtNiUyQyUyMDFlLTQpJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIycGVyX2RldmljZV90cmFpbl9iYXRjaF9zaXplJTIyJTNBJTIwdHVuZS5jaG9pY2UoJTVCMTYlMkMlMjAzMiUyQyUyMDY0JTJDJTIwMTI4JTVEKSUyQyUwQSUyMCUyMCUyMCUyMCU3RCUwQSUwQWJlc3RfdHJpYWxzJTIwJTNEJTIwdHJhaW5lci5oeXBlcnBhcmFtZXRlcl9zZWFyY2goJTBBJTIwJTIwJTIwJTIwZGlyZWN0aW9uJTNEJTVCJTIybWluaW1pemUlMjIlMkMlMjAlMjJtYXhpbWl6ZSUyMiU1RCUyQyUwQSUyMCUyMCUyMCUyMGJhY2tlbmQlM0QlMjJyYXklMjIlMkMlMEElMjAlMjAlMjAlMjBocF9zcGFjZSUzRHJheV9ocF9zcGFjZSUyQyUwQSUyMCUyMCUyMCUyMG5fdHJpYWxzJTNEMjAlMkMlMEElMjAlMjAlMjAlMjBjb21wdXRlX29iamVjdGl2ZSUzRGNvbXB1dGVfb2JqZWN0aXZlJTJDJTBBKQ==",highlighted:`<span class="hljs-keyword">def</span> <span class="hljs-title function_">ray_hp_space</span>(<span class="hljs-params">trial</span>):
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">&quot;learning_rate&quot;</span>: tune.loguniform(<span class="hljs-number">1e-6</span>, <span class="hljs-number">1e-4</span>),
        <span class="hljs-string">&quot;per_device_train_batch_size&quot;</span>: tune.choice([<span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>]),
    }

best_trials = trainer.hyperparameter_search(
    direction=[<span class="hljs-string">&quot;minimize&quot;</span>, <span class="hljs-string">&quot;maximize&quot;</span>],
    backend=<span class="hljs-string">&quot;ray&quot;</span>,
    hp_space=ray_hp_space,
    n_trials=<span class="hljs-number">20</span>,
    compute_objective=compute_objective,
)`,wrap:!1}}),{c(){a=y("p"),a.innerHTML=m,n=M(),h(r.$$.fragment)},l(s){a=u(s,"P",{"data-svelte-h":!0}),_(a)!=="svelte-ayruqg"&&(a.innerHTML=m),n=J(s),f(r.$$.fragment,s)},m(s,c){i(s,a,c),i(s,n,c),w(r,s,c),o=!0},p:F,i(s){o||(U(r.$$.fragment,s),o=!0)},o(s){j(r.$$.fragment,s),o=!1},d(s){s&&(l(a),l(n)),d(r,s)}}}function Xe(I){let a,m='<a href="https://docs.sigopt.com/ai-module-api-references/api_reference/objects/object_parameter" rel="nofollow">SigOpt</a> optimizes double, integer, and categorical parameters.',n,r,o;return r=new A({props:{code:"ZGVmJTIwc2lnb3B0X2hwX3NwYWNlKHRyaWFsKSUzQSUwQSUyMCUyMCUyMCUyMHJldHVybiUyMCU1QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3QiUyMmJvdW5kcyUyMiUzQSUyMCU3QiUyMm1pbiUyMiUzQSUyMDFlLTYlMkMlMjAlMjJtYXglMjIlM0ElMjAxZS00JTdEJTJDJTIwJTIybmFtZSUyMiUzQSUyMCUyMmxlYXJuaW5nX3JhdGUlMjIlMkMlMjAlMjJ0eXBlJTIyJTNBJTIwJTIyZG91YmxlJTIyJTdEJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIyY2F0ZWdvcmljYWxfdmFsdWVzJTIyJTNBJTIwJTVCJTIyMTYlMjIlMkMlMjAlMjIzMiUyMiUyQyUyMCUyMjY0JTIyJTJDJTIwJTIyMTI4JTIyJTVEJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIybmFtZSUyMiUzQSUyMCUyMnBlcl9kZXZpY2VfdHJhaW5fYmF0Y2hfc2l6ZSUyMiUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMnR5cGUlMjIlM0ElMjAlMjJjYXRlZ29yaWNhbCUyMiUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3RCUyQyUwQSUyMCUyMCUyMCUyMCU1RCUwQSUwQWJlc3RfdHJpYWxzJTIwJTNEJTIwdHJhaW5lci5oeXBlcnBhcmFtZXRlcl9zZWFyY2goJTBBJTIwJTIwJTIwJTIwZGlyZWN0aW9uJTNEJTVCJTIybWluaW1pemUlMjIlMkMlMjAlMjJtYXhpbWl6ZSUyMiU1RCUyQyUwQSUyMCUyMCUyMCUyMGJhY2tlbmQlM0QlMjJzaWdvcHQlMjIlMkMlMEElMjAlMjAlMjAlMjBocF9zcGFjZSUzRHNpZ29wdF9ocF9zcGFjZSUyQyUwQSUyMCUyMCUyMCUyMG5fdHJpYWxzJTNEMjAlMkMlMEElMjAlMjAlMjAlMjBjb21wdXRlX29iamVjdGl2ZSUzRGNvbXB1dGVfb2JqZWN0aXZlJTJDJTBBKQ==",highlighted:`<span class="hljs-keyword">def</span> <span class="hljs-title function_">sigopt_hp_space</span>(<span class="hljs-params">trial</span>):
    <span class="hljs-keyword">return</span> [
        {<span class="hljs-string">&quot;bounds&quot;</span>: {<span class="hljs-string">&quot;min&quot;</span>: <span class="hljs-number">1e-6</span>, <span class="hljs-string">&quot;max&quot;</span>: <span class="hljs-number">1e-4</span>}, <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;learning_rate&quot;</span>, <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;double&quot;</span>},
        {
            <span class="hljs-string">&quot;categorical_values&quot;</span>: [<span class="hljs-string">&quot;16&quot;</span>, <span class="hljs-string">&quot;32&quot;</span>, <span class="hljs-string">&quot;64&quot;</span>, <span class="hljs-string">&quot;128&quot;</span>],
            <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;per_device_train_batch_size&quot;</span>,
            <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;categorical&quot;</span>,
        },
    ]

best_trials = trainer.hyperparameter_search(
    direction=[<span class="hljs-string">&quot;minimize&quot;</span>, <span class="hljs-string">&quot;maximize&quot;</span>],
    backend=<span class="hljs-string">&quot;sigopt&quot;</span>,
    hp_space=sigopt_hp_space,
    n_trials=<span class="hljs-number">20</span>,
    compute_objective=compute_objective,
)`,wrap:!1}}),{c(){a=y("p"),a.innerHTML=m,n=M(),h(r.$$.fragment)},l(s){a=u(s,"P",{"data-svelte-h":!0}),_(a)!=="svelte-1k7i6jo"&&(a.innerHTML=m),n=J(s),f(r.$$.fragment,s)},m(s,c){i(s,a,c),i(s,n,c),w(r,s,c),o=!0},p:F,i(s){o||(U(r.$$.fragment,s),o=!0)},o(s){j(r.$$.fragment,s),o=!1},d(s){s&&(l(a),l(n)),d(r,s)}}}function Ye(I){let a,m='<a href="https://docs.wandb.ai/guides/sweeps/sweep-config-keys" rel="nofollow">Weights &amp; Biases</a> also optimizes integers, floats, and categorical parameters. It also includes support for different search strategies and distribution options.',n,r,o;return r=new A({props:{code:"ZGVmJTIwd2FuZGJfaHBfc3BhY2UodHJpYWwpJTNBJTBBJTIwJTIwJTIwJTIwcmV0dXJuJTIwJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIybWV0aG9kJTIyJTNBJTIwJTIycmFuZG9tJTIyJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIybWV0cmljJTIyJTNBJTIwJTdCJTIybmFtZSUyMiUzQSUyMCUyMm9iamVjdGl2ZSUyMiUyQyUyMCUyMmdvYWwlMjIlM0ElMjAlMjJtaW5pbWl6ZSUyMiU3RCUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMnBhcmFtZXRlcnMlMjIlM0ElMjAlN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjJsZWFybmluZ19yYXRlJTIyJTNBJTIwJTdCJTIyZGlzdHJpYnV0aW9uJTIyJTNBJTIwJTIydW5pZm9ybSUyMiUyQyUyMCUyMm1pbiUyMiUzQSUyMDFlLTYlMkMlMjAlMjJtYXglMjIlM0ElMjAxZS00JTdEJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIycGVyX2RldmljZV90cmFpbl9iYXRjaF9zaXplJTIyJTNBJTIwJTdCJTIydmFsdWVzJTIyJTNBJTIwJTVCMTYlMkMlMjAzMiUyQyUyMDY0JTJDJTIwMTI4JTVEJTdEJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTdEJTJDJTBBJTIwJTIwJTIwJTIwJTdEJTBBJTBBYmVzdF90cmlhbHMlMjAlM0QlMjB0cmFpbmVyLmh5cGVycGFyYW1ldGVyX3NlYXJjaCglMEElMjAlMjAlMjAlMjBkaXJlY3Rpb24lM0QlNUIlMjJtaW5pbWl6ZSUyMiUyQyUyMCUyMm1heGltaXplJTIyJTVEJTJDJTBBJTIwJTIwJTIwJTIwYmFja2VuZCUzRCUyMndhbmRiJTIyJTJDJTBBJTIwJTIwJTIwJTIwaHBfc3BhY2UlM0R3YW5kYl9ocF9zcGFjZSUyQyUwQSUyMCUyMCUyMCUyMG5fdHJpYWxzJTNEMjAlMkMlMEElMjAlMjAlMjAlMjBjb21wdXRlX29iamVjdGl2ZSUzRGNvbXB1dGVfb2JqZWN0aXZlJTJDJTBBKQ==",highlighted:`<span class="hljs-keyword">def</span> <span class="hljs-title function_">wandb_hp_space</span>(<span class="hljs-params">trial</span>):
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;random&quot;</span>,
        <span class="hljs-string">&quot;metric&quot;</span>: {<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;objective&quot;</span>, <span class="hljs-string">&quot;goal&quot;</span>: <span class="hljs-string">&quot;minimize&quot;</span>},
        <span class="hljs-string">&quot;parameters&quot;</span>: {
            <span class="hljs-string">&quot;learning_rate&quot;</span>: {<span class="hljs-string">&quot;distribution&quot;</span>: <span class="hljs-string">&quot;uniform&quot;</span>, <span class="hljs-string">&quot;min&quot;</span>: <span class="hljs-number">1e-6</span>, <span class="hljs-string">&quot;max&quot;</span>: <span class="hljs-number">1e-4</span>},
            <span class="hljs-string">&quot;per_device_train_batch_size&quot;</span>: {<span class="hljs-string">&quot;values&quot;</span>: [<span class="hljs-number">16</span>, <span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">128</span>]},
        },
    }

best_trials = trainer.hyperparameter_search(
    direction=[<span class="hljs-string">&quot;minimize&quot;</span>, <span class="hljs-string">&quot;maximize&quot;</span>],
    backend=<span class="hljs-string">&quot;wandb&quot;</span>,
    hp_space=wandb_hp_space,
    n_trials=<span class="hljs-number">20</span>,
    compute_objective=compute_objective,
)`,wrap:!1}}),{c(){a=y("p"),a.innerHTML=m,n=M(),h(r.$$.fragment)},l(s){a=u(s,"P",{"data-svelte-h":!0}),_(a)!=="svelte-17ogeay"&&(a.innerHTML=m),n=J(s),f(r.$$.fragment,s)},m(s,c){i(s,a,c),i(s,n,c),w(r,s,c),o=!0},p:F,i(s){o||(U(r.$$.fragment,s),o=!0)},o(s){j(r.$$.fragment,s),o=!1},d(s){s&&(l(a),l(n)),d(r,s)}}}function Qe(I){let a,m,n,r,o,s,c,B;return a=new oe({props:{id:"backends",option:"Optuna",$$slots:{default:[We]},$$scope:{ctx:I}}}),n=new oe({props:{id:"backends",option:"Ray Tune",$$slots:{default:[ze]},$$scope:{ctx:I}}}),o=new oe({props:{id:"backends",option:"SigOpt",$$slots:{default:[Xe]},$$scope:{ctx:I}}}),c=new oe({props:{id:"backends",option:"Weights & Biases",$$slots:{default:[Ye]},$$scope:{ctx:I}}}),{c(){h(a.$$.fragment),m=M(),h(n.$$.fragment),r=M(),h(o.$$.fragment),s=M(),h(c.$$.fragment)},l(p){f(a.$$.fragment,p),m=J(p),f(n.$$.fragment,p),r=J(p),f(o.$$.fragment,p),s=J(p),f(c.$$.fragment,p)},m(p,T){w(a,p,T),i(p,m,T),w(n,p,T),i(p,r,T),w(o,p,T),i(p,s,T),w(c,p,T),B=!0},p(p,T){const H={};T&2&&(H.$$scope={dirty:T,ctx:p}),a.$set(H);const v={};T&2&&(v.$$scope={dirty:T,ctx:p}),n.$set(v);const b={};T&2&&(b.$$scope={dirty:T,ctx:p}),o.$set(b);const S={};T&2&&(S.$$scope={dirty:T,ctx:p}),c.$set(S)},i(p){B||(U(a.$$.fragment,p),U(n.$$.fragment,p),U(o.$$.fragment,p),U(c.$$.fragment,p),B=!0)},o(p){j(a.$$.fragment,p),j(n.$$.fragment,p),j(o.$$.fragment,p),j(c.$$.fragment,p),B=!1},d(p){p&&(l(m),l(r),l(s)),d(a,p),d(n,p),d(o,p),d(c,p)}}}function ke(I){let a,m,n,r,o,s,c,B='Hyperparameter search discovers an optimal set of hyperparameters that produces the best model performance. <a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer">Trainer</a> supports several hyperparameter search backends - <a href="https://optuna.readthedocs.io/en/stable/index.html" rel="nofollow">Optuna</a>, <a href="https://docs.sigopt.com/" rel="nofollow">SigOpt</a>, <a href="https://docs.wandb.ai/" rel="nofollow">Weights &amp; Biases</a>, <a href="https://docs.ray.io/en/latest/tune/index.html" rel="nofollow">Ray Tune</a> - through  <a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer.hyperparameter_search">hyperparameter_search()</a> to optimize an objective or even multiple objectives.',p,T,H="This guide will go over how to set up a hyperparameter search for each of the backends.",v,b,S='<p>[!WARNING][SigOpt](<a href="https://github.com/sigopt/sigopt-server" rel="nofollow">https://github.com/sigopt/sigopt-server</a>) is in public archive mode and is no longer actively maintained. Try using Optuna, Weights &amp; Biases or Ray Tune instead.</p>',N,Z,x,q,ce='To use <a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer.hyperparameter_search">hyperparameter_search()</a>, you need to create a <code>model_init</code> function. This function includes basic model information (arguments and configuration) because it needs to be reinitialized for each search trial in the run.',D,$,L,W,me="An example <code>model_init</code> function is shown below.",P,z,O,X,Me='Pass <code>model_init</code> to <a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer">Trainer</a> along with everything else you need for training. Then you can call <a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer.hyperparameter_search">hyperparameter_search()</a> to start the search.',K,Y,Je='<a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer.hyperparameter_search">hyperparameter_search()</a> accepts a <a href="./main_classes/trainer#transformers.Trainer.hyperparameter_search.direction">direction</a> parameter to specify whether to minimize, maximize, or minimize and maximize multiple objectives. You’ll also need to set the <a href="./main_classes/trainer#transformers.Trainer.hyperparameter_search.backend">backend</a> you’re using, an <a href="./main_classes/trainer#transformers.Trainer.hyperparameter_search.hp_space">object</a> containing the hyperparameters to optimize for, the <a href="./main_classes/trainer#transformers.Trainer.hyperparameter_search.n_trials">number of trials</a> to run, and a <a href="./main_classes/trainer#transformers.Trainer.hyperparameter_search.compute_objective">compute_objective</a> to return the objective values.',ee,g,se,Q,ae,k,Te="The following examples demonstrate how to perform a hyperparameter search for the learning rate and training batch size using the different backends.",te,C,le,R,ne,V,ye='<a href="/docs/transformers/v4.56.2/en/main_classes/trainer#transformers.Trainer">Trainer</a> only supports hyperparameter search for distributed data parallel (DDP) on the Optuna and SigOpt backends. Only the rank-zero process is used to generate the search trial, and the resulting parameters are passed along to the other ranks.',re,G,ie,E,pe;return o=new de({props:{title:"Hyperparameter search",local:"hyperparameter-search",headingTag:"h1"}}),Z=new A({props:{code:"cGlwJTIwaW5zdGFsbCUyMG9wdHVuYSUyRnNpZ29wdCUyRndhbmRiJTJGcmF5JTVCdHVuZSU1RA==",highlighted:"pip install optuna/sigopt/wandb/ray[tune]",wrap:!1}}),$=new je({props:{warning:!0,$$slots:{default:[Ze]},$$scope:{ctx:I}}}),z=new A({props:{code:"ZGVmJTIwbW9kZWxfaW5pdCh0cmlhbCklM0ElMEElMjAlMjAlMjAlMjByZXR1cm4lMjBBdXRvTW9kZWxGb3JTZXF1ZW5jZUNsYXNzaWZpY2F0aW9uLmZyb21fcHJldHJhaW5lZCglMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBtb2RlbF9hcmdzLm1vZGVsX25hbWVfb3JfcGF0aCUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGNvbmZpZyUzRGNvbmZpZyUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGNhY2hlX2RpciUzRG1vZGVsX2FyZ3MuY2FjaGVfZGlyJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwcmV2aXNpb24lM0Rtb2RlbF9hcmdzLm1vZGVsX3JldmlzaW9uJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwdG9rZW4lM0RUcnVlJTIwaWYlMjBtb2RlbF9hcmdzLnVzZV9hdXRoX3Rva2VuJTIwZWxzZSUyME5vbmUlMkMlMEElMjAlMjAlMjAlMjAp",highlighted:`<span class="hljs-keyword">def</span> <span class="hljs-title function_">model_init</span>(<span class="hljs-params">trial</span>):
    <span class="hljs-keyword">return</span> AutoModelForSequenceClassification.from_pretrained(
        model_args.model_name_or_path,
        config=config,
        cache_dir=model_args.cache_dir,
        revision=model_args.model_revision,
        token=<span class="hljs-literal">True</span> <span class="hljs-keyword">if</span> model_args.use_auth_token <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
    )`,wrap:!1}}),g=new je({props:{warning:!1,$$slots:{default:[qe]},$$scope:{ctx:I}}}),Q=new A({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMFRyYWluZXIlMEElMEF0cmFpbmVyJTIwJTNEJTIwVHJhaW5lciglMEElMjAlMjAlMjAlMjBtb2RlbCUzRE5vbmUlMkMlMEElMjAlMjAlMjAlMjBhcmdzJTNEdHJhaW5pbmdfYXJncyUyQyUwQSUyMCUyMCUyMCUyMHRyYWluX2RhdGFzZXQlM0RzbWFsbF90cmFpbl9kYXRhc2V0JTJDJTBBJTIwJTIwJTIwJTIwZXZhbF9kYXRhc2V0JTNEc21hbGxfZXZhbF9kYXRhc2V0JTJDJTBBJTIwJTIwJTIwJTIwY29tcHV0ZV9tZXRyaWNzJTNEY29tcHV0ZV9tZXRyaWNzJTJDJTBBJTIwJTIwJTIwJTIwcHJvY2Vzc2luZ19jbGFzcyUzRHRva2VuaXplciUyQyUwQSUyMCUyMCUyMCUyMG1vZGVsX2luaXQlM0Rtb2RlbF9pbml0JTJDJTBBJTIwJTIwJTIwJTIwZGF0YV9jb2xsYXRvciUzRGRhdGFfY29sbGF0b3IlMkMlMEEpJTBBdHJhaW5lci5oeXBlcnBhcmFtZXRlcl9zZWFyY2goLi4uKQ==",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> Trainer

trainer = Trainer(
    model=<span class="hljs-literal">None</span>,
    args=training_args,
    train_dataset=small_train_dataset,
    eval_dataset=small_eval_dataset,
    compute_metrics=compute_metrics,
    processing_class=tokenizer,
    model_init=model_init,
    data_collator=data_collator,
)
trainer.hyperparameter_search(...)`,wrap:!1}}),C=new ve({props:{id:"backends",options:["Optuna","Ray Tune","SigOpt","Weights & Biases"],$$slots:{default:[Qe]},$$scope:{ctx:I}}}),R=new de({props:{title:"Distributed Data Parallel",local:"distributed-data-parallel",headingTag:"h2"}}),G=new Be({props:{source:"https://github.com/huggingface/transformers/blob/main/docs/source/en/hpo_train.md"}}),{c(){a=y("meta"),m=M(),n=y("p"),r=M(),h(o.$$.fragment),s=M(),c=y("p"),c.innerHTML=B,p=M(),T=y("p"),T.textContent=H,v=M(),b=y("blockquote"),b.innerHTML=S,N=M(),h(Z.$$.fragment),x=M(),q=y("p"),q.innerHTML=ce,D=M(),h($.$$.fragment),L=M(),W=y("p"),W.innerHTML=me,P=M(),h(z.$$.fragment),O=M(),X=y("p"),X.innerHTML=Me,K=M(),Y=y("p"),Y.innerHTML=Je,ee=M(),h(g.$$.fragment),se=M(),h(Q.$$.fragment),ae=M(),k=y("p"),k.textContent=Te,te=M(),h(C.$$.fragment),le=M(),h(R.$$.fragment),ne=M(),V=y("p"),V.innerHTML=ye,re=M(),h(G.$$.fragment),ie=M(),E=y("p"),this.h()},l(e){const t=ge("svelte-u9bgzb",document.head);a=u(t,"META",{name:!0,content:!0}),t.forEach(l),m=J(e),n=u(e,"P",{}),we(n).forEach(l),r=J(e),f(o.$$.fragment,e),s=J(e),c=u(e,"P",{"data-svelte-h":!0}),_(c)!=="svelte-1m5v78y"&&(c.innerHTML=B),p=J(e),T=u(e,"P",{"data-svelte-h":!0}),_(T)!=="svelte-14igez3"&&(T.textContent=H),v=J(e),b=u(e,"BLOCKQUOTE",{"data-svelte-h":!0}),_(b)!=="svelte-1i3dr3s"&&(b.innerHTML=S),N=J(e),f(Z.$$.fragment,e),x=J(e),q=u(e,"P",{"data-svelte-h":!0}),_(q)!=="svelte-xd1sa8"&&(q.innerHTML=ce),D=J(e),f($.$$.fragment,e),L=J(e),W=u(e,"P",{"data-svelte-h":!0}),_(W)!=="svelte-lepk6y"&&(W.innerHTML=me),P=J(e),f(z.$$.fragment,e),O=J(e),X=u(e,"P",{"data-svelte-h":!0}),_(X)!=="svelte-nw0p84"&&(X.innerHTML=Me),K=J(e),Y=u(e,"P",{"data-svelte-h":!0}),_(Y)!=="svelte-175vi13"&&(Y.innerHTML=Je),ee=J(e),f(g.$$.fragment,e),se=J(e),f(Q.$$.fragment,e),ae=J(e),k=u(e,"P",{"data-svelte-h":!0}),_(k)!=="svelte-f1b3ug"&&(k.textContent=Te),te=J(e),f(C.$$.fragment,e),le=J(e),f(R.$$.fragment,e),ne=J(e),V=u(e,"P",{"data-svelte-h":!0}),_(V)!=="svelte-1ka3epo"&&(V.innerHTML=ye),re=J(e),f(G.$$.fragment,e),ie=J(e),E=u(e,"P",{}),we(E).forEach(l),this.h()},h(){Ue(a,"name","hf:doc:metadata"),Ue(a,"content",Re)},m(e,t){Ce(document.head,a),i(e,m,t),i(e,n,t),i(e,r,t),w(o,e,t),i(e,s,t),i(e,c,t),i(e,p,t),i(e,T,t),i(e,v,t),i(e,b,t),i(e,N,t),w(Z,e,t),i(e,x,t),i(e,q,t),i(e,D,t),w($,e,t),i(e,L,t),i(e,W,t),i(e,P,t),w(z,e,t),i(e,O,t),i(e,X,t),i(e,K,t),i(e,Y,t),i(e,ee,t),w(g,e,t),i(e,se,t),w(Q,e,t),i(e,ae,t),i(e,k,t),i(e,te,t),w(C,e,t),i(e,le,t),w(R,e,t),i(e,ne,t),i(e,V,t),i(e,re,t),w(G,e,t),i(e,ie,t),i(e,E,t),pe=!0},p(e,[t]){const ue={};t&2&&(ue.$$scope={dirty:t,ctx:e}),$.$set(ue);const he={};t&2&&(he.$$scope={dirty:t,ctx:e}),g.$set(he);const fe={};t&2&&(fe.$$scope={dirty:t,ctx:e}),C.$set(fe)},i(e){pe||(U(o.$$.fragment,e),U(Z.$$.fragment,e),U($.$$.fragment,e),U(z.$$.fragment,e),U(g.$$.fragment,e),U(Q.$$.fragment,e),U(C.$$.fragment,e),U(R.$$.fragment,e),U(G.$$.fragment,e),pe=!0)},o(e){j(o.$$.fragment,e),j(Z.$$.fragment,e),j($.$$.fragment,e),j(z.$$.fragment,e),j(g.$$.fragment,e),j(Q.$$.fragment,e),j(C.$$.fragment,e),j(R.$$.fragment,e),j(G.$$.fragment,e),pe=!1},d(e){e&&(l(m),l(n),l(r),l(s),l(c),l(p),l(T),l(v),l(b),l(N),l(x),l(q),l(D),l(L),l(W),l(P),l(O),l(X),l(K),l(Y),l(ee),l(se),l(ae),l(k),l(te),l(le),l(ne),l(V),l(re),l(ie),l(E)),l(a),d(o,e),d(Z,e),d($,e),d(z,e),d(g,e),d(Q,e),d(C,e),d(R,e),d(G,e)}}}const Re='{"title":"Hyperparameter search","local":"hyperparameter-search","sections":[{"title":"Distributed Data Parallel","local":"distributed-data-parallel","sections":[],"depth":2}],"depth":1}';function Ve(I){return _e(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class Ne extends be{constructor(a){super(),$e(this,a,Ve,ke,Ie,{})}}export{Ne as component};
