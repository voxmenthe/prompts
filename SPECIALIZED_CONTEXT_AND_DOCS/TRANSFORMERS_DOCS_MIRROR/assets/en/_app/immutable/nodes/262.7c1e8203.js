import{s as Ia,o as La,n as L}from"../chunks/scheduler.18a86fab.js";import{S as za,i as Ga,g as u,s as i,r as g,A as Za,h,f as a,c as d,j as x,x as w,u as _,k as j,l as Va,y as f,a as l,v as y,d as T,t as b,w as M}from"../chunks/index.98837b22.js";import{T as en}from"../chunks/Tip.77304350.js";import{D as I}from"../chunks/Docstring.a1ef7999.js";import{C as z}from"../chunks/CodeBlock.8d0c2e8a.js";import{E as sn}from"../chunks/ExampleCodeBlock.8c3ee1f9.js";import{H as F,E as Fa}from"../chunks/getInferenceSnippets.06c2775f.js";import{H as Yo,a as ne}from"../chunks/HfOption.6641485e.js";function Wa(J){let t,m=`The Llama 4 family of models comes in two flavors: 109B, and 402B parameters. Both of these flavors are extremely
large and wonâ€™t fit on your run-of-the-mill device. See below for some examples to reduce the memory usage of the
model.`,n,r,c=`For the download to be faster and more resilient, we recommend installing the <code>hf_xet</code> dependency as followed:
<code>pip install transformers[hf_xet]</code>`;return{c(){t=u("p"),t.textContent=m,n=i(),r=u("p"),r.innerHTML=c},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-59ca8l"&&(t.textContent=m),n=d(o),r=h(o,"P",{"data-svelte-h":!0}),w(r)!=="svelte-a4r835"&&(r.innerHTML=c)},m(o,p){l(o,t,p),l(o,n,p),l(o,r,p)},p:L,d(o){o&&(a(t),a(n),a(r))}}}function Ba(J){let t,m;return t=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMHBpcGVsaW5lJTBBaW1wb3J0JTIwdG9yY2glMEElMEFtb2RlbF9pZCUyMCUzRCUyMCUyMm1ldGEtbGxhbWElMkZMbGFtYS00LVNjb3V0LTE3Qi0xNkUtSW5zdHJ1Y3QlMjIlMEElMEFtZXNzYWdlcyUyMCUzRCUyMCU1QiUwQSUyMCUyMCUyMCUyMCU3QiUyMnJvbGUlMjIlM0ElMjAlMjJ1c2VyJTIyJTJDJTIwJTIyY29udGVudCUyMiUzQSUyMCUyMndoYXQlMjBpcyUyMHRoZSUyMHJlY2lwZSUyMG9mJTIwbWF5b25uYWlzZSUzRiUyMiU3RCUyQyUwQSU1RCUwQSUwQXBpcGUlMjAlM0QlMjBwaXBlbGluZSglMEElMjAlMjAlMjAlMjAlMjJ0ZXh0LWdlbmVyYXRpb24lMjIlMkMlMEElMjAlMjAlMjAlMjBtb2RlbCUzRG1vZGVsX2lkJTJDJTBBJTIwJTIwJTIwJTIwZGV2aWNlX21hcCUzRCUyMmF1dG8lMjIlMkMlMEElMjAlMjAlMjAlMjBkdHlwZSUzRHRvcmNoLmJmbG9hdDE2JTBBKSUwQSUwQW91dHB1dCUyMCUzRCUyMHBpcGUobWVzc2FnZXMlMkMlMjBkb19zYW1wbGUlM0RGYWxzZSUyQyUyMG1heF9uZXdfdG9rZW5zJTNEMjAwKSUwQXByaW50KG91dHB1dCU1QjAlNUQlNUIlMjJnZW5lcmF0ZWRfdGV4dCUyMiU1RCU1Qi0xJTVEJTVCJTIyY29udGVudCUyMiU1RCk=",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline
<span class="hljs-keyword">import</span> torch

model_id = <span class="hljs-string">&quot;meta-llama/Llama-4-Scout-17B-16E-Instruct&quot;</span>

messages = [
    {<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;what is the recipe of mayonnaise?&quot;</span>},
]

pipe = pipeline(
    <span class="hljs-string">&quot;text-generation&quot;</span>,
    model=model_id,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16
)

output = pipe(messages, do_sample=<span class="hljs-literal">False</span>, max_new_tokens=<span class="hljs-number">200</span>)
<span class="hljs-built_in">print</span>(output[<span class="hljs-number">0</span>][<span class="hljs-string">&quot;generated_text&quot;</span>][-<span class="hljs-number">1</span>][<span class="hljs-string">&quot;content&quot;</span>])`,wrap:!1}}),{c(){g(t.$$.fragment)},l(n){_(t.$$.fragment,n)},m(n,r){y(t,n,r),m=!0},p:L,i(n){m||(T(t.$$.fragment,n),m=!0)},o(n){b(t.$$.fragment,n),m=!1},d(n){M(t,n)}}}function Ra(J){let t,m;return t=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Ub2tlbml6ZXIlMkMlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24lMEFpbXBvcnQlMjB0b3JjaCUwQSUwQW1vZGVsX2lkJTIwJTNEJTIwJTIybWV0YS1sbGFtYSUyRkxsYW1hLTQtU2NvdXQtMTdCLTE2RS1JbnN0cnVjdCUyMiUwQSUwQXRva2VuaXplciUyMCUzRCUyMEF1dG9Ub2tlbml6ZXIuZnJvbV9wcmV0cmFpbmVkKG1vZGVsX2lkKSUwQSUwQW1lc3NhZ2VzJTIwJTNEJTIwJTVCJTBBJTIwJTIwJTIwJTIwJTdCJTIycm9sZSUyMiUzQSUyMCUyMnVzZXIlMjIlMkMlMjAlMjJjb250ZW50JTIyJTNBJTIwJTIyV2hvJTIwYXJlJTIweW91JTNGJTIyJTdEJTJDJTBBJTVEJTBBaW5wdXRzJTIwJTNEJTIwdG9rZW5pemVyLmFwcGx5X2NoYXRfdGVtcGxhdGUobWVzc2FnZXMlMkMlMjBhZGRfZ2VuZXJhdGlvbl9wcm9tcHQlM0RUcnVlJTJDJTIwcmV0dXJuX3RlbnNvcnMlM0QlMjJwdCUyMiUyQyUyMHJldHVybl9kaWN0JTNEVHJ1ZSklMEElMEFtb2RlbCUyMCUzRCUyMExsYW1hNEZvckNvbmRpdGlvbmFsR2VuZXJhdGlvbi5mcm9tX3ByZXRyYWluZWQoJTBBJTIwJTIwJTIwJTIwbW9kZWxfaWQlMkMlMEElMjAlMjAlMjAlMjBkZXZpY2VfbWFwJTNEJTIyYXV0byUyMiUyQyUwQSUyMCUyMCUyMCUyMGR0eXBlJTNEdG9yY2guYmZsb2F0MTYlMEEpJTBBJTBBb3V0cHV0cyUyMCUzRCUyMG1vZGVsLmdlbmVyYXRlKCoqaW5wdXRzLnRvKG1vZGVsLmRldmljZSklMkMlMjBtYXhfbmV3X3Rva2VucyUzRDEwMCklMEFvdXRwdXRzJTIwJTNEJTIwdG9rZW5pemVyLmJhdGNoX2RlY29kZShvdXRwdXRzJTVCJTNBJTJDJTIwaW5wdXRzJTVCJTIyaW5wdXRfaWRzJTIyJTVELnNoYXBlJTVCLTElNUQlM0ElNUQpJTBBcHJpbnQob3V0cHV0cyU1QjAlNUQp",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer, Llama4ForConditionalGeneration
<span class="hljs-keyword">import</span> torch

model_id = <span class="hljs-string">&quot;meta-llama/Llama-4-Scout-17B-16E-Instruct&quot;</span>

tokenizer = AutoTokenizer.from_pretrained(model_id)

messages = [
    {<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;Who are you?&quot;</span>},
]
inputs = tokenizer.apply_chat_template(messages, add_generation_prompt=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>, return_dict=<span class="hljs-literal">True</span>)

model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16
)

outputs = model.generate(**inputs.to(model.device), max_new_tokens=<span class="hljs-number">100</span>)
outputs = tokenizer.batch_decode(outputs[:, inputs[<span class="hljs-string">&quot;input_ids&quot;</span>].shape[-<span class="hljs-number">1</span>]:])
<span class="hljs-built_in">print</span>(outputs[<span class="hljs-number">0</span>])`,wrap:!1}}),{c(){g(t.$$.fragment)},l(n){_(t.$$.fragment,n)},m(n,r){y(t,n,r),m=!0},p:L,i(n){m||(T(t.$$.fragment,n),m=!0)},o(n){b(t.$$.fragment,n),m=!1},d(n){M(t,n)}}}function qa(J){let t,m;return t=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Qcm9jZXNzb3IlMkMlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24lMEFpbXBvcnQlMjB0b3JjaCUwQSUwQW1vZGVsX2lkJTIwJTNEJTIwJTIybWV0YS1sbGFtYSUyRkxsYW1hLTQtU2NvdXQtMTdCLTE2RS1JbnN0cnVjdCUyMiUwQSUwQXByb2Nlc3NvciUyMCUzRCUyMEF1dG9Qcm9jZXNzb3IuZnJvbV9wcmV0cmFpbmVkKG1vZGVsX2lkKSUwQW1vZGVsJTIwJTNEJTIwTGxhbWE0Rm9yQ29uZGl0aW9uYWxHZW5lcmF0aW9uLmZyb21fcHJldHJhaW5lZCglMEElMjAlMjAlMjAlMjBtb2RlbF9pZCUyQyUwQSUyMCUyMCUyMCUyMGRldmljZV9tYXAlM0QlMjJhdXRvJTIyJTJDJTBBJTIwJTIwJTIwJTIwZHR5cGUlM0R0b3JjaC5iZmxvYXQxNiUyQyUwQSklMEElMEFpbWdfdXJsJTIwJTNEJTIwJTIyaHR0cHMlM0ElMkYlMkZodWdnaW5nZmFjZS5jbyUyRmRhdGFzZXRzJTJGaHVnZ2luZ2ZhY2UlMkZkb2N1bWVudGF0aW9uLWltYWdlcyUyRnJlc29sdmUlMkYwMDUyYTcwYmVlZDViZjcxYjkyNjEwYTQzYTUyZGY2ZDI4NmNkNWYzJTJGZGlmZnVzZXJzJTJGcmFiYml0LmpwZyUyMiUwQW1lc3NhZ2VzJTIwJTNEJTIwJTVCJTBBJTIwJTIwJTIwJTIwJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIycm9sZSUyMiUzQSUyMCUyMnVzZXIlMjIlMkMlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjJjb250ZW50JTIyJTNBJTIwJTVCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTdCJTIydHlwZSUyMiUzQSUyMCUyMmltYWdlJTIyJTJDJTIwJTIydXJsJTIyJTNBJTIwaW1nX3VybCU3RCUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3QiUyMnR5cGUlMjIlM0ElMjAlMjJ0ZXh0JTIyJTJDJTIwJTIydGV4dCUyMiUzQSUyMCUyMkRlc2NyaWJlJTIwdGhpcyUyMGltYWdlJTIwaW4lMjB0d28lMjBzZW50ZW5jZXMuJTIyJTdEJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTVEJTBBJTIwJTIwJTIwJTIwJTdEJTJDJTBBJTVEJTBBJTBBaW5wdXRzJTIwJTNEJTIwcHJvY2Vzc29yLmFwcGx5X2NoYXRfdGVtcGxhdGUoJTBBJTIwJTIwJTIwJTIwbWVzc2FnZXMlMkMlMEElMjAlMjAlMjAlMjBhZGRfZ2VuZXJhdGlvbl9wcm9tcHQlM0RUcnVlJTJDJTBBJTIwJTIwJTIwJTIwdG9rZW5pemUlM0RUcnVlJTJDJTBBJTIwJTIwJTIwJTIwcmV0dXJuX2RpY3QlM0RUcnVlJTJDJTBBJTIwJTIwJTIwJTIwcmV0dXJuX3RlbnNvcnMlM0QlMjJwdCUyMiUyQyUwQSkudG8obW9kZWwuZGV2aWNlKSUwQSUwQW91dHB1dHMlMjAlM0QlMjBtb2RlbC5nZW5lcmF0ZSglMEElMjAlMjAlMjAlMjAqKmlucHV0cyUyQyUwQSUyMCUyMCUyMCUyMG1heF9uZXdfdG9rZW5zJTNEMjU2JTJDJTBBKSUwQSUwQXJlc3BvbnNlJTIwJTNEJTIwcHJvY2Vzc29yLmJhdGNoX2RlY29kZShvdXRwdXRzJTVCJTNBJTJDJTIwaW5wdXRzJTVCJTIyaW5wdXRfaWRzJTIyJTVELnNoYXBlJTVCLTElNUQlM0ElNUQpJTVCMCU1RCUwQXByaW50KHJlc3BvbnNlKQ==",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoProcessor, Llama4ForConditionalGeneration
<span class="hljs-keyword">import</span> torch

model_id = <span class="hljs-string">&quot;meta-llama/Llama-4-Scout-17B-16E-Instruct&quot;</span>

processor = AutoProcessor.from_pretrained(model_id)
model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16,
)

img_url = <span class="hljs-string">&quot;https://huggingface.co/datasets/huggingface/documentation-images/resolve/0052a70beed5bf71b92610a43a52df6d286cd5f3/diffusers/rabbit.jpg&quot;</span>
messages = [
    {
        <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>,
        <span class="hljs-string">&quot;content&quot;</span>: [
            {<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;image&quot;</span>, <span class="hljs-string">&quot;url&quot;</span>: img_url},
            {<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;Describe this image in two sentences.&quot;</span>},
        ]
    },
]

inputs = processor.apply_chat_template(
    messages,
    add_generation_prompt=<span class="hljs-literal">True</span>,
    tokenize=<span class="hljs-literal">True</span>,
    return_dict=<span class="hljs-literal">True</span>,
    return_tensors=<span class="hljs-string">&quot;pt&quot;</span>,
).to(model.device)

outputs = model.generate(
    **inputs,
    max_new_tokens=<span class="hljs-number">256</span>,
)

response = processor.batch_decode(outputs[:, inputs[<span class="hljs-string">&quot;input_ids&quot;</span>].shape[-<span class="hljs-number">1</span>]:])[<span class="hljs-number">0</span>]
<span class="hljs-built_in">print</span>(response)`,wrap:!1}}),{c(){g(t.$$.fragment)},l(n){_(t.$$.fragment,n)},m(n,r){y(t,n,r),m=!0},p:L,i(n){m||(T(t.$$.fragment,n),m=!0)},o(n){b(t.$$.fragment,n),m=!1},d(n){M(t,n)}}}function Ea(J){let t,m;return t=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Qcm9jZXNzb3IlMkMlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24lMEFpbXBvcnQlMjB0b3JjaCUwQSUwQW1vZGVsX2lkJTIwJTNEJTIwJTIybWV0YS1sbGFtYSUyRkxsYW1hLTQtU2NvdXQtMTdCLTE2RS1JbnN0cnVjdCUyMiUwQSUwQXByb2Nlc3NvciUyMCUzRCUyMEF1dG9Qcm9jZXNzb3IuZnJvbV9wcmV0cmFpbmVkKG1vZGVsX2lkKSUwQW1vZGVsJTIwJTNEJTIwTGxhbWE0Rm9yQ29uZGl0aW9uYWxHZW5lcmF0aW9uLmZyb21fcHJldHJhaW5lZCglMEElMjAlMjAlMjAlMjBtb2RlbF9pZCUyQyUwQSUyMCUyMCUyMCUyMGRldmljZV9tYXAlM0QlMjJhdXRvJTIyJTJDJTBBJTIwJTIwJTIwJTIwZHR5cGUlM0R0b3JjaC5iZmxvYXQxNiUyQyUwQSklMEElMEF1cmwxJTIwJTNEJTIwJTIyaHR0cHMlM0ElMkYlMkZodWdnaW5nZmFjZS5jbyUyRmRhdGFzZXRzJTJGaHVnZ2luZ2ZhY2UlMkZkb2N1bWVudGF0aW9uLWltYWdlcyUyRnJlc29sdmUlMkYwMDUyYTcwYmVlZDViZjcxYjkyNjEwYTQzYTUyZGY2ZDI4NmNkNWYzJTJGZGlmZnVzZXJzJTJGcmFiYml0LmpwZyUyMiUwQXVybDIlMjAlM0QlMjAlMjJodHRwcyUzQSUyRiUyRmh1Z2dpbmdmYWNlLmNvJTJGZGF0YXNldHMlMkZodWdnaW5nZmFjZSUyRmRvY3VtZW50YXRpb24taW1hZ2VzJTJGcmVzb2x2ZSUyRm1haW4lMkZkYXRhc2V0cyUyRmNhdF9zdHlsZV9sYXlvdXQucG5nJTIyJTBBbWVzc2FnZXMlMjAlM0QlMjAlNUIlMEElMjAlMjAlMjAlMjAlN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjJyb2xlJTIyJTNBJTIwJTIydXNlciUyMiUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMmNvbnRlbnQlMjIlM0ElMjAlNUIlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlN0IlMjJ0eXBlJTIyJTNBJTIwJTIyaW1hZ2UlMjIlMkMlMjAlMjJ1cmwlMjIlM0ElMjB1cmwxJTdEJTJDJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTdCJTIydHlwZSUyMiUzQSUyMCUyMmltYWdlJTIyJTJDJTIwJTIydXJsJTIyJTNBJTIwdXJsMiU3RCUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3QiUyMnR5cGUlMjIlM0ElMjAlMjJ0ZXh0JTIyJTJDJTIwJTIydGV4dCUyMiUzQSUyMCUyMkNhbiUyMHlvdSUyMGRlc2NyaWJlJTIwaG93JTIwdGhlc2UlMjB0d28lMjBpbWFnZXMlMjBhcmUlMjBzaW1pbGFyJTJDJTIwYW5kJTIwaG93JTIwdGhleSUyMGRpZmZlciUzRiUyMiU3RCUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU1RCUwQSUyMCUyMCUyMCUyMCU3RCUyQyUwQSU1RCUwQSUwQWlucHV0cyUyMCUzRCUyMHByb2Nlc3Nvci5hcHBseV9jaGF0X3RlbXBsYXRlKCUwQSUyMCUyMCUyMCUyMG1lc3NhZ2VzJTJDJTBBJTIwJTIwJTIwJTIwYWRkX2dlbmVyYXRpb25fcHJvbXB0JTNEVHJ1ZSUyQyUwQSUyMCUyMCUyMCUyMHRva2VuaXplJTNEVHJ1ZSUyQyUwQSUyMCUyMCUyMCUyMHJldHVybl9kaWN0JTNEVHJ1ZSUyQyUwQSUyMCUyMCUyMCUyMHJldHVybl90ZW5zb3JzJTNEJTIycHQlMjIlMkMlMEEpLnRvKG1vZGVsLmRldmljZSklMEElMEFvdXRwdXRzJTIwJTNEJTIwbW9kZWwuZ2VuZXJhdGUoJTBBJTIwJTIwJTIwJTIwKippbnB1dHMlMkMlMEElMjAlMjAlMjAlMjBtYXhfbmV3X3Rva2VucyUzRDI1NiUyQyUwQSklMEElMEFyZXNwb25zZSUyMCUzRCUyMHByb2Nlc3Nvci5iYXRjaF9kZWNvZGUob3V0cHV0cyU1QiUzQSUyQyUyMGlucHV0cyU1QiUyMmlucHV0X2lkcyUyMiU1RC5zaGFwZSU1Qi0xJTVEJTNBJTVEKSU1QjAlNUQlMEFwcmludChyZXNwb25zZSk=",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoProcessor, Llama4ForConditionalGeneration
<span class="hljs-keyword">import</span> torch

model_id = <span class="hljs-string">&quot;meta-llama/Llama-4-Scout-17B-16E-Instruct&quot;</span>

processor = AutoProcessor.from_pretrained(model_id)
model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16,
)

url1 = <span class="hljs-string">&quot;https://huggingface.co/datasets/huggingface/documentation-images/resolve/0052a70beed5bf71b92610a43a52df6d286cd5f3/diffusers/rabbit.jpg&quot;</span>
url2 = <span class="hljs-string">&quot;https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/datasets/cat_style_layout.png&quot;</span>
messages = [
    {
        <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>,
        <span class="hljs-string">&quot;content&quot;</span>: [
            {<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;image&quot;</span>, <span class="hljs-string">&quot;url&quot;</span>: url1},
            {<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;image&quot;</span>, <span class="hljs-string">&quot;url&quot;</span>: url2},
            {<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-string">&quot;text&quot;</span>: <span class="hljs-string">&quot;Can you describe how these two images are similar, and how they differ?&quot;</span>},
        ]
    },
]

inputs = processor.apply_chat_template(
    messages,
    add_generation_prompt=<span class="hljs-literal">True</span>,
    tokenize=<span class="hljs-literal">True</span>,
    return_dict=<span class="hljs-literal">True</span>,
    return_tensors=<span class="hljs-string">&quot;pt&quot;</span>,
).to(model.device)

outputs = model.generate(
    **inputs,
    max_new_tokens=<span class="hljs-number">256</span>,
)

response = processor.batch_decode(outputs[:, inputs[<span class="hljs-string">&quot;input_ids&quot;</span>].shape[-<span class="hljs-number">1</span>]:])[<span class="hljs-number">0</span>]
<span class="hljs-built_in">print</span>(response)`,wrap:!1}}),{c(){g(t.$$.fragment)},l(n){_(t.$$.fragment,n)},m(n,r){y(t,n,r),m=!0},p:L,i(n){m||(T(t.$$.fragment,n),m=!0)},o(n){b(t.$$.fragment,n),m=!1},d(n){M(t,n)}}}function Na(J){let t,m=`Beware: the example below uses both <code>device_map=&quot;auto&quot;</code> and flex-attention.
Please use <code>torchrun</code> to run this example in tensor-parallel mode.`,n,r,c=`We will work to enable running with <code>device_map=&quot;auto&quot;</code> and flex-attention without
tensor-parallel in the future.`,o,p,v;return p=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMExsYW1hNEZvckNvbmRpdGlvbmFsR2VuZXJhdGlvbiUyQyUyMEF1dG9Ub2tlbml6ZXIlMkMlMjBpbmZlcl9kZXZpY2UlMEFpbXBvcnQlMjB0b3JjaCUwQWltcG9ydCUyMHRpbWUlMEElMEFmaWxlJTIwJTNEJTIwJTIydmVyeV9sb25nX2NvbnRleHRfcHJvbXB0LnR4dCUyMiUwQW1vZGVsX2lkJTIwJTNEJTIwJTIybWV0YS1sbGFtYSUyRkxsYW1hLTQtU2NvdXQtMTdCLTE2RS1JbnN0cnVjdCUyMiUwQSUwQXdpdGglMjBvcGVuKGZpbGUlMkMlMjAlMjJyJTIyKSUyMGFzJTIwZiUzQSUwQSUyMCUyMCUyMCUyMHZlcnlfbG9uZ190ZXh0JTIwJTNEJTIwJTIyJTVDbiUyMi5qb2luKGYucmVhZGxpbmVzKCkpJTBBJTBBdG9rZW5pemVyJTIwJTNEJTIwQXV0b1Rva2VuaXplci5mcm9tX3ByZXRyYWluZWQobW9kZWxfaWQpJTBBbW9kZWwlMjAlM0QlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24uZnJvbV9wcmV0cmFpbmVkKCUwQSUyMCUyMCUyMCUyMG1vZGVsX2lkJTJDJTBBJTIwJTIwJTIwJTIwZGV2aWNlX21hcCUzRCUyMmF1dG8lMjIlMkMlMEElMjAlMjAlMjAlMjBhdHRuX2ltcGxlbWVudGF0aW9uJTNEJTIyZmxleF9hdHRlbnRpb24lMjIlMkMlMEElMjAlMjAlMjAlMjBkdHlwZSUzRHRvcmNoLmJmbG9hdDE2JTBBKSUwQSUwQW1lc3NhZ2VzJTIwJTNEJTIwJTVCJTBBJTIwJTIwJTIwJTIwJTdCJTIycm9sZSUyMiUzQSUyMCUyMnVzZXIlMjIlMkMlMjAlMjJjb250ZW50JTIyJTNBJTIwZiUyMkxvb2slMjBhdCUyMHRoZSUyMGZvbGxvd2luZyUyMHRleHRzJTNBJTIwJTVCJTdCdmVyeV9sb25nX3RleHQlN0QlNUQlNUNuJTVDbiU1Q24lNUNuV2hhdCUyMGFyZSUyMHRoZSUyMGJvb2tzJTJDJTIwYW5kJTIwd2hvJTIwd3JvdGUlMjB0aGVtJTNGJTIwTWFrZSUyMG1lJTIwYSUyMG5pY2UlMjBsaXN0LiUyMiU3RCUyQyUwQSU1RCUwQWlucHV0X2lkcyUyMCUzRCUyMHRva2VuaXplci5hcHBseV9jaGF0X3RlbXBsYXRlKG1lc3NhZ2VzJTJDJTIwYWRkX2dlbmVyYXRpb25fcHJvbXB0JTNEVHJ1ZSUyQyUyMHJldHVybl90ZW5zb3JzJTNEJTIycHQlMjIpJTBBJTBBZGV2aWNlJTIwJTNEJTIwaW5mZXJfZGV2aWNlKCklMEF0b3JjaF9kZXZpY2VfbW9kdWxlJTIwJTNEJTIwZ2V0YXR0cih0b3JjaCUyQyUyMGRldmljZSUyQyUyMHRvcmNoLmN1ZGEpJTBBdG9yY2hfZGV2aWNlX21vZHVsZS5zeW5jaHJvbml6ZSgpJTBBc3RhcnQlMjAlM0QlMjB0aW1lLnRpbWUoKSUwQW91dCUyMCUzRCUyMG1vZGVsLmdlbmVyYXRlKCUwQSUyMCUyMCUyMCUyMGlucHV0X2lkcy50byhtb2RlbC5kZXZpY2UpJTJDJTBBJTIwJTIwJTIwJTIwcHJlZmlsbF9jaHVua19zaXplJTNEMjA0OCo4JTJDJTBBJTIwJTIwJTIwJTIwbWF4X25ld190b2tlbnMlM0QzMDAlMkMlMEElMjAlMjAlMjAlMjBjYWNoZV9pbXBsZW1lbnRhdGlvbiUzRCUyMmh5YnJpZCUyMiUyQyUwQSklMEFwcmludCh0aW1lLnRpbWUoKS1zdGFydCklMEFwcmludCh0b2tlbml6ZXIuYmF0Y2hfZGVjb2RlKG91dCU1QiUzQSUyQyUyMGlucHV0X2lkcy5zaGFwZSU1Qi0xJTVEJTNBJTVEKSklMEFwcmludChmJTIyJTdCdG9yY2hfZGV2aWNlX21vZHVsZS5tYXhfbWVtb3J5X2FsbG9jYXRlZChtb2RlbC5kZXZpY2UpJTIwJTJGJTIwMTAyNCoqMyUzQS4yZiU3RCUyMEdpQiUyMik=",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> Llama4ForConditionalGeneration, AutoTokenizer, infer_device
<span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> time

file = <span class="hljs-string">&quot;very_long_context_prompt.txt&quot;</span>
model_id = <span class="hljs-string">&quot;meta-llama/Llama-4-Scout-17B-16E-Instruct&quot;</span>

<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file, <span class="hljs-string">&quot;r&quot;</span>) <span class="hljs-keyword">as</span> f:
    very_long_text = <span class="hljs-string">&quot;\\n&quot;</span>.join(f.readlines())

tokenizer = AutoTokenizer.from_pretrained(model_id)
model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    attn_implementation=<span class="hljs-string">&quot;flex_attention&quot;</span>,
    dtype=torch.bfloat16
)

messages = [
    {<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">f&quot;Look at the following texts: [<span class="hljs-subst">{very_long_text}</span>]\\n\\n\\n\\nWhat are the books, and who wrote them? Make me a nice list.&quot;</span>},
]
input_ids = tokenizer.apply_chat_template(messages, add_generation_prompt=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>)

device = infer_device()
torch_device_module = <span class="hljs-built_in">getattr</span>(torch, device, torch.cuda)
torch_device_module.synchronize()
start = time.time()
out = model.generate(
    input_ids.to(model.device),
    prefill_chunk_size=<span class="hljs-number">2048</span>*<span class="hljs-number">8</span>,
    max_new_tokens=<span class="hljs-number">300</span>,
    cache_implementation=<span class="hljs-string">&quot;hybrid&quot;</span>,
)
<span class="hljs-built_in">print</span>(time.time()-start)
<span class="hljs-built_in">print</span>(tokenizer.batch_decode(out[:, input_ids.shape[-<span class="hljs-number">1</span>]:]))
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">{torch_device_module.max_memory_allocated(model.device) / <span class="hljs-number">1024</span>**<span class="hljs-number">3</span>:<span class="hljs-number">.2</span>f}</span> GiB&quot;</span>)`,wrap:!1}}),{c(){t=u("p"),t.innerHTML=m,n=i(),r=u("p"),r.innerHTML=c,o=i(),g(p.$$.fragment)},l($){t=h($,"P",{"data-svelte-h":!0}),w(t)!=="svelte-ay5yv2"&&(t.innerHTML=m),n=d($),r=h($,"P",{"data-svelte-h":!0}),w(r)!=="svelte-18maour"&&(r.innerHTML=c),o=d($),_(p.$$.fragment,$)},m($,k){l($,t,k),l($,n,k),l($,r,k),l($,o,k),y(p,$,k),v=!0},p:L,i($){v||(T(p.$$.fragment,$),v=!0)},o($){b(p.$$.fragment,$),v=!1},d($){$&&(a(t),a(n),a(r),a(o)),M(p,$)}}}function Xa(J){let t,m,n,r,c,o,p,v,$,k;return t=new ne({props:{id:"usage",option:"Pipeline",$$slots:{default:[Ba]},$$scope:{ctx:J}}}),n=new ne({props:{id:"usage",option:"AutoModel - Text only",$$slots:{default:[Ra]},$$scope:{ctx:J}}}),c=new ne({props:{id:"usage",option:"AutoModel - Multimodal",$$slots:{default:[qa]},$$scope:{ctx:J}}}),p=new ne({props:{id:"usage",option:"AutoModel - Multimodal with multiple images",$$slots:{default:[Ea]},$$scope:{ctx:J}}}),$=new ne({props:{id:"usage",option:"AutoModel - Long context",$$slots:{default:[Na]},$$scope:{ctx:J}}}),{c(){g(t.$$.fragment),m=i(),g(n.$$.fragment),r=i(),g(c.$$.fragment),o=i(),g(p.$$.fragment),v=i(),g($.$$.fragment)},l(U){_(t.$$.fragment,U),m=d(U),_(n.$$.fragment,U),r=d(U),_(c.$$.fragment,U),o=d(U),_(p.$$.fragment,U),v=d(U),_($.$$.fragment,U)},m(U,C){y(t,U,C),l(U,m,C),y(n,U,C),l(U,r,C),y(c,U,C),l(U,o,C),y(p,U,C),l(U,v,C),y($,U,C),k=!0},p(U,C){const O={};C&2&&(O.$$scope={dirty:C,ctx:U}),t.$set(O);const tn={};C&2&&(tn.$$scope={dirty:C,ctx:U}),n.$set(tn);const Ue={};C&2&&(Ue.$$scope={dirty:C,ctx:U}),c.$set(Ue);const K={};C&2&&(K.$$scope={dirty:C,ctx:U}),p.$set(K);const nn={};C&2&&(nn.$$scope={dirty:C,ctx:U}),$.$set(nn)},i(U){k||(T(t.$$.fragment,U),T(n.$$.fragment,U),T(c.$$.fragment,U),T(p.$$.fragment,U),T($.$$.fragment,U),k=!0)},o(U){b(t.$$.fragment,U),b(n.$$.fragment,U),b(c.$$.fragment,U),b(p.$$.fragment,U),b($.$$.fragment,U),k=!1},d(U){U&&(a(m),a(r),a(o),a(v)),M(t,U),M(n,U),M(c,U),M(p,U),M($,U)}}}function Qa(J){let t,m=`Beware: the example below uses both <code>device_map=&quot;auto&quot;</code> and flex-attention.
Please use <code>torchrun</code> to run this example in tensor-parallel mode.`,n,r,c=`We will work to enable running with <code>device_map=&quot;auto&quot;</code> and flex-attention without
tensor-parallel in the future.`;return{c(){t=u("p"),t.innerHTML=m,n=i(),r=u("p"),r.innerHTML=c},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-1jalrl2"&&(t.innerHTML=m),n=d(o),r=h(o,"P",{"data-svelte-h":!0}),w(r)!=="svelte-18maour"&&(r.innerHTML=c)},m(o,p){l(o,t,p),l(o,n,p),l(o,r,p)},p:L,d(o){o&&(a(t),a(n),a(r))}}}function Ya(J){let t,m="Setting Flex Attention ensures the best results with the very long context the model can handle.",n,r,c,o,p;return r=new en({props:{warning:!1,$$slots:{default:[Qa]},$$scope:{ctx:J}}}),o=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMExsYW1hNEZvckNvbmRpdGlvbmFsR2VuZXJhdGlvbiUwQWltcG9ydCUyMHRvcmNoJTBBJTBBbW9kZWwlMjAlM0QlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24uZnJvbV9wcmV0cmFpbmVkKCUwQSUyMCUyMCUyMCUyMG1vZGVsX2lkJTJDJTBBJTIwJTIwJTIwJTIwYXR0bl9pbXBsZW1lbnRhdGlvbiUzRCUyMmZsZXhfYXR0ZW50aW9uJTIyJTJDJTBBJTIwJTIwJTIwJTIwZGV2aWNlX21hcCUzRCUyMmF1dG8lMjIlMkMlMEElMjAlMjAlMjAlMjBkdHlwZSUzRHRvcmNoLmJmbG9hdDE2JTJDJTBBKQ==",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> Llama4ForConditionalGeneration
<span class="hljs-keyword">import</span> torch

model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    attn_implementation=<span class="hljs-string">&quot;flex_attention&quot;</span>,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16,
)`,wrap:!1}}),{c(){t=u("p"),t.textContent=m,n=i(),g(r.$$.fragment),c=i(),g(o.$$.fragment)},l(v){t=h(v,"P",{"data-svelte-h":!0}),w(t)!=="svelte-heqywl"&&(t.textContent=m),n=d(v),_(r.$$.fragment,v),c=d(v),_(o.$$.fragment,v)},m(v,$){l(v,t,$),l(v,n,$),y(r,v,$),l(v,c,$),y(o,v,$),p=!0},p(v,$){const k={};$&2&&(k.$$scope={dirty:$,ctx:v}),r.$set(k)},i(v){p||(T(r.$$.fragment,v),T(o.$$.fragment,v),p=!0)},o(v){b(r.$$.fragment,v),b(o.$$.fragment,v),p=!1},d(v){v&&(a(t),a(n),a(c)),M(r,v),M(o,v)}}}function Ha(J){let t,m="The <code>sdpa</code> attention method is generally more compute-efficient than the <code>eager</code> method.",n,r,c;return r=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMExsYW1hNEZvckNvbmRpdGlvbmFsR2VuZXJhdGlvbiUwQWltcG9ydCUyMHRvcmNoJTBBJTBBbW9kZWwlMjAlM0QlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24uZnJvbV9wcmV0cmFpbmVkKCUwQSUyMCUyMCUyMCUyMG1vZGVsX2lkJTJDJTBBJTIwJTIwJTIwJTIwYXR0bl9pbXBsZW1lbnRhdGlvbiUzRCUyMnNkcGElMjIlMkMlMEElMjAlMjAlMjAlMjBkZXZpY2VfbWFwJTNEJTIyYXV0byUyMiUyQyUwQSUyMCUyMCUyMCUyMGR0eXBlJTNEdG9yY2guYmZsb2F0MTYlMkMlMEEp",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> Llama4ForConditionalGeneration
<span class="hljs-keyword">import</span> torch

model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    attn_implementation=<span class="hljs-string">&quot;sdpa&quot;</span>,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16,
)`,wrap:!1}}),{c(){t=u("p"),t.innerHTML=m,n=i(),g(r.$$.fragment)},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-9cvt94"&&(t.innerHTML=m),n=d(o),_(r.$$.fragment,o)},m(o,p){l(o,t,p),l(o,n,p),y(r,o,p),c=!0},p:L,i(o){c||(T(r.$$.fragment,o),c=!0)},o(o){b(r.$$.fragment,o),c=!1},d(o){o&&(a(t),a(n)),M(r,o)}}}function Sa(J){let t,m="The <code>eager</code> attention method is set by default, so no need for anything different when loading the model:",n,r,c;return r=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMExsYW1hNEZvckNvbmRpdGlvbmFsR2VuZXJhdGlvbiUwQWltcG9ydCUyMHRvcmNoJTBBJTBBbW9kZWwlMjAlM0QlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24uZnJvbV9wcmV0cmFpbmVkKCUwQSUyMCUyMCUyMCUyMG1vZGVsX2lkJTJDJTBBJTIwJTIwJTIwJTIwZGV2aWNlX21hcCUzRCUyMmF1dG8lMjIlMkMlMEElMjAlMjAlMjAlMjBkdHlwZSUzRHRvcmNoLmJmbG9hdDE2JTJDJTBBKQ==",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> Llama4ForConditionalGeneration
<span class="hljs-keyword">import</span> torch

model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16,
)`,wrap:!1}}),{c(){t=u("p"),t.innerHTML=m,n=i(),g(r.$$.fragment)},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-wbfcsc"&&(t.innerHTML=m),n=d(o),_(r.$$.fragment,o)},m(o,p){l(o,t,p),l(o,n,p),y(r,o,p),c=!0},p:L,i(o){c||(T(r.$$.fragment,o),c=!0)},o(o){b(r.$$.fragment,o),c=!1},d(o){o&&(a(t),a(n)),M(r,o)}}}function Aa(J){let t,m,n,r,c,o;return t=new ne({props:{id:"Attention",option:"Flex Attention",$$slots:{default:[Ya]},$$scope:{ctx:J}}}),n=new ne({props:{id:"Attention",option:"SDPA",$$slots:{default:[Ha]},$$scope:{ctx:J}}}),c=new ne({props:{id:"Attention",option:"Eager",$$slots:{default:[Sa]},$$scope:{ctx:J}}}),{c(){g(t.$$.fragment),m=i(),g(n.$$.fragment),r=i(),g(c.$$.fragment)},l(p){_(t.$$.fragment,p),m=d(p),_(n.$$.fragment,p),r=d(p),_(c.$$.fragment,p)},m(p,v){y(t,p,v),l(p,m,v),y(n,p,v),l(p,r,v),y(c,p,v),o=!0},p(p,v){const $={};v&2&&($.$$scope={dirty:v,ctx:p}),t.$set($);const k={};v&2&&(k.$$scope={dirty:v,ctx:p}),n.$set(k);const U={};v&2&&(U.$$scope={dirty:v,ctx:p}),c.$set(U)},i(p){o||(T(t.$$.fragment,p),T(n.$$.fragment,p),T(c.$$.fragment,p),o=!0)},o(p){b(t.$$.fragment,p),b(n.$$.fragment,p),b(c.$$.fragment,p),o=!1},d(p){p&&(a(m),a(r)),M(t,p),M(n,p),M(c,p)}}}function Pa(J){let t,m;return t=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Ub2tlbml6ZXIlMkMlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24lMkMlMjBGYmdlbW1GcDhDb25maWclMEFpbXBvcnQlMjB0b3JjaCUwQSUwQW1vZGVsX2lkJTIwJTNEJTIwJTIybWV0YS1sbGFtYSUyRkxsYW1hLTQtU2NvdXQtMTdCLTE2RS1JbnN0cnVjdCUyMiUwQSUwQXRva2VuaXplciUyMCUzRCUyMEF1dG9Ub2tlbml6ZXIuZnJvbV9wcmV0cmFpbmVkKG1vZGVsX2lkKSUwQSUwQW1lc3NhZ2VzJTIwJTNEJTIwJTVCJTBBJTIwJTIwJTIwJTIwJTdCJTIycm9sZSUyMiUzQSUyMCUyMnVzZXIlMjIlMkMlMjAlMjJjb250ZW50JTIyJTNBJTIwJTIyV2hvJTIwYXJlJTIweW91JTNGJTIyJTdEJTJDJTBBJTVEJTBBaW5wdXRzJTIwJTNEJTIwdG9rZW5pemVyLmFwcGx5X2NoYXRfdGVtcGxhdGUobWVzc2FnZXMlMkMlMjBhZGRfZ2VuZXJhdGlvbl9wcm9tcHQlM0RUcnVlJTJDJTIwcmV0dXJuX3RlbnNvcnMlM0QlMjJwdCUyMiUyQyUyMHJldHVybl9kaWN0JTNEVHJ1ZSklMEElMEFtb2RlbCUyMCUzRCUyMExsYW1hNEZvckNvbmRpdGlvbmFsR2VuZXJhdGlvbi5mcm9tX3ByZXRyYWluZWQoJTBBJTIwJTIwJTIwJTIwbW9kZWxfaWQlMkMlMEElMjAlMjAlMjAlMjBkZXZpY2VfbWFwJTNEJTIyYXV0byUyMiUyQyUwQSUyMCUyMCUyMCUyMGR0eXBlJTNEdG9yY2guYmZsb2F0MTYlMkMlMEElMjAlMjAlMjAlMjBxdWFudGl6YXRpb25fY29uZmlnJTNERmJnZW1tRnA4Q29uZmlnKCklMEEpJTBBJTBBb3V0cHV0cyUyMCUzRCUyMG1vZGVsLmdlbmVyYXRlKCoqaW5wdXRzLnRvKG1vZGVsLmRldmljZSklMkMlMjBtYXhfbmV3X3Rva2VucyUzRDEwMCklMEFvdXRwdXRzJTIwJTNEJTIwdG9rZW5pemVyLmJhdGNoX2RlY29kZShvdXRwdXRzJTVCJTNBJTJDJTIwaW5wdXRzJTVCJTIyaW5wdXRfaWRzJTIyJTVELnNoYXBlJTVCLTElNUQlM0ElNUQpJTBBcHJpbnQob3V0cHV0cyU1QjAlNUQp",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer, Llama4ForConditionalGeneration, FbgemmFp8Config
<span class="hljs-keyword">import</span> torch

model_id = <span class="hljs-string">&quot;meta-llama/Llama-4-Scout-17B-16E-Instruct&quot;</span>

tokenizer = AutoTokenizer.from_pretrained(model_id)

messages = [
    {<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;Who are you?&quot;</span>},
]
inputs = tokenizer.apply_chat_template(messages, add_generation_prompt=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>, return_dict=<span class="hljs-literal">True</span>)

model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16,
    quantization_config=FbgemmFp8Config()
)

outputs = model.generate(**inputs.to(model.device), max_new_tokens=<span class="hljs-number">100</span>)
outputs = tokenizer.batch_decode(outputs[:, inputs[<span class="hljs-string">&quot;input_ids&quot;</span>].shape[-<span class="hljs-number">1</span>]:])
<span class="hljs-built_in">print</span>(outputs[<span class="hljs-number">0</span>])`,wrap:!1}}),{c(){g(t.$$.fragment)},l(n){_(t.$$.fragment,n)},m(n,r){y(t,n,r),m=!0},p:L,i(n){m||(T(t.$$.fragment,n),m=!0)},o(n){b(t.$$.fragment,n),m=!1},d(n){M(t,n)}}}function Da(J){let t,m="To use the LLM-Compressor technique, we recommend leveraging the pre-quantized FP8 checkpoint available with the release:",n,r,c;return r=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Ub2tlbml6ZXIlMkMlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24lMEFpbXBvcnQlMjB0b3JjaCUwQSUwQW1vZGVsX2lkJTIwJTNEJTIwJTIybWV0YS1sbGFtYSUyRkxsYW1hLTQtTWF2ZXJpY2stMTdCLTEyOEUtSW5zdHJ1Y3QtRlA4JTIyJTBBJTBBdG9rZW5pemVyJTIwJTNEJTIwQXV0b1Rva2VuaXplci5mcm9tX3ByZXRyYWluZWQobW9kZWxfaWQpJTBBJTBBbWVzc2FnZXMlMjAlM0QlMjAlNUIlMEElMjAlMjAlMjAlMjAlN0IlMjJyb2xlJTIyJTNBJTIwJTIydXNlciUyMiUyQyUyMCUyMmNvbnRlbnQlMjIlM0ElMjAlMjJXaG8lMjBhcmUlMjB5b3UlM0YlMjIlN0QlMkMlMEElNUQlMEFpbnB1dHMlMjAlM0QlMjB0b2tlbml6ZXIuYXBwbHlfY2hhdF90ZW1wbGF0ZShtZXNzYWdlcyUyQyUyMGFkZF9nZW5lcmF0aW9uX3Byb21wdCUzRFRydWUlMkMlMjByZXR1cm5fdGVuc29ycyUzRCUyMnB0JTIyJTJDJTIwcmV0dXJuX2RpY3QlM0RUcnVlKSUwQSUwQW1vZGVsJTIwJTNEJTIwTGxhbWE0Rm9yQ29uZGl0aW9uYWxHZW5lcmF0aW9uLmZyb21fcHJldHJhaW5lZCglMEElMjAlMjAlMjAlMjBtb2RlbF9pZCUyQyUwQSUyMCUyMCUyMCUyMHRwX3BsYW4lM0QlMjJhdXRvJTIyJTJDJTBBJTIwJTIwJTIwJTIwZHR5cGUlM0R0b3JjaC5iZmxvYXQxNiUyQyUwQSklMEElMEFvdXRwdXRzJTIwJTNEJTIwbW9kZWwuZ2VuZXJhdGUoKippbnB1dHMudG8obW9kZWwuZGV2aWNlKSUyQyUyMG1heF9uZXdfdG9rZW5zJTNEMTAwKSUwQW91dHB1dHMlMjAlM0QlMjB0b2tlbml6ZXIuYmF0Y2hfZGVjb2RlKG91dHB1dHMlNUIlM0ElMkMlMjBpbnB1dHMlNUIlMjJpbnB1dF9pZHMlMjIlNUQuc2hhcGUlNUItMSU1RCUzQSU1RCklMEFwcmludChvdXRwdXRzJTVCMCU1RCk=",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer, Llama4ForConditionalGeneration
<span class="hljs-keyword">import</span> torch

model_id = <span class="hljs-string">&quot;meta-llama/Llama-4-Maverick-17B-128E-Instruct-FP8&quot;</span>

tokenizer = AutoTokenizer.from_pretrained(model_id)

messages = [
    {<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;Who are you?&quot;</span>},
]
inputs = tokenizer.apply_chat_template(messages, add_generation_prompt=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>, return_dict=<span class="hljs-literal">True</span>)

model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    tp_plan=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16,
)

outputs = model.generate(**inputs.to(model.device), max_new_tokens=<span class="hljs-number">100</span>)
outputs = tokenizer.batch_decode(outputs[:, inputs[<span class="hljs-string">&quot;input_ids&quot;</span>].shape[-<span class="hljs-number">1</span>]:])
<span class="hljs-built_in">print</span>(outputs[<span class="hljs-number">0</span>])`,wrap:!1}}),{c(){t=u("p"),t.textContent=m,n=i(),g(r.$$.fragment)},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-46ylbh"&&(t.textContent=m),n=d(o),_(r.$$.fragment,o)},m(o,p){l(o,t,p),l(o,n,p),y(r,o,p),c=!0},p:L,i(o){c||(T(r.$$.fragment,o),c=!0)},o(o){b(r.$$.fragment,o),c=!1},d(o){o&&(a(t),a(n)),M(r,o)}}}function Oa(J){let t,m,n,r;return t=new ne({props:{id:"Quantization",option:"FBGEMM",$$slots:{default:[Pa]},$$scope:{ctx:J}}}),n=new ne({props:{id:"Quantization",option:"LLM-Compressor",$$slots:{default:[Da]},$$scope:{ctx:J}}}),{c(){g(t.$$.fragment),m=i(),g(n.$$.fragment)},l(c){_(t.$$.fragment,c),m=d(c),_(n.$$.fragment,c)},m(c,o){y(t,c,o),l(c,m,o),y(n,c,o),r=!0},p(c,o){const p={};o&2&&(p.$$scope={dirty:o,ctx:c}),t.$set(p);const v={};o&2&&(v.$$scope={dirty:o,ctx:c}),n.$set(v)},i(c){r||(T(t.$$.fragment,c),T(n.$$.fragment,c),r=!0)},o(c){b(t.$$.fragment,c),b(n.$$.fragment,c),r=!1},d(c){c&&a(m),M(t,c),M(n,c)}}}function Ka(J){let t,m;return t=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMExsYW1hNE1vZGVsJTJDJTIwTGxhbWE0Q29uZmlnJTBBJTBBJTIzJTIwSW5pdGlhbGl6aW5nJTIwYSUyMExsYW1hNCUyMDdCJTIwc3R5bGUlMjBjb25maWd1cmF0aW9uJTBBY29uZmlndXJhdGlvbiUyMCUzRCUyMExsYW1hNENvbmZpZygpJTBBJTBBJTIzJTIwSW5pdGlhbGl6aW5nJTIwYSUyMG1vZGVsJTIwZnJvbSUyMHRoZSUyMExsYW1hNCUyMDdCJTIwc3R5bGUlMjBjb25maWd1cmF0aW9uJTBBbW9kZWwlMjAlM0QlMjBMbGFtYTRNb2RlbChjb25maWd1cmF0aW9uKSUwQSUwQSUyMyUyMEFjY2Vzc2luZyUyMHRoZSUyMG1vZGVsJTIwY29uZmlndXJhdGlvbiUwQWNvbmZpZ3VyYXRpb24lMjAlM0QlMjBtb2RlbC5jb25maWc=",highlighted:`<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> Llama4Model, Llama4Config

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># Initializing a Llama4 7B style configuration</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>configuration = Llama4Config()

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># Initializing a model from the Llama4 7B style configuration</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>model = Llama4Model(configuration)

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># Accessing the model configuration</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>configuration = model.config`,wrap:!1}}),{c(){g(t.$$.fragment)},l(n){_(t.$$.fragment,n)},m(n,r){y(t,n,r),m=!0},p:L,i(n){m||(T(t.$$.fragment,n),m=!0)},o(n){b(t.$$.fragment,n),m=!1},d(n){M(t,n)}}}function es(J){let t,m=`Although the recipe for forward pass needs to be defined within this function, one should call the <code>Module</code>
instance afterwards instead of this since the former takes care of running the pre and post processing steps while
the latter silently ignores them.`;return{c(){t=u("p"),t.innerHTML=m},l(n){t=h(n,"P",{"data-svelte-h":!0}),w(t)!=="svelte-fincs2"&&(t.innerHTML=m)},m(n,r){l(n,t,r)},p:L,d(n){n&&a(t)}}}function ts(J){let t,m="Example:",n,r,c;return r=new z({props:{code:"ZnJvbSUyMFBJTCUyMGltcG9ydCUyMEltYWdlJTBBaW1wb3J0JTIwcmVxdWVzdHMlMEFmcm9tJTIwdHJhbnNmb3JtZXJzJTIwaW1wb3J0JTIwQXV0b1Byb2Nlc3NvciUyQyUyMExsYXZhRm9yQ29uZGl0aW9uYWxHZW5lcmF0aW9uJTBBJTBBbW9kZWwlMjAlM0QlMjBMbGF2YUZvckNvbmRpdGlvbmFsR2VuZXJhdGlvbi5mcm9tX3ByZXRyYWluZWQoJTIybGxhdmEtaGYlMkZsbGF2YS0xLjUtN2ItaGYlMjIpJTBBcHJvY2Vzc29yJTIwJTNEJTIwQXV0b1Byb2Nlc3Nvci5mcm9tX3ByZXRyYWluZWQoJTIybGxhdmEtaGYlMkZsbGF2YS0xLjUtN2ItaGYlMjIpJTBBJTBBcHJvbXB0JTIwJTNEJTIwJTIyVVNFUiUzQSUyMCUzQ2ltYWdlJTNFJTVDbldoYXQncyUyMHRoZSUyMGNvbnRlbnQlMjBvZiUyMHRoZSUyMGltYWdlJTNGJTIwQVNTSVNUQU5UJTNBJTIyJTBBdXJsJTIwJTNEJTIwJTIyaHR0cHMlM0ElMkYlMkZ3d3cuaWxhbmtlbG1hbi5vcmclMkZzdG9wc2lnbnMlMkZhdXN0cmFsaWEuanBnJTIyJTBBaW1hZ2UlMjAlM0QlMjBJbWFnZS5vcGVuKHJlcXVlc3RzLmdldCh1cmwlMkMlMjBzdHJlYW0lM0RUcnVlKS5yYXcpJTBBJTBBaW5wdXRzJTIwJTNEJTIwcHJvY2Vzc29yKGltYWdlcyUzRGltYWdlJTJDJTIwdGV4dCUzRHByb21wdCUyQyUyMHJldHVybl90ZW5zb3JzJTNEJTIycHQlMjIpJTBBJTBBJTIzJTIwR2VuZXJhdGUlMEFnZW5lcmF0ZV9pZHMlMjAlM0QlMjBtb2RlbC5nZW5lcmF0ZSgqKmlucHV0cyUyQyUyMG1heF9uZXdfdG9rZW5zJTNEMTUpJTBBcHJvY2Vzc29yLmJhdGNoX2RlY29kZShnZW5lcmF0ZV9pZHMlMkMlMjBza2lwX3NwZWNpYWxfdG9rZW5zJTNEVHJ1ZSUyQyUyMGNsZWFuX3VwX3Rva2VuaXphdGlvbl9zcGFjZXMlM0RGYWxzZSklNUIwJTVE",highlighted:`<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoProcessor, LlavaForConditionalGeneration

<span class="hljs-meta">&gt;&gt;&gt; </span>model = LlavaForConditionalGeneration.from_pretrained(<span class="hljs-string">&quot;llava-hf/llava-1.5-7b-hf&quot;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>processor = AutoProcessor.from_pretrained(<span class="hljs-string">&quot;llava-hf/llava-1.5-7b-hf&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span>prompt = <span class="hljs-string">&quot;USER: &lt;image&gt;\\nWhat&#x27;s the content of the image? ASSISTANT:&quot;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>url = <span class="hljs-string">&quot;https://www.ilankelman.org/stopsigns/australia.jpg&quot;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>image = Image.<span class="hljs-built_in">open</span>(requests.get(url, stream=<span class="hljs-literal">True</span>).raw)

<span class="hljs-meta">&gt;&gt;&gt; </span>inputs = processor(images=image, text=prompt, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># Generate</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>generate_ids = model.generate(**inputs, max_new_tokens=<span class="hljs-number">15</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>processor.batch_decode(generate_ids, skip_special_tokens=<span class="hljs-literal">True</span>, clean_up_tokenization_spaces=<span class="hljs-literal">False</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&quot;USER:  \\nWhat&#x27;s the content of the image? ASSISTANT: The image features a busy city street with a stop sign prominently displayed&quot;</span>`,wrap:!1}}),{c(){t=u("p"),t.textContent=m,n=i(),g(r.$$.fragment)},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-11lpom8"&&(t.textContent=m),n=d(o),_(r.$$.fragment,o)},m(o,p){l(o,t,p),l(o,n,p),y(r,o,p),c=!0},p:L,i(o){c||(T(r.$$.fragment,o),c=!0)},o(o){b(r.$$.fragment,o),c=!1},d(o){o&&(a(t),a(n)),M(r,o)}}}function ns(J){let t,m=`Although the recipe for forward pass needs to be defined within this function, one should call the <code>Module</code>
instance afterwards instead of this since the former takes care of running the pre and post processing steps while
the latter silently ignores them.`;return{c(){t=u("p"),t.innerHTML=m},l(n){t=h(n,"P",{"data-svelte-h":!0}),w(t)!=="svelte-fincs2"&&(t.innerHTML=m)},m(n,r){l(n,t,r)},p:L,d(n){n&&a(t)}}}function os(J){let t,m="Example:",n,r,c;return r=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Ub2tlbml6ZXIlMkMlMjBMbGFtYTRGb3JDYXVzYWxMTSUwQSUwQW1vZGVsJTIwJTNEJTIwTGxhbWE0Rm9yQ2F1c2FsTE0uZnJvbV9wcmV0cmFpbmVkKCUyMm1ldGEtbGxhbWE0JTJGTGxhbWE0LTItN2ItaGYlMjIpJTBBdG9rZW5pemVyJTIwJTNEJTIwQXV0b1Rva2VuaXplci5mcm9tX3ByZXRyYWluZWQoJTIybWV0YS1sbGFtYTQlMkZMbGFtYTQtMi03Yi1oZiUyMiklMEElMEFwcm9tcHQlMjAlM0QlMjAlMjJIZXklMkMlMjBhcmUlMjB5b3UlMjBjb25zY2lvdXMlM0YlMjBDYW4lMjB5b3UlMjB0YWxrJTIwdG8lMjBtZSUzRiUyMiUwQWlucHV0cyUyMCUzRCUyMHRva2VuaXplcihwcm9tcHQlMkMlMjByZXR1cm5fdGVuc29ycyUzRCUyMnB0JTIyKSUwQSUwQSUyMyUyMEdlbmVyYXRlJTBBZ2VuZXJhdGVfaWRzJTIwJTNEJTIwbW9kZWwuZ2VuZXJhdGUoaW5wdXRzLmlucHV0X2lkcyUyQyUyMG1heF9sZW5ndGglM0QzMCklMEF0b2tlbml6ZXIuYmF0Y2hfZGVjb2RlKGdlbmVyYXRlX2lkcyUyQyUyMHNraXBfc3BlY2lhbF90b2tlbnMlM0RUcnVlJTJDJTIwY2xlYW5fdXBfdG9rZW5pemF0aW9uX3NwYWNlcyUzREZhbHNlKSU1QjAlNUQ=",highlighted:`<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer, Llama4ForCausalLM

<span class="hljs-meta">&gt;&gt;&gt; </span>model = Llama4ForCausalLM.from_pretrained(<span class="hljs-string">&quot;meta-llama4/Llama4-2-7b-hf&quot;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;meta-llama4/Llama4-2-7b-hf&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span>prompt = <span class="hljs-string">&quot;Hey, are you conscious? Can you talk to me?&quot;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>inputs = tokenizer(prompt, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># Generate</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>generate_ids = model.generate(inputs.input_ids, max_length=<span class="hljs-number">30</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generate_ids, skip_special_tokens=<span class="hljs-literal">True</span>, clean_up_tokenization_spaces=<span class="hljs-literal">False</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&quot;Hey, are you conscious? Can you talk to me?\\nI&#x27;m not conscious, but I can talk to you.&quot;</span>`,wrap:!1}}),{c(){t=u("p"),t.textContent=m,n=i(),g(r.$$.fragment)},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-11lpom8"&&(t.textContent=m),n=d(o),_(r.$$.fragment,o)},m(o,p){l(o,t,p),l(o,n,p),y(r,o,p),c=!0},p:L,i(o){c||(T(r.$$.fragment,o),c=!0)},o(o){b(r.$$.fragment,o),c=!1},d(o){o&&(a(t),a(n)),M(r,o)}}}function as(J){let t,m=`Although the recipe for forward pass needs to be defined within this function, one should call the <code>Module</code>
instance afterwards instead of this since the former takes care of running the pre and post processing steps while
the latter silently ignores them.`;return{c(){t=u("p"),t.innerHTML=m},l(n){t=h(n,"P",{"data-svelte-h":!0}),w(t)!=="svelte-fincs2"&&(t.innerHTML=m)},m(n,r){l(n,t,r)},p:L,d(n){n&&a(t)}}}function ss(J){let t,m=`Although the recipe for forward pass needs to be defined within this function, one should call the <code>Module</code>
instance afterwards instead of this since the former takes care of running the pre and post processing steps while
the latter silently ignores them.`;return{c(){t=u("p"),t.innerHTML=m},l(n){t=h(n,"P",{"data-svelte-h":!0}),w(t)!=="svelte-fincs2"&&(t.innerHTML=m)},m(n,r){l(n,t,r)},p:L,d(n){n&&a(t)}}}function rs(J){let t,m="Example:",n,r,c;return r=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Ub2tlbml6ZXIlMkMlMjBMbGFtYTRGb3JDYXVzYWxMTSUwQSUwQW1vZGVsJTIwJTNEJTIwTGxhbWE0Rm9yQ2F1c2FsTE0uZnJvbV9wcmV0cmFpbmVkKCUyMm1ldGEtbGxhbWE0JTJGTGxhbWE0LTItN2ItaGYlMjIpJTBBdG9rZW5pemVyJTIwJTNEJTIwQXV0b1Rva2VuaXplci5mcm9tX3ByZXRyYWluZWQoJTIybWV0YS1sbGFtYTQlMkZMbGFtYTQtMi03Yi1oZiUyMiklMEElMEFwcm9tcHQlMjAlM0QlMjAlMjJIZXklMkMlMjBhcmUlMjB5b3UlMjBjb25zY2lvdXMlM0YlMjBDYW4lMjB5b3UlMjB0YWxrJTIwdG8lMjBtZSUzRiUyMiUwQWlucHV0cyUyMCUzRCUyMHRva2VuaXplcihwcm9tcHQlMkMlMjByZXR1cm5fdGVuc29ycyUzRCUyMnB0JTIyKSUwQSUwQSUyMyUyMEdlbmVyYXRlJTBBZ2VuZXJhdGVfaWRzJTIwJTNEJTIwbW9kZWwuZ2VuZXJhdGUoaW5wdXRzLmlucHV0X2lkcyUyQyUyMG1heF9sZW5ndGglM0QzMCklMEF0b2tlbml6ZXIuYmF0Y2hfZGVjb2RlKGdlbmVyYXRlX2lkcyUyQyUyMHNraXBfc3BlY2lhbF90b2tlbnMlM0RUcnVlJTJDJTIwY2xlYW5fdXBfdG9rZW5pemF0aW9uX3NwYWNlcyUzREZhbHNlKSU1QjAlNUQ=",highlighted:`<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer, Llama4ForCausalLM

<span class="hljs-meta">&gt;&gt;&gt; </span>model = Llama4ForCausalLM.from_pretrained(<span class="hljs-string">&quot;meta-llama4/Llama4-2-7b-hf&quot;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;meta-llama4/Llama4-2-7b-hf&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span>prompt = <span class="hljs-string">&quot;Hey, are you conscious? Can you talk to me?&quot;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>inputs = tokenizer(prompt, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># Generate</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>generate_ids = model.generate(inputs.input_ids, max_length=<span class="hljs-number">30</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generate_ids, skip_special_tokens=<span class="hljs-literal">True</span>, clean_up_tokenization_spaces=<span class="hljs-literal">False</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&quot;Hey, are you conscious? Can you talk to me?\\nI&#x27;m not conscious, but I can talk to you.&quot;</span>`,wrap:!1}}),{c(){t=u("p"),t.textContent=m,n=i(),g(r.$$.fragment)},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-11lpom8"&&(t.textContent=m),n=d(o),_(r.$$.fragment,o)},m(o,p){l(o,t,p),l(o,n,p),y(r,o,p),c=!0},p:L,i(o){c||(T(r.$$.fragment,o),c=!0)},o(o){b(r.$$.fragment,o),c=!1},d(o){o&&(a(t),a(n)),M(r,o)}}}function ls(J){let t,m="Example:",n,r,c;return r=new z({props:{code:"ZnJvbSUyMFBJTCUyMGltcG9ydCUyMEltYWdlJTBBaW1wb3J0JTIwcmVxdWVzdHMlMEFmcm9tJTIwdHJhbnNmb3JtZXJzJTIwaW1wb3J0JTIwQXV0b1Byb2Nlc3NvciUyQyUyME1sbGFtYVZpc2lvbk1vZGVsJTBBJTBBY2hlY2twb2ludCUyMCUzRCUyMCUyMm1ldGEtbGxhbWElMkZMbGFtYS0zLjItMTFCLVZpc2lvbiUyMiUwQW1vZGVsJTIwJTNEJTIwTWxsYW1hVmlzaW9uTW9kZWwuZnJvbV9wcmV0cmFpbmVkKGNoZWNrcG9pbnQpJTBBcHJvY2Vzc29yJTIwJTNEJTIwQXV0b1Byb2Nlc3Nvci5mcm9tX3ByZXRyYWluZWQoY2hlY2twb2ludCklMEElMEF1cmwlMjAlM0QlMjAlMjJodHRwcyUzQSUyRiUyRnd3dy5pbGFua2VsbWFuLm9yZyUyRnN0b3BzaWducyUyRmF1c3RyYWxpYS5qcGclMjIlMEFpbWFnZSUyMCUzRCUyMEltYWdlLm9wZW4ocmVxdWVzdHMuZ2V0KHVybCUyQyUyMHN0cmVhbSUzRFRydWUpLnJhdyklMEFpbnB1dHMlMjAlM0QlMjBwcm9jZXNzb3IoaW1hZ2VzJTNEaW1hZ2UlMkMlMjByZXR1cm5fdGVuc29ycyUzRCUyMnB0JTIyKSUwQSUwQW91dHB1dCUyMCUzRCUyMG1vZGVsKCoqaW5wdXRzKSUwQSUwQXByaW50KG91dHB1dC5sYXN0X2hpZGRlbl9zdGF0ZS5zaGFwZSk=",highlighted:`<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> requests
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoProcessor, MllamaVisionModel

<span class="hljs-meta">&gt;&gt;&gt; </span>checkpoint = <span class="hljs-string">&quot;meta-llama/Llama-3.2-11B-Vision&quot;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>model = MllamaVisionModel.from_pretrained(checkpoint)
<span class="hljs-meta">&gt;&gt;&gt; </span>processor = AutoProcessor.from_pretrained(checkpoint)

<span class="hljs-meta">&gt;&gt;&gt; </span>url = <span class="hljs-string">&quot;https://www.ilankelman.org/stopsigns/australia.jpg&quot;</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>image = Image.<span class="hljs-built_in">open</span>(requests.get(url, stream=<span class="hljs-literal">True</span>).raw)
<span class="hljs-meta">&gt;&gt;&gt; </span>inputs = processor(images=image, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span>output = model(**inputs)

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(output.last_hidden_state.shape)
torch.Size([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1025</span>, <span class="hljs-number">7680</span>])`,wrap:!1}}),{c(){t=u("p"),t.textContent=m,n=i(),g(r.$$.fragment)},l(o){t=h(o,"P",{"data-svelte-h":!0}),w(t)!=="svelte-11lpom8"&&(t.textContent=m),n=d(o),_(r.$$.fragment,o)},m(o,p){l(o,t,p),l(o,n,p),y(r,o,p),c=!0},p:L,i(o){c||(T(r.$$.fragment,o),c=!0)},o(o){b(r.$$.fragment,o),c=!1},d(o){o&&(a(t),a(n)),M(r,o)}}}function is(J){let t,m,n,r,c,o="<em>This model was released on 2025-04-05 and added to Hugging Face Transformers on 2025-04-05.</em>",p,v,$,k,U='<div class="flex flex-wrap space-x-1"><img alt="PyTorch" src="https://img.shields.io/badge/PyTorch-DE3412?style=flat&amp;logo=pytorch&amp;logoColor=white"/> <img alt="FlashAttention" src="https://img.shields.io/badge/%E2%9A%A1%EF%B8%8E%20FlashAttention-eae0c8?style=flat"/> <img alt="Tensor parallelism" src="https://img.shields.io/badge/Tensor%20parallelism-06b6d4?style=flat&amp;logoColor=white"/></div>',C,O,tn=`<a href="https://ai.meta.com/blog/llama-4-multimodal-intelligence/" rel="nofollow">Llama 4</a>, developed by Meta, introduces a new auto-regressive Mixture-of-Experts (MoE) architecture.
This generation includes two models:`,Ue,K,nn=`<li>The highly capable Llama 4 Maverick with 17B active parameters out of ~400B total, with 128 experts.</li> <li>The efficient Llama 4 Scout also  has 17B active parameters out of ~109B total, using just 16 experts.</li> <li>Both models leverage early fusion for native multimodality, enabling them to process text and image inputs.
Maverick and Scout are both trained on up to 40 trillion tokens on data encompassing 200 languages
(with specific fine-tuning support for 12 languages including Arabic, Spanish, German, and Hindi).</li>`,rn,$e,Ho=`For deployment, Llama 4 Scout is designed for accessibility, fitting on a single server-grade GPU via
on-the-fly 4-bit or 8-bitint4 quantization, while Maverick is available in BF16 and FP8 formats.
These models are released under the custom Llama 4 Community License Agreement, available on the model repositories.`,ln,ke,So='You can find all the original Llama checkpoints under the <a href="https://huggingface.co/meta-llama" rel="nofollow">meta-llama</a> organization.',dn,re,cn,Ce,Ao=`The examples below demonstrates how to generate with <a href="/docs/transformers/v4.56.2/en/main_classes/pipelines#transformers.Pipeline">Pipeline</a> or the <a href="/docs/transformers/v4.56.2/en/model_doc/auto#transformers.AutoModel">AutoModel</a>. We additionally add an example
showcasing how to toggle the right attributes to enable very long-context generations, as some flavors of Llama 4
have context lengths going up to 10 million tokens.`,mn,le,pn,xe,un,je,hn,Ie,Po='Updating the default attention function can significantly improve compute performance as well as memory usage. Refer to the <a href="../attention_interface">Attention Interface</a> overview for an in-depth explanation of our interface.',fn,Le,Do=`As of release, the Llama 4 model supports the following attention methods: <code>eager</code>, <code>flex_attention</code>, <code>sdpa</code>. We recommend using <code>flex_attention</code> for best results.
Switching attention mechanism is done at the model initialization step:`,gn,ie,_n,ze,yn,Ge,Oo=`Quantization reduces the memory burden of large models by representing the weights in a lower precision. Refer to the <a href="../quantization/overview">Quantization</a> overview for available quantization backends.
At time of release, both FBGEMM and LLM-Compressor are supported; more quantization methods will be supported in the days that follow the release.`,Tn,Ze,Ko="See below for examples using both:",bn,Ve,ea="Here is an example loading an BF16 model in FP8 using the FBGEMM approach:",Mn,de,wn,Fe,vn,We,ta=`Enabling CPU-offloading means that components of the model might be moved to CPU instead of GPU in case the GPU-memory available isnâ€™t sufficient to load the entire model.
At inference, different components will be loaded/unloaded from/to the GPU on the fly. This ensures that the model can be loaded on smaller machines as long as the CPU-memory is sufficient.
However, this also slows down inference as it adds communication overhead.`,Jn,Be,na="In order to enable CPU-offloading, you simply need to specify the <code>device_map</code> to <code>auto</code> at model load:",Un,Re,$n,qe,kn,G,Ee,oo,Ct,oa=`This is the configuration class to store the configuration of a <code>Llama4Model</code>. It is used to instantiate an
Llama4 model according to the specified arguments, defining the model architecture. Instantiating a configuration
with the defaults will yield a similar configuration to that of the Llama4 109B.`,ao,xt,aa='e.g. <a href="https://huggingface.co/meta-llama/Llama-4-Scout-17B-16E" rel="nofollow">meta-llama/Llama-4-Scout-17B-16E</a>',so,jt,sa=`Configuration objects inherit from <a href="/docs/transformers/v4.56.2/en/main_classes/configuration#transformers.PretrainedConfig">PretrainedConfig</a> and can be used to control the model outputs. Read the
documentation from <a href="/docs/transformers/v4.56.2/en/main_classes/configuration#transformers.PretrainedConfig">PretrainedConfig</a> for more information.`,ro,ce,Cn,Ne,xn,Z,Xe,lo,It,ra=`This is the configuration class to store the configuration of a <a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4TextModel">Llama4TextModel</a>. It is used to instantiate a
Llama4 text model according to the specified arguments, defining the model architecture. Instantiating a configuration
with the defaults will yield a similar configuration to that of the Llama4 109B.`,io,Lt,la='e.g. <a href="https://huggingface.co/meta-llama/Llama-4-Scout-17B-16E" rel="nofollow">meta-llama/Llama-4-Scout-17B-16E</a>',co,zt,ia=`Configuration objects inherit from <a href="/docs/transformers/v4.56.2/en/main_classes/configuration#transformers.PretrainedConfig">PretrainedConfig</a> and can be used to control the model outputs. Read the
documentation from <a href="/docs/transformers/v4.56.2/en/main_classes/configuration#transformers.PretrainedConfig">PretrainedConfig</a> for more information.`,mo,Gt,da="Example:",jn,Qe,In,W,Ye,po,Zt,ca=`This is the configuration class to store the configuration of a <a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4VisionModel">Llama4VisionModel</a>. It is used to instantiate a
Llama4 vision model according to the specified arguments, defining the model architecture. Instantiating a configuration
with the defaults will yield a similar configuration to that of the Llama4 109B.`,uo,Vt,ma='e.g. <a href="https://huggingface.co/meta-llama/Llama-4-Scout-17B-16E" rel="nofollow">meta-llama/Llama-4-Scout-17B-16E</a>',ho,Ft,pa=`Configuration objects inherit from <a href="/docs/transformers/v4.56.2/en/main_classes/configuration#transformers.PretrainedConfig">PretrainedConfig</a> and can be used to control the model outputs. Read the
documentation from <a href="/docs/transformers/v4.56.2/en/main_classes/configuration#transformers.PretrainedConfig">PretrainedConfig</a> for more information.`,Ln,He,zn,oe,Se,fo,Wt,ua=`Constructs a Llama4 processor which wraps a <a href="/docs/transformers/v4.56.2/en/model_doc/auto#transformers.AutoImageProcessor">AutoImageProcessor</a> and
<code>PretrainedTokenizerFast</code> tokenizer into a single processor that inherits both the image processor and
tokenizer functionalities. See the <code>__call__()</code> and <a href="/docs/transformers/v4.56.2/en/main_classes/processors#transformers.ProcessorMixin.decode">decode()</a> for more information.`,Gn,Ae,Zn,B,Pe,go,Bt,ha="Constructs a fast Llama4 image processor.",_o,Rt,De,yo,me,Oe,To,qt,fa=`Rescale and normalize images.
Override to rescale and normalize the images in torch.bfloat16 as in the original implementation`,Vn,Ke,Fn,R,et,bo,N,tt,Mo,Et,ga='The <a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4ForConditionalGeneration">Llama4ForConditionalGeneration</a> forward method, overrides the <code>__call__</code> special method.',wo,pe,vo,ue,Jo,he,nt,Uo,Nt,_a="Obtains image last hidden states from the vision tower and apply al projection.",$o,fe,ot,ko,Xt,ya=`Obtains multimodal placeholder mask from <code>input_ids</code> or <code>inputs_embeds</code>, and checks that the placeholder token count is
equal to the length of multimodal features. If the lengths are different, an error is raised.`,Wn,at,Ta="<li>forward</li>",Bn,st,Rn,ae,rt,Co,X,lt,xo,Qt,ba='The <a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4ForCausalLM">Llama4ForCausalLM</a> forward method, overrides the <code>__call__</code> special method.',jo,ge,Io,_e,qn,it,Ma="<li>forward</li>",En,dt,Nn,V,ct,Lo,Yt,wa="The bare Llama4 Text Model outputting raw hidden-states without any specific head on to.",zo,Ht,va=`This model inherits from <a href="/docs/transformers/v4.56.2/en/main_classes/model#transformers.PreTrainedModel">PreTrainedModel</a>. Check the superclass documentation for the generic methods the
library implements for all its model (such as downloading or saving, resizing the input embeddings, pruning heads
etc.)`,Go,St,Ja=`This model is also a PyTorch <a href="https://pytorch.org/docs/stable/nn.html#torch.nn.Module" rel="nofollow">torch.nn.Module</a> subclass.
Use it as a regular PyTorch Module and refer to the PyTorch documentation for all matter related to general usage
and behavior.`,Zo,ee,mt,Vo,At,Ua='The <a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4TextModel">Llama4TextModel</a> forward method, overrides the <code>__call__</code> special method.',Fo,ye,Xn,pt,$a="<li>forward</li>",Qn,ut,Yn,se,ht,Wo,Q,ft,Bo,Pt,ka='The <a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4ForCausalLM">Llama4ForCausalLM</a> forward method, overrides the <code>__call__</code> special method.',Ro,Te,qo,be,Hn,gt,Ca="<li>forward</li>",Sn,_t,An,Y,yt,Eo,Me,Tt,No,we,Xo,ve,bt,Qo,Dt,xa="This function is used to fetch the first embedding layer to activate grads on inputs.",Pn,Mt,ja="<li>forward</li>",Dn,wt,On,on,Kn;return v=new F({props:{title:"Llama4",local:"llama4",headingTag:"h1"}}),re=new en({props:{warning:!1,$$slots:{default:[Wa]},$$scope:{ctx:J}}}),le=new Yo({props:{id:"usage",options:["Pipeline","AutoModel - Text only","AutoModel - Multimodal","AutoModel - Multimodal with multiple images","AutoModel - Long context"],$$slots:{default:[Xa]},$$scope:{ctx:J}}}),xe=new F({props:{title:"Efficiency; how to get the best out of llama 4",local:"efficiency-how-to-get-the-best-out-of-llama-4",headingTag:"h2"}}),je=new F({props:{title:"The Attention methods",local:"the-attention-methods",headingTag:"h3"}}),ie=new Yo({props:{id:"Attention",options:["Flex Attention","SDPA","Eager"],$$slots:{default:[Aa]},$$scope:{ctx:J}}}),ze=new F({props:{title:"Quantization",local:"quantization",headingTag:"h3"}}),de=new Yo({props:{id:"Quantization",options:["FBGEMM","LLM-Compressor"],$$slots:{default:[Oa]},$$scope:{ctx:J}}}),Fe=new F({props:{title:"Offloading",local:"offloading",headingTag:"h3"}}),Re=new z({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMExsYW1hNEZvckNvbmRpdGlvbmFsR2VuZXJhdGlvbiUwQWltcG9ydCUyMHRvcmNoJTBBJTBBbW9kZWwlMjAlM0QlMjBMbGFtYTRGb3JDb25kaXRpb25hbEdlbmVyYXRpb24uZnJvbV9wcmV0cmFpbmVkKCUwQSUyMCUyMCUyMCUyMG1vZGVsX2lkJTJDJTBBJTIwJTIwJTIwJTIwZGV2aWNlX21hcCUzRCUyMmF1dG8lMjIlMkMlMEElMjAlMjAlMjAlMjBkdHlwZSUzRHRvcmNoLmJmbG9hdDE2JTJDJTBBKQ==",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> Llama4ForConditionalGeneration
<span class="hljs-keyword">import</span> torch

model = Llama4ForConditionalGeneration.from_pretrained(
    model_id,
    device_map=<span class="hljs-string">&quot;auto&quot;</span>,
    dtype=torch.bfloat16,
)`,wrap:!1}}),qe=new F({props:{title:"Llama4Config",local:"transformers.Llama4Config",headingTag:"h2"}}),Ee=new I({props:{name:"class transformers.Llama4Config",anchor:"transformers.Llama4Config",parameters:[{name:"vision_config",val:" = None"},{name:"text_config",val:" = None"},{name:"boi_token_index",val:" = 200080"},{name:"eoi_token_index",val:" = 200081"},{name:"image_token_index",val:" = 200092"},{name:"tie_word_embeddings",val:" = False"},{name:"**kwargs",val:""}],parametersDescription:[{anchor:"transformers.Llama4Config.vision_config",description:`<strong>vision_config</strong> (<code>Llama4VisionConfig</code>, <em>optional</em>) &#x2014;
The Llama4 Vision config.`,name:"vision_config"},{anchor:"transformers.Llama4Config.text_config",description:`<strong>text_config</strong> (<code>Llama4TextConfig</code>, <em>optional</em>) &#x2014;
The Llama4 Text config.`,name:"text_config"},{anchor:"transformers.Llama4Config.boi_token_index",description:`<strong>boi_token_index</strong> (<code>int</code>, <em>optional</em>, defaults to 200080) &#x2014;
The begin-of-image token index to wrap the image prompt.`,name:"boi_token_index"},{anchor:"transformers.Llama4Config.eoi_token_index",description:`<strong>eoi_token_index</strong> (<code>int</code>, <em>optional</em>, defaults to 200081) &#x2014;
The end-of-image token index to wrap the image prompt.`,name:"eoi_token_index"},{anchor:"transformers.Llama4Config.image_token_index",description:`<strong>image_token_index</strong> (<code>int</code>, <em>optional</em>, defaults to 200092) &#x2014;
The image token index to encode the image prompt.`,name:"image_token_index"},{anchor:"transformers.Llama4Config.tie_word_embeddings",description:`<strong>tie_word_embeddings</strong> (<code>bool</code>, <em>optional</em>, defaults to <code>False</code>) &#x2014;
Whether the model&#x2019;s input and output word embeddings should be tied.`,name:"tie_word_embeddings"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/configuration_llama4.py#L384"}}),ce=new sn({props:{anchor:"transformers.Llama4Config.example",$$slots:{default:[Ka]},$$scope:{ctx:J}}}),Ne=new F({props:{title:"Llama4TextConfig",local:"transformers.Llama4TextConfig",headingTag:"h2"}}),Xe=new I({props:{name:"class transformers.Llama4TextConfig",anchor:"transformers.Llama4TextConfig",parameters:[{name:"vocab_size",val:" = 202048"},{name:"hidden_size",val:" = 5120"},{name:"intermediate_size",val:" = 8192"},{name:"intermediate_size_mlp",val:" = 16384"},{name:"num_hidden_layers",val:" = 48"},{name:"num_attention_heads",val:" = 40"},{name:"num_key_value_heads",val:" = 8"},{name:"head_dim",val:" = 128"},{name:"hidden_act",val:" = 'silu'"},{name:"max_position_embeddings",val:" = 131072"},{name:"initializer_range",val:" = 0.02"},{name:"rms_norm_eps",val:" = 1e-05"},{name:"use_cache",val:" = True"},{name:"pad_token_id",val:" = None"},{name:"bos_token_id",val:" = 1"},{name:"eos_token_id",val:" = 2"},{name:"tie_word_embeddings",val:" = False"},{name:"rope_theta",val:" = 500000"},{name:"attention_dropout",val:" = 0.0"},{name:"num_experts_per_tok",val:" = 1"},{name:"num_local_experts",val:" = 16"},{name:"moe_layers",val:" = None"},{name:"interleave_moe_layer_step",val:" = 1"},{name:"use_qk_norm",val:" = True"},{name:"output_router_logits",val:" = False"},{name:"router_aux_loss_coef",val:" = 0.001"},{name:"router_jitter_noise",val:" = 0.0"},{name:"rope_scaling",val:" = None"},{name:"no_rope_layers",val:" = None"},{name:"no_rope_layer_interval",val:" = 4"},{name:"attention_chunk_size",val:" = 8192"},{name:"layer_types",val:" = None"},{name:"attn_temperature_tuning",val:" = True"},{name:"floor_scale",val:" = 8192"},{name:"attn_scale",val:" = 0.1"},{name:"**kwargs",val:""}],parametersDescription:[{anchor:"transformers.Llama4TextConfig.vocab_size",description:`<strong>vocab_size</strong> (<code>int</code>, <em>optional</em>, defaults to 202048) &#x2014;
Vocabulary size of the Llama4 text model. Defines the maximum number of different tokens that can be represented
by the <code>inputs_ids</code> passed when calling <a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4TextModel">Llama4TextModel</a>.`,name:"vocab_size"},{anchor:"transformers.Llama4TextConfig.hidden_size",description:`<strong>hidden_size</strong> (<code>int</code>, <em>optional</em>, defaults to 5120) &#x2014;
Dimensionality of the embeddings and hidden states.`,name:"hidden_size"},{anchor:"transformers.Llama4TextConfig.intermediate_size",description:`<strong>intermediate_size</strong> (<code>int</code>, <em>optional</em>, defaults to 8192) &#x2014;
Dimensionality of the &#x201C;intermediate&#x201D; (often named feed-forward) layer in the Transformer encoder.`,name:"intermediate_size"},{anchor:"transformers.Llama4TextConfig.intermediate_size_mlp",description:"<strong>intermediate_size_mlp</strong> (<code>int</code>, <em>optional</em>, defaults to 16384) &#x2014; TODO",name:"intermediate_size_mlp"},{anchor:"transformers.Llama4TextConfig.num_hidden_layers",description:`<strong>num_hidden_layers</strong> (<code>int</code>, <em>optional</em>, defaults to 48) &#x2014;
Number of hidden layers in the Transformer encoder.`,name:"num_hidden_layers"},{anchor:"transformers.Llama4TextConfig.num_attention_heads",description:`<strong>num_attention_heads</strong> (<code>int</code>, <em>optional</em>, defaults to 40) &#x2014;
Number of attention heads for each attention layer in the Transformer encoder.`,name:"num_attention_heads"},{anchor:"transformers.Llama4TextConfig.num_key_value_heads",description:`<strong>num_key_value_heads</strong> (<code>int</code>, <em>optional</em>, defaults to 8) &#x2014;
This is the number of key_value heads that should be used to implement Grouped Query Attention. If not
specified, will default to <code>num_attention_heads</code>.`,name:"num_key_value_heads"},{anchor:"transformers.Llama4TextConfig.head_dim",description:"<strong>head_dim</strong> (<code>int</code>, <em>optional</em>, defaults to 128) &#x2014; TODO",name:"head_dim"},{anchor:"transformers.Llama4TextConfig.hidden_act",description:`<strong>hidden_act</strong> (<code>str</code> or <code>Callable</code>, <em>optional</em>, defaults to <code>&quot;silu&quot;</code>) &#x2014;
The non-linear activation function (function or string) in the encoder and pooler.`,name:"hidden_act"},{anchor:"transformers.Llama4TextConfig.max_position_embeddings",description:`<strong>max_position_embeddings</strong> (<code>int</code>, <em>optional</em>, defaults to 131072) &#x2014;
The maximum sequence length that this model might ever be used with.`,name:"max_position_embeddings"},{anchor:"transformers.Llama4TextConfig.initializer_range",description:`<strong>initializer_range</strong> (<code>float</code>, <em>optional</em>, defaults to 0.02) &#x2014;
The standard deviation of the truncated_normal_initializer for initializing all weight matrices.`,name:"initializer_range"},{anchor:"transformers.Llama4TextConfig.rms_norm_eps",description:`<strong>rms_norm_eps</strong> (<code>float</code>, <em>optional</em>, defaults to 1e-05) &#x2014;
The epsilon used by the rms normalization layers.`,name:"rms_norm_eps"},{anchor:"transformers.Llama4TextConfig.use_cache",description:`<strong>use_cache</strong> (<code>bool</code>, <em>optional</em>, defaults to <code>True</code>) &#x2014;
Whether or not the model should return the last key/values attentions.`,name:"use_cache"},{anchor:"transformers.Llama4TextConfig.pad_token_id",description:`<strong>pad_token_id</strong> (<code>int</code>, <em>optional</em>, defaults to 128004) &#x2014;
The id of the padding token.`,name:"pad_token_id"},{anchor:"transformers.Llama4TextConfig.bos_token_id",description:`<strong>bos_token_id</strong> (<code>int</code>, <em>optional</em>, defaults to 1) &#x2014;
The id of the beginning of sentence token.`,name:"bos_token_id"},{anchor:"transformers.Llama4TextConfig.eos_token_id",description:`<strong>eos_token_id</strong> (<code>int</code>, <em>optional</em>, defaults to 2) &#x2014;
The id of the end of sentence token.`,name:"eos_token_id"},{anchor:"transformers.Llama4TextConfig.tie_word_embeddings",description:`<strong>tie_word_embeddings</strong> (<code>bool</code>, <em>optional</em>, defaults to <code>False</code>) &#x2014;
Whether to tie weight embeddings`,name:"tie_word_embeddings"},{anchor:"transformers.Llama4TextConfig.rope_theta",description:`<strong>rope_theta</strong> (<code>float</code>, <em>optional</em>, defaults to <code>500000.0</code>) &#x2014;
The base period of the RoPE embeddings.`,name:"rope_theta"},{anchor:"transformers.Llama4TextConfig.attention_dropout",description:"<strong>attention_dropout</strong> (<code>int</code>, <em>optional</em>, defaults to 0.0) &#x2014; TODO",name:"attention_dropout"},{anchor:"transformers.Llama4TextConfig.num_experts_per_tok",description:"<strong>num_experts_per_tok</strong> (<code>int</code>, <em>optional</em>, defaults to 1) &#x2014; TODO",name:"num_experts_per_tok"},{anchor:"transformers.Llama4TextConfig.num_local_experts",description:"<strong>num_local_experts</strong> (<code>int</code>, <em>optional</em>, defaults to 16) &#x2014; TODO",name:"num_local_experts"},{anchor:"transformers.Llama4TextConfig.moe_layers",description:"<strong>moe_layers</strong> (<code>int</code>, <em>optional</em>) &#x2014; TODO",name:"moe_layers"},{anchor:"transformers.Llama4TextConfig.interleave_moe_layer_step",description:"<strong>interleave_moe_layer_step</strong> (<code>int</code>, <em>optional</em>, defaults to 1) &#x2014; TODO",name:"interleave_moe_layer_step"},{anchor:"transformers.Llama4TextConfig.use_qk_norm",description:"<strong>use_qk_norm</strong> (<code>int</code>, <em>optional</em>, defaults to <code>True</code>) &#x2014; TODO",name:"use_qk_norm"},{anchor:"transformers.Llama4TextConfig.output_router_logits",description:"<strong>output_router_logits</strong> (<code>int</code>, <em>optional</em>, defaults to <code>False</code>) &#x2014; TODO",name:"output_router_logits"},{anchor:"transformers.Llama4TextConfig.router_aux_loss_coef",description:"<strong>router_aux_loss_coef</strong> (<code>int</code>, <em>optional</em>, defaults to 0.001) &#x2014; TODO",name:"router_aux_loss_coef"},{anchor:"transformers.Llama4TextConfig.router_jitter_noise",description:"<strong>router_jitter_noise</strong> (<code>int</code>, <em>optional</em>, defaults to 0.0) &#x2014; TODO",name:"router_jitter_noise"},{anchor:"transformers.Llama4TextConfig.rope_scaling",description:`<strong>rope_scaling</strong> (<code>Dict</code>, <em>optional</em>) &#x2014;
Dictionary containing the scaling configuration for the RoPE embeddings. NOTE: if you apply new rope type
and you expect the model to work on longer <code>max_position_embeddings</code>, we recommend you to update this value
accordingly.
Expected contents:
<code>rope_type</code> (<code>str</code>):
The sub-variant of RoPE to use. Can be one of [&#x2018;default&#x2019;, &#x2018;linear&#x2019;, &#x2018;dynamic&#x2019;, &#x2018;yarn&#x2019;, &#x2018;longrope&#x2019;,
&#x2018;llama3&#x2019;], with &#x2018;default&#x2019; being the original RoPE implementation.
<code>factor</code> (<code>float</code>, <em>optional</em>):
Used with all rope types except &#x2018;default&#x2019;. The scaling factor to apply to the RoPE embeddings. In
most scaling types, a <code>factor</code> of x will enable the model to handle sequences of length x <em>
original maximum pre-trained length.
<code>original_max_position_embeddings</code> (<code>int</code>, </em>optional<em>):
Used with &#x2018;dynamic&#x2019;, &#x2018;longrope&#x2019; and &#x2018;llama3&#x2019;. The original max position embeddings used during
pretraining.
<code>attention_factor</code> (<code>float</code>, </em>optional<em>):
Used with &#x2018;yarn&#x2019; and &#x2018;longrope&#x2019;. The scaling factor to be applied on the attention
computation. If unspecified, it defaults to value recommended by the implementation, using the
<code>factor</code> field to infer the suggested value.
<code>beta_fast</code> (<code>float</code>, </em>optional<em>):
Only used with &#x2018;yarn&#x2019;. Parameter to set the boundary for extrapolation (only) in the linear
ramp function. If unspecified, it defaults to 32.
<code>beta_slow</code> (<code>float</code>, </em>optional<em>):
Only used with &#x2018;yarn&#x2019;. Parameter to set the boundary for interpolation (only) in the linear
ramp function. If unspecified, it defaults to 1.
<code>short_factor</code> (<code>list[float]</code>, </em>optional<em>):
Only used with &#x2018;longrope&#x2019;. The scaling factor to be applied to short contexts (&lt;
<code>original_max_position_embeddings</code>). Must be a list of numbers with the same length as the hidden
size divided by the number of attention heads divided by 2
<code>long_factor</code> (<code>list[float]</code>, </em>optional<em>):
Only used with &#x2018;longrope&#x2019;. The scaling factor to be applied to long contexts (&lt;
<code>original_max_position_embeddings</code>). Must be a list of numbers with the same length as the hidden
size divided by the number of attention heads divided by 2
<code>low_freq_factor</code> (<code>float</code>, </em>optional<em>):
Only used with &#x2018;llama3&#x2019;. Scaling factor applied to low frequency components of the RoPE
<code>high_freq_factor</code> (<code>float</code>, </em>optional*):
Only used with &#x2018;llama3&#x2019;. Scaling factor applied to high frequency components of the RoPE<todo>
<todo></todo></todo>`,name:"rope_scaling"},{anchor:"transformers.Llama4TextConfig.no_rope_layers",description:`<strong>no_rope_layers</strong> (<code>list[int]</code>, <em>optional</em>) &#x2014;
List with at least the same length as the number of layers in the model.
A <code>1</code> at an index position indicates that the corresponding layer will use RoPE,
while a <code>0</code> indicates that it&#x2019;s a NoPE layer.`,name:"no_rope_layers"},{anchor:"transformers.Llama4TextConfig.no_rope_layer_interval",description:`<strong>no_rope_layer_interval</strong> (<code>int</code>, <em>optional</em>, defaults to 4) &#x2014;
If <code>no_rope_layers</code> is <code>None</code>, it will be created using a NoPE layer every
<code>no_rope_layer_interval</code> layers.`,name:"no_rope_layer_interval"},{anchor:"transformers.Llama4TextConfig.attention_chunk_size",description:"<strong>attention_chunk_size</strong> (<code>int</code>, <em>optional</em>, defaults to 8192) &#x2014;<todo></todo>",name:"attention_chunk_size"},{anchor:"transformers.Llama4TextConfig.layer_types",description:`<strong>layer_types</strong> (<code>list</code>, <em>optional</em>) &#x2014;
Attention pattern for each layer.`,name:"layer_types"},{anchor:"transformers.Llama4TextConfig.attn_temperature_tuning",description:`<strong>attn_temperature_tuning</strong> (<code>bool</code>, <em>optional</em>, defaults to <code>True</code>) &#x2014;
Whether to dynamically scale the attention temperature for each query token based on sequence length.
Recommended for long sequences (e.g., &gt;32k tokens) to maintain stable output results.`,name:"attn_temperature_tuning"},{anchor:"transformers.Llama4TextConfig.floor_scale",description:"<strong>floor_scale</strong> (<code>int</code>, <em>optional</em>, defaults to 8192) &#x2014; TODO",name:"floor_scale"},{anchor:"transformers.Llama4TextConfig.attn_scale",description:"<strong>attn_scale</strong> (<code>int</code>, <em>optional</em>, defaults to 0.1) &#x2014; TODO",name:"attn_scale"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/configuration_llama4.py#L131"}}),Qe=new F({props:{title:"Llama4VisionConfig",local:"transformers.Llama4VisionConfig",headingTag:"h2"}}),Ye=new I({props:{name:"class transformers.Llama4VisionConfig",anchor:"transformers.Llama4VisionConfig",parameters:[{name:"hidden_size",val:": int = 768"},{name:"hidden_act",val:": str = 'gelu'"},{name:"num_hidden_layers",val:": int = 34"},{name:"num_attention_heads",val:": int = 16"},{name:"num_channels",val:": int = 3"},{name:"intermediate_size",val:": int = 5632"},{name:"vision_output_dim",val:": int = 7680"},{name:"image_size",val:": int = 448"},{name:"patch_size",val:": int = 14"},{name:"norm_eps",val:": float = 1e-05"},{name:"vision_feature_layer",val:" = -1"},{name:"vision_feature_select_strategy",val:" = 'default'"},{name:"initializer_range",val:": float = 0.02"},{name:"pixel_shuffle_ratio",val:" = 0.5"},{name:"projector_input_dim",val:" = 4096"},{name:"projector_output_dim",val:" = 4096"},{name:"multi_modal_projector_bias",val:" = False"},{name:"projector_dropout",val:" = 0.0"},{name:"attention_dropout",val:" = 0.0"},{name:"rope_theta",val:" = 10000"},{name:"**kwargs",val:""}],parametersDescription:[{anchor:"transformers.Llama4VisionConfig.hidden_size",description:`<strong>hidden_size</strong> (<code>int</code>, <em>optional</em>, defaults to 768) &#x2014;
Dimensionality of the encoder layers and the pooler layer.`,name:"hidden_size"},{anchor:"transformers.Llama4VisionConfig.hidden_act",description:`<strong>hidden_act</strong> (<code>str</code> or <code>function</code>, <em>optional</em>, defaults to <code>&quot;gelu&quot;</code>) &#x2014;
The non-linear activation function (function or string) in the encoder and pooler. If string, <code>&quot;gelu&quot;</code>,
<code>&quot;relu&quot;</code>, <code>&quot;selu&quot;</code> and <code>&quot;gelu_new&quot;</code> <code>&quot;quick_gelu&quot;</code> are supported.`,name:"hidden_act"},{anchor:"transformers.Llama4VisionConfig.num_hidden_layers",description:`<strong>num_hidden_layers</strong> (<code>int</code>, <em>optional</em>, defaults to 34) &#x2014;
Number of hidden layers in the Transformer encoder.`,name:"num_hidden_layers"},{anchor:"transformers.Llama4VisionConfig.num_attention_heads",description:`<strong>num_attention_heads</strong> (<code>int</code>, <em>optional</em>, defaults to 16) &#x2014;
Number of attention heads for each attention layer in the Transformer encoder.`,name:"num_attention_heads"},{anchor:"transformers.Llama4VisionConfig.num_channels",description:`<strong>num_channels</strong> (<code>int</code>, <em>optional</em>, defaults to 3) &#x2014;
Number of channels in the input image.`,name:"num_channels"},{anchor:"transformers.Llama4VisionConfig.intermediate_size",description:`<strong>intermediate_size</strong> (<code>int</code>, <em>optional</em>, defaults to 5632) &#x2014;
Dimensionality of the &#x201C;intermediate&#x201D; (often named feed-forward) layer in the Transformer encoder.`,name:"intermediate_size"},{anchor:"transformers.Llama4VisionConfig.vision_output_dim",description:`<strong>vision_output_dim</strong> (<code>int</code>, <em>optional</em>, defaults to 7680) &#x2014;
Dimensionality of the vision model output. Includes output of transformer
encoder with intermediate layers and global transformer encoder.`,name:"vision_output_dim"},{anchor:"transformers.Llama4VisionConfig.image_size",description:`<strong>image_size</strong> (<code>int</code>, <em>optional</em>, defaults to 448) &#x2014;
The size (resolution) of each image <em>tile</em>.`,name:"image_size"},{anchor:"transformers.Llama4VisionConfig.patch_size",description:`<strong>patch_size</strong> (<code>int</code>, <em>optional</em>, defaults to 14) &#x2014;
The size (resolution) of each patch.`,name:"patch_size"},{anchor:"transformers.Llama4VisionConfig.norm_eps",description:`<strong>norm_eps</strong> (<code>float</code>, <em>optional</em>, defaults to 1e-05) &#x2014;
The epsilon used by the layer normalization layers.`,name:"norm_eps"},{anchor:"transformers.Llama4VisionConfig.vision_feature_layer",description:"<strong>vision_feature_layer</strong> (&#x201C;, <em>optional</em>, defaults to -1) &#x2014; TODO",name:"vision_feature_layer"},{anchor:"transformers.Llama4VisionConfig.vision_feature_select_strategy",description:"<strong>vision_feature_select_strategy</strong> (<code>int</code>, <em>optional</em>, defaults to <code>&quot;default&quot;</code>) &#x2014; TODO",name:"vision_feature_select_strategy"},{anchor:"transformers.Llama4VisionConfig.initializer_range",description:`<strong>initializer_range</strong> (<code>float</code>, <em>optional</em>, defaults to 0.02) &#x2014;
The standard deviation of the truncated_normal_initializer for initializing all weight matrices.`,name:"initializer_range"},{anchor:"transformers.Llama4VisionConfig.pixel_shuffle_ratio",description:"<strong>pixel_shuffle_ratio</strong> (<code>int</code>, <em>optional</em>, defaults to 0.5) &#x2014; TODO",name:"pixel_shuffle_ratio"},{anchor:"transformers.Llama4VisionConfig.projector_input_dim",description:"<strong>projector_input_dim</strong> (<code>int</code>, <em>optional</em>, defaults to 4096) &#x2014; TODO",name:"projector_input_dim"},{anchor:"transformers.Llama4VisionConfig.projector_output_dim",description:"<strong>projector_output_dim</strong> (<code>int</code>, <em>optional</em>, defaults to 4096) &#x2014; TODO",name:"projector_output_dim"},{anchor:"transformers.Llama4VisionConfig.multi_modal_projector_bias",description:"<strong>multi_modal_projector_bias</strong> (<code>int</code>, <em>optional</em>, defaults to <code>False</code>) &#x2014; TODO",name:"multi_modal_projector_bias"},{anchor:"transformers.Llama4VisionConfig.projector_dropout",description:"<strong>projector_dropout</strong> (<code>int</code>, <em>optional</em>, defaults to 0.0) &#x2014; TODO",name:"projector_dropout"},{anchor:"transformers.Llama4VisionConfig.attention_dropout",description:"<strong>attention_dropout</strong> (<code>int</code>, <em>optional</em>, defaults to 0.0) &#x2014; TODO",name:"attention_dropout"},{anchor:"transformers.Llama4VisionConfig.rope_theta",description:"<strong>rope_theta</strong> (<code>int</code>, <em>optional</em>, defaults to 10000) &#x2014; TODO",name:"rope_theta"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/configuration_llama4.py#L25"}}),He=new F({props:{title:"Llama4Processor",local:"transformers.Llama4Processor",headingTag:"h2"}}),Se=new I({props:{name:"class transformers.Llama4Processor",anchor:"transformers.Llama4Processor",parameters:[{name:"image_processor",val:" = None"},{name:"tokenizer",val:" = None"},{name:"patch_size",val:": int = 14"},{name:"pixel_shuffle_ratio",val:": float = 0.5"},{name:"fake_image_token",val:" = '<|image|>'"},{name:"image_token",val:" = '<|image|>'"},{name:"start_of_image_token",val:" = '<|image_start|>'"},{name:"end_of_image_token",val:" = '<|image_end|>'"},{name:"patch_token",val:" = '<|patch|>'"},{name:"tile_x_separator_token",val:" = '<|tile_x_separator|>'"},{name:"tile_y_separator_token",val:" = '<|tile_y_separator|>'"},{name:"chat_template",val:` = '{{- bos_token }}\\n{%- if custom_tools is defined %}\\n    {%- set tools = custom_tools %}\\n{%- endif %}\\n{%- if not tools_in_user_message is defined %}\\n    {%- set tools_in_user_message = true %}\\n{%- endif %}\\n{%- if not date_string is defined %}\\n    {%- if strftime_now is defined %}\\n        {%- set date_string = strftime_now("%d %b %Y") %}\\n    {%- else %}\\n        {%- set date_string = "26 Jul 2024" %}\\n    {%- endif %}\\n{%- endif %}\\n{%- if not tools is defined %}\\n    {%- set tools = none %}\\n{%- endif %}\\n\\n{#- This block extracts the system message, so we can slot it into the right place. #}\\n{%- if messages[0][\\'role\\'] == \\'system\\' %}    \\n    {%- if messages[0][\\'content\\'] is string %}\\n        {%- set system_message = messages[0][\\'content\\']|trim %}\\n    {%- else %}\\n        {#- FIXME: The processor requires an array, always. #}\\n        {%- set system_message = messages[0][\\'content\\'][0][\\'text\\']|trim %}\\n    {%- endif %}\\n    {%- set messages = messages[1:] %}\\n    {%- set user_supplied_system_message = true %}\\n{%- else %}\\n    {%- set system_message = "" %}\\n    {%- set user_supplied_system_message = false %}\\n{%- endif %}\\n\\n{#- System message if the user supplied one #}\\n{%- if user_supplied_system_message %}\\n    {{- "<|header_start|>system<|header_end|>\\n\\n" }}\\n    {%- if tools is not none %}\\n        {{- "Environment: ipython\\n" }}\\n    {%- endif %}\\n    {%- if tools is not none and not tools_in_user_message %}\\n        {{- "You have access to the following functions. To call a function, please respond with JSON for a function call." }}\\n        {{- \\'Respond in the format {"name": function name, "parameters": dictionary of argument name and its value}.\\' }}\\n        {{- "Do not use variables.\\n\\n" }}\\n        {%- for t in tools %}\\n            {{- t | tojson(indent=4) }}\\n            {{- "\\n\\n" }}\\n        {%- endfor %}\\n    {%- endif %}\\n    {{- system_message }}\\n    {{- "<|eot|>" }}\\n{%- endif %}\\n\\n{#- Custom tools are passed in a user message with some extra guidance #}\\n{%- if tools_in_user_message and not tools is none %}\\n    {#- Extract the first user message so we can plug it in here #}\\n    {%- if messages | length != 0 %}\\n        {%- set first_user_message = messages[0][\\'content\\']|trim %}\\n        {%- set messages = messages[1:] %}\\n    {%- else %}\\n        {{- raise_exception("Cannot put tools in the first user message when there\\'s no first user message!") }}\\n{%- endif %}\\n    {{- \\'<|header_start|>user<|header_end|>\\n\\n\\' -}}\\n    {{- "Given the following functions, please respond with a JSON for a function call " }}\\n    {{- "with its proper arguments that best answers the given prompt.\\n\\n" }}\\n    {{- \\'Respond in the format {"name": function name, "parameters": dictionary of argument name and its value}.\\' }}\\n    {{- "Do not use variables.\\n\\n" }}\\n    {%- for t in tools %}\\n        {{- t | tojson(indent=4) }}\\n        {{- "\\n\\n" }}\\n    {%- endfor %}\\n    {{- first_user_message + "<|eot|>"}}\\n{%- endif %}\\n\\n{%- for message in messages %}\\n    {%- if not (message.role == \\'ipython\\' or message.role == \\'tool\\' or \\'tool_calls\\' in message) %}\\n    {{- \\'<|header_start|>\\' + message[\\'role\\'] + \\'<|header_end|>\\n\\n\\' }}\\n        {%- if message[\\'content\\'] is string %}\\n            {{- message[\\'content\\'] }}\\n        {%- else %}\\n            {%- for content in message[\\'content\\'] %}\\n                {%- if content[\\'type\\'] == \\'image\\' %}\\n                    {{- \\'<|image|>\\' }}\\n                {%- elif content[\\'type\\'] == \\'text\\' %}\\n                    {{- content[\\'text\\'] }}\\n                {%- endif %}\\n            {%- endfor %}\\n        {%- endif %}\\n        {{- "<|eot|>" }}\\n    {%- elif \\'tool_calls\\' in message and message.tool_calls|length > 0 %}\\n       {{- \\'<|header_start|>assistant<|header_end|>\\n\\n\\' -}}\\n       {{- \\'<|python_start|>\\' }}\\n        {%- if message[\\'content\\'] is string %}\\n            {{- message[\\'content\\'] }}\\n        {%- else %}\\n            {%- for content in message[\\'content\\'] %}\\n                {%- if content[\\'type\\'] == \\'image\\' %}\\n                    {{- \\'<|image|>\\' }}\\n                {%- elif content[\\'type\\'] == \\'text\\' %}\\n                    {{- content[\\'text\\'] }}\\n                {%- endif %}\\n            {%- endfor %}\\n        {%- endif %}\\n       {{- \\'<|python_end|>\\' }}\\n        {%- for tool_call in message.tool_calls %}\\n           {{- \\'{"name": "\\' + tool_call.function.name + \\'", \\' }}\\n           {{- \\'"parameters": \\' }}\\n           {{- tool_call.function.arguments | tojson }}\\n           {{- "}" }}\\n        {%- endfor %}\\n       {{- "<|eot|>" }}\\n    {%- elif message.role == "tool" or message.role == "ipython" %}\\n        {{- "<|header_start|>ipython<|header_end|>\\n\\n" }}\\n        {%- if message.content is mapping or message.content is iterable %}\\n            {{- message.content | tojson }}\\n        {%- else %}\\n            {{- message.content }}\\n        {%- endif %}\\n        {{- "<|eot|>" }}\\n    {%- endif %}\\n{%- endfor %}\\n{%- if add_generation_prompt %}\\n    {{- \\'<|header_start|>assistant<|header_end|>\\n\\n\\' }}\\n{%- endif %}\\n'`},{name:"**kwargs",val:""}],parametersDescription:[{anchor:"transformers.Llama4Processor.image_processor",description:`<strong>image_processor</strong> (<a href="/docs/transformers/v4.56.2/en/model_doc/auto#transformers.AutoImageProcessor">AutoImageProcessor</a>, <em>optional</em>) &#x2014;
The image processor is a required input.`,name:"image_processor"},{anchor:"transformers.Llama4Processor.tokenizer",description:`<strong>tokenizer</strong> ([<code>PreTrainedTokenizer</code>, <code>PreTrainedTokenizerFast</code>], <em>optional</em>) &#x2014;
The tokenizer is a required input.`,name:"tokenizer"},{anchor:"transformers.Llama4Processor.patch_size",description:`<strong>patch_size</strong> (<code>int</code>, <em>optional</em>, defaults to 28) &#x2014;
The size of image patches for tokenization.`,name:"patch_size"},{anchor:"transformers.Llama4Processor.img_size",description:`<strong>img_size</strong> (<code>int</code>, <em>optional</em>, defaults to 364) &#x2014;
The size of the image to be tokenized. This should correspond to the size given to the image processor.`,name:"img_size"},{anchor:"transformers.Llama4Processor.image_token",description:`<strong>image_token</strong> (<code>str</code>, <em>optional</em>, defaults to <code>&quot;&lt;|image|&gt;&quot;</code>) &#x2014;
The token to be used to represent an image in the text.`,name:"image_token"},{anchor:"transformers.Llama4Processor.downsample_factor",description:`<strong>downsample_factor</strong> (<code>int</code>, <em>optional</em>, defaults to 1) &#x2014;
The factor by which to scale the patch size.`,name:"downsample_factor"},{anchor:"transformers.Llama4Processor.start_of_img_token",description:`<strong>start_of_img_token</strong> (<code>str</code>, <em>optional</em>, defaults to <code>&quot;&lt;|START_OF_IMG|&gt;&quot;</code>) &#x2014;
The token to be used to represent the start of an image in the text.`,name:"start_of_img_token"},{anchor:"transformers.Llama4Processor.end_of_img_token",description:`<strong>end_of_img_token</strong> (<code>str</code>, <em>optional</em>, defaults to <code>&quot;&lt;|END_OF_IMG|&gt;&quot;</code>) &#x2014;
The token to be used to represent the end of an image in the text.`,name:"end_of_img_token"},{anchor:"transformers.Llama4Processor.img_patch_token",description:`<strong>img_patch_token</strong> (<code>str</code>, <em>optional</em>, defaults to <code>&quot;&lt;|IMG_PATCH|&gt;&quot;</code>) &#x2014;
The token to be used to represent an image patch in the text.`,name:"img_patch_token"},{anchor:"transformers.Llama4Processor.img_line_break_token",description:`<strong>img_line_break_token</strong> (<code>str</code>, <em>optional</em>, defaults to <code>&quot;&lt;|IMG_LINE_BREAK|&gt;&quot;</code>) &#x2014;
The token to be used to represent a line break in the text.`,name:"img_line_break_token"},{anchor:"transformers.Llama4Processor.tile_token",description:`<strong>tile_token</strong> (<code>str</code>, <em>optional</em>, defaults to <code>&quot;TILE&quot;</code>) &#x2014;
The token to be used to represent an image patch in the text.`,name:"tile_token"},{anchor:"transformers.Llama4Processor.tile_global_token",description:`<strong>tile_global_token</strong> (<code>str</code>, <em>optional</em>, defaults to <code>&quot;TILE_GLOBAL&quot;</code>) &#x2014;
The token to be used to represent the cover image in the text.`,name:"tile_global_token"},{anchor:"transformers.Llama4Processor.chat_template",description:`<strong>chat_template</strong> (<code>str</code>, <em>optional</em>) &#x2014; A Jinja template which will be used to convert lists of messages
in a chat into a tokenizable string.`,name:"chat_template"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/processing_llama4.py#L43"}}),Ae=new F({props:{title:"Llama4ImageProcessorFast",local:"transformers.Llama4ImageProcessorFast",headingTag:"h2"}}),Pe=new I({props:{name:"class transformers.Llama4ImageProcessorFast",anchor:"transformers.Llama4ImageProcessorFast",parameters:[{name:"**kwargs",val:": typing_extensions.Unpack[transformers.models.llama4.image_processing_llama4_fast.Llama4ImageProcessorKwargs]"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/image_processing_llama4_fast.py#L339"}}),De=new I({props:{name:"preprocess",anchor:"transformers.Llama4ImageProcessorFast.preprocess",parameters:[{name:"images",val:": typing.Union[ForwardRef('PIL.Image.Image'), numpy.ndarray, ForwardRef('torch.Tensor'), list['PIL.Image.Image'], list[numpy.ndarray], list['torch.Tensor']]"},{name:"**kwargs",val:": typing_extensions.Unpack[transformers.models.llama4.image_processing_llama4_fast.Llama4ImageProcessorKwargs]"}],parametersDescription:[{anchor:"transformers.Llama4ImageProcessorFast.preprocess.images",description:`<strong>images</strong> (<code>Union[PIL.Image.Image, numpy.ndarray, torch.Tensor, list[&apos;PIL.Image.Image&apos;], list[numpy.ndarray], list[&apos;torch.Tensor&apos;]]</code>) &#x2014;
Image to preprocess. Expects a single or batch of images with pixel values ranging from 0 to 255. If
passing in images with pixel values between 0 and 1, set <code>do_rescale=False</code>.`,name:"images"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.do_resize",description:`<strong>do_resize</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether to resize the image.`,name:"do_resize"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.size",description:`<strong>size</strong> (<code>dict[str, int]</code>, <em>optional</em>) &#x2014;
Describes the maximum input dimensions to the model.`,name:"size"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.default_to_square",description:`<strong>default_to_square</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether to default to a square image when resizing, if size is an int.`,name:"default_to_square"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.resample",description:`<strong>resample</strong> (<code>Union[PILImageResampling, F.InterpolationMode, NoneType]</code>) &#x2014;
Resampling filter to use if resizing the image. This can be one of the enum <code>PILImageResampling</code>. Only
has an effect if <code>do_resize</code> is set to <code>True</code>.`,name:"resample"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.do_center_crop",description:`<strong>do_center_crop</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether to center crop the image.`,name:"do_center_crop"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.crop_size",description:`<strong>crop_size</strong> (<code>dict[str, int]</code>, <em>optional</em>) &#x2014;
Size of the output image after applying <code>center_crop</code>.`,name:"crop_size"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.do_rescale",description:`<strong>do_rescale</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether to rescale the image.`,name:"do_rescale"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.rescale_factor",description:`<strong>rescale_factor</strong> (<code>Union[int, float, NoneType]</code>) &#x2014;
Rescale factor to rescale the image by if <code>do_rescale</code> is set to <code>True</code>.`,name:"rescale_factor"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.do_normalize",description:`<strong>do_normalize</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether to normalize the image.`,name:"do_normalize"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.image_mean",description:`<strong>image_mean</strong> (<code>Union[float, list[float], NoneType]</code>) &#x2014;
Image mean to use for normalization. Only has an effect if <code>do_normalize</code> is set to <code>True</code>.`,name:"image_mean"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.image_std",description:`<strong>image_std</strong> (<code>Union[float, list[float], NoneType]</code>) &#x2014;
Image standard deviation to use for normalization. Only has an effect if <code>do_normalize</code> is set to
<code>True</code>.`,name:"image_std"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.do_convert_rgb",description:`<strong>do_convert_rgb</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether to convert the image to RGB.`,name:"do_convert_rgb"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.return_tensors",description:"<strong>return_tensors</strong> (<code>Union[str, ~utils.generic.TensorType, NoneType]</code>) &#x2014;\nReturns stacked tensors if set to `pt, otherwise returns a list of tensors.",name:"return_tensors"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.data_format",description:`<strong>data_format</strong> (<code>~image_utils.ChannelDimension</code>, <em>optional</em>) &#x2014;
Only <code>ChannelDimension.FIRST</code> is supported. Added for compatibility with slow processors.`,name:"data_format"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.input_data_format",description:`<strong>input_data_format</strong> (<code>Union[str, ~image_utils.ChannelDimension, NoneType]</code>) &#x2014;
The channel dimension format for the input image. If unset, the channel dimension format is inferred
from the input image. Can be one of:<ul>
<li><code>&quot;channels_first&quot;</code> or <code>ChannelDimension.FIRST</code>: image in (num_channels, height, width) format.</li>
<li><code>&quot;channels_last&quot;</code> or <code>ChannelDimension.LAST</code>: image in (height, width, num_channels) format.</li>
<li><code>&quot;none&quot;</code> or <code>ChannelDimension.NONE</code>: image in (height, width) format.</li>
</ul>`,name:"input_data_format"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.device",description:`<strong>device</strong> (<code>torch.device</code>, <em>optional</em>) &#x2014;
The device to process the images on. If unset, the device is inferred from the input images.`,name:"device"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.disable_grouping",description:`<strong>disable_grouping</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether to disable grouping of images by size to process them individually and not in batches.
If None, will be set to True if the images are on CPU, and False otherwise. This choice is based on
empirical observations, as detailed here: <a href="https://github.com/huggingface/transformers/pull/38157" rel="nofollow">https://github.com/huggingface/transformers/pull/38157</a>`,name:"disable_grouping"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.max_patches",description:`<strong>max_patches</strong> (<code>int</code>, <em>optional</em>, defaults to 16) &#x2014;
The maximum number of patches to be extracted from the image.
Can be overridden by the <code>max_patches</code> parameter in the <code>preprocess</code> method.`,name:"max_patches"},{anchor:"transformers.Llama4ImageProcessorFast.preprocess.resize_to_max_canvas",description:`<strong>resize_to_max_canvas</strong> (<code>bool</code>, <em>optional</em>, defaults to False) &#x2014;
Whether to resize the image to the maximum canvas size.
If True, picks the canvas the allows the largest resizing without distortion.
If False, downsample as little as possible, including no resizing at all,
but never upsample, unless the image is smaller than the patch size.`,name:"resize_to_max_canvas"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/image_processing_llama4_fast.py#L380",returnDescription:`<script context="module">export const metadata = 'undefined';<\/script>


<ul>
<li><strong>data</strong> (<code>dict</code>) â€” Dictionary of lists/arrays/tensors returned by the <strong>call</strong> method (â€˜pixel_valuesâ€™, etc.).</li>
<li><strong>tensor_type</strong> (<code>Union[None, str, TensorType]</code>, <em>optional</em>) â€” You can give a tensor_type here to convert the lists of integers in PyTorch/TensorFlow/Numpy Tensors at
initialization.</li>
</ul>
`,returnType:`<script context="module">export const metadata = 'undefined';<\/script>


<p><code>&lt;class 'transformers.image_processing_base.BatchFeature'&gt;</code></p>
`}}),Oe=new I({props:{name:"rescale_and_normalize",anchor:"transformers.Llama4ImageProcessorFast.rescale_and_normalize",parameters:[{name:"images",val:": torch.Tensor"},{name:"do_rescale",val:": bool"},{name:"rescale_factor",val:": float"},{name:"do_normalize",val:": bool"},{name:"image_mean",val:": typing.Union[float, list[float]]"},{name:"image_std",val:": typing.Union[float, list[float]]"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/image_processing_llama4_fast.py#L356"}}),Ke=new F({props:{title:"Llama4ForConditionalGeneration",local:"transformers.Llama4ForConditionalGeneration",headingTag:"h2"}}),et=new I({props:{name:"class transformers.Llama4ForConditionalGeneration",anchor:"transformers.Llama4ForConditionalGeneration",parameters:[{name:"config",val:": Llama4Config"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L1139"}}),tt=new I({props:{name:"forward",anchor:"transformers.Llama4ForConditionalGeneration.forward",parameters:[{name:"input_ids",val:": LongTensor = None"},{name:"pixel_values",val:": FloatTensor = None"},{name:"attention_mask",val:": typing.Optional[torch.Tensor] = None"},{name:"position_ids",val:": typing.Optional[torch.LongTensor] = None"},{name:"past_key_values",val:": typing.Optional[transformers.cache_utils.Cache] = None"},{name:"inputs_embeds",val:": typing.Optional[torch.FloatTensor] = None"},{name:"vision_feature_layer",val:": typing.Union[int, list[int], NoneType] = None"},{name:"vision_feature_select_strategy",val:": typing.Optional[str] = None"},{name:"labels",val:": typing.Optional[torch.LongTensor] = None"},{name:"use_cache",val:": typing.Optional[bool] = None"},{name:"output_attentions",val:": typing.Optional[bool] = None"},{name:"output_hidden_states",val:": typing.Optional[bool] = None"},{name:"return_dict",val:": typing.Optional[bool] = None"},{name:"cache_position",val:": typing.Optional[torch.LongTensor] = None"},{name:"logits_to_keep",val:": typing.Union[int, torch.Tensor] = 0"},{name:"image_sizes",val:": Tensor = None"},{name:"**kwargs",val:": typing_extensions.Unpack[transformers.utils.generic.TransformersKwargs]"}],parametersDescription:[{anchor:"transformers.Llama4ForConditionalGeneration.forward.input_ids",description:`<strong>input_ids</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>) &#x2014;
Indices of input sequence tokens in the vocabulary. Padding will be ignored by default.</p>
<p>Indices can be obtained using <a href="/docs/transformers/v4.56.2/en/model_doc/auto#transformers.AutoTokenizer">AutoTokenizer</a>. See <a href="/docs/transformers/v4.56.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.encode">PreTrainedTokenizer.encode()</a> and
<a href="/docs/transformers/v4.56.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.__call__">PreTrainedTokenizer.<strong>call</strong>()</a> for details.</p>
<p><a href="../glossary#input-ids">What are input IDs?</a>`,name:"input_ids"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.pixel_values",description:`<strong>pixel_values</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, num_channels, image_size, image_size)</code>) &#x2014;
The tensors corresponding to the input images. Pixel values can be obtained using
<code>Llama4ImageProcessor</code>. See <code>Llama4ImageProcessor.__call__</code> for details (<a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4Processor">Llama4Processor</a> uses
<code>Llama4ImageProcessor</code> for processing images).`,name:"pixel_values"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.attention_mask",description:`<strong>attention_mask</strong> (<code>torch.Tensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Mask to avoid performing attention on padding token indices. Mask values selected in <code>[0, 1]</code>:</p>
<ul>
<li>1 for tokens that are <strong>not masked</strong>,</li>
<li>0 for tokens that are <strong>masked</strong>.</li>
</ul>
<p><a href="../glossary#attention-mask">What are attention masks?</a>`,name:"attention_mask"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.position_ids",description:`<strong>position_ids</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Indices of positions of each input sequence tokens in the position embeddings. Selected in the range <code>[0, config.n_positions - 1]</code>.</p>
<p><a href="../glossary#position-ids">What are position IDs?</a>`,name:"position_ids"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.past_key_values",description:`<strong>past_key_values</strong> (<code>~cache_utils.Cache</code>, <em>optional</em>) &#x2014;
Pre-computed hidden-states (key and values in the self-attention blocks and in the cross-attention
blocks) that can be used to speed up sequential decoding. This typically consists in the <code>past_key_values</code>
returned by the model at a previous stage of decoding, when <code>use_cache=True</code> or <code>config.use_cache=True</code>.</p>
<p>Only <a href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.Cache">Cache</a> instance is allowed as input, see our <a href="https://huggingface.co/docs/transformers/en/kv_cache" rel="nofollow">kv cache guide</a>.
If no <code>past_key_values</code> are passed, <a href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.DynamicCache">DynamicCache</a> will be initialized by default.</p>
<p>The model will output the same cache format that is fed as input.</p>
<p>If <code>past_key_values</code> are used, the user is expected to input only unprocessed <code>input_ids</code> (those that don&#x2019;t
have their past key value states given to this model) of shape <code>(batch_size, unprocessed_length)</code> instead of all <code>input_ids</code>
of shape <code>(batch_size, sequence_length)</code>.`,name:"past_key_values"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.inputs_embeds",description:`<strong>inputs_embeds</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, sequence_length, hidden_size)</code>, <em>optional</em>) &#x2014;
Optionally, instead of passing <code>input_ids</code> you can choose to directly pass an embedded representation. This
is useful if you want more control over how to convert <code>input_ids</code> indices into associated vectors than the
model&#x2019;s internal embedding lookup matrix.`,name:"inputs_embeds"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.vision_feature_layer",description:`<strong>vision_feature_layer</strong> (<code>Union[int, list[int], NoneType]</code>) &#x2014;
The index of the layer to select the vision feature. If multiple indices are provided,
the vision feature of the corresponding indices will be concatenated to form the
vision features.`,name:"vision_feature_layer"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.vision_feature_select_strategy",description:`<strong>vision_feature_select_strategy</strong> (<code>str</code>, <em>optional</em>) &#x2014;
The feature selection strategy used to select the vision feature from the vision backbone.
Can be one of <code>&quot;default&quot;</code> or <code>&quot;full&quot;</code>.`,name:"vision_feature_select_strategy"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.labels",description:`<strong>labels</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Labels for computing the masked language modeling loss. Indices should either be in <code>[0, ..., config.vocab_size]</code> or -100 (see <code>input_ids</code> docstring). Tokens with indices set to <code>-100</code> are ignored
(masked), the loss is only computed for the tokens with labels in <code>[0, ..., config.vocab_size]</code>.`,name:"labels"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.use_cache",description:`<strong>use_cache</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
If set to <code>True</code>, <code>past_key_values</code> key value states are returned and can be used to speed up decoding (see
<code>past_key_values</code>).`,name:"use_cache"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.output_attentions",description:`<strong>output_attentions</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether or not to return the attentions tensors of all attention layers. See <code>attentions</code> under returned
tensors for more detail.`,name:"output_attentions"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.output_hidden_states",description:`<strong>output_hidden_states</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether or not to return the hidden states of all layers. See <code>hidden_states</code> under returned tensors for
more detail.`,name:"output_hidden_states"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.return_dict",description:`<strong>return_dict</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
Whether or not to return a <a href="/docs/transformers/v4.56.2/en/main_classes/output#transformers.utils.ModelOutput">ModelOutput</a> instead of a plain tuple.`,name:"return_dict"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.cache_position",description:`<strong>cache_position</strong> (<code>torch.LongTensor</code> of shape <code>(sequence_length)</code>, <em>optional</em>) &#x2014;
Indices depicting the position of the input sequence tokens in the sequence. Contrarily to <code>position_ids</code>,
this tensor is not affected by padding. It is used to update the cache in the correct position and to infer
the complete sequence length.`,name:"cache_position"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.logits_to_keep",description:`<strong>logits_to_keep</strong> (<code>Union[int, torch.Tensor]</code>, defaults to <code>0</code>) &#x2014;
If an <code>int</code>, compute logits for the last <code>logits_to_keep</code> tokens. If <code>0</code>, calculate logits for all
<code>input_ids</code> (special case). Only last token logits are needed for generation, and calculating them only for that
token can save memory, which becomes pretty significant for long sequences or large vocabulary size.
If a <code>torch.Tensor</code>, must be 1D corresponding to the indices to keep in the sequence length dimension.
This is useful when using packed tensor format (single dimension for batch and sequence length).`,name:"logits_to_keep"},{anchor:"transformers.Llama4ForConditionalGeneration.forward.image_sizes",description:`<strong>image_sizes</strong> (<code>torch.Tensor</code> of shape <code>(batch_size, 2)</code>) &#x2014;
The sizes of the images in the batch, being (height, width) for each image.`,name:"image_sizes"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L1227",returnDescription:`<script context="module">export const metadata = 'undefined';<\/script>


<p>A <code>transformers.models.llama4.modeling_llama4.Llama4CausalLMOutputWithPast</code> or a tuple of
<code>torch.FloatTensor</code> (if <code>return_dict=False</code> is passed or when <code>config.return_dict=False</code>) comprising various
elements depending on the configuration (<a
  href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4Config"
>Llama4Config</a>) and inputs.</p>
<ul>
<li>
<p><strong>loss</strong> (<code>torch.FloatTensor</code> of shape <code>(1,)</code>, <em>optional</em>, returned when <code>labels</code> is provided) â€” Language modeling loss (for next-token prediction).</p>
</li>
<li>
<p><strong>logits</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, sequence_length, config.vocab_size)</code>) â€” Prediction scores of the language modeling head (scores for each vocabulary token before SoftMax).</p>
</li>
<li>
<p><strong>past_key_values</strong> (<code>Cache</code>, <em>optional</em>, returned when <code>use_cache=True</code> is passed or when <code>config.use_cache=True</code>) â€” Tuple of <code>tuple(torch.FloatTensor)</code> of length <code>config.n_layers</code>, with each tuple having 2 tensors of shape
<code>(batch_size, num_heads, sequence_length, embed_size_per_head)</code>)</p>
<p>Contains pre-computed hidden-states (key and values in the self-attention blocks) that can be used (see
<code>past_key_values</code> input) to speed up sequential decoding.</p>
</li>
<li>
<p><strong>hidden_states</strong> (<code>tuple[torch.FloatTensor]</code>, <em>optional</em>, returned when <code>output_hidden_states=True</code> is passed or when <code>config.output_hidden_states=True</code>) â€” Tuple of <code>torch.FloatTensor</code> (one for the output of the embeddings, if the model has an embedding layer, +
one for the output of each layer) of shape <code>(batch_size, sequence_length, hidden_size)</code>.</p>
<p>Hidden-states of the model at the output of each layer plus the optional initial embedding outputs.</p>
</li>
<li>
<p><strong>attentions</strong> (<code>tuple[torch.FloatTensor]</code>, <em>optional</em>, returned when <code>output_attentions=True</code> is passed or when <code>config.output_attentions=True</code>) â€” Tuple of <code>torch.FloatTensor</code> (one for each layer) of shape <code>(batch_size, num_heads, sequence_length, sequence_length)</code>.</p>
<p>Attentions weights after the attention softmax, used to compute the weighted average in the self-attention
heads.</p>
</li>
<li>
<p><strong>image_hidden_states</strong> (<code>torch.FloatTensor</code>, <em>optional</em>) â€” A <code>torch.FloatTensor</code> of size (batch_size, num_images, sequence_length, hidden_size)\`.
image_hidden_states of the model produced by the vision encoder and after projecting the last hidden state.</p>
</li>
</ul>
`,returnType:`<script context="module">export const metadata = 'undefined';<\/script>


<p><code>transformers.models.llama4.modeling_llama4.Llama4CausalLMOutputWithPast</code> or <code>tuple(torch.FloatTensor)</code></p>
`}}),pe=new en({props:{$$slots:{default:[es]},$$scope:{ctx:J}}}),ue=new sn({props:{anchor:"transformers.Llama4ForConditionalGeneration.forward.example",$$slots:{default:[ts]},$$scope:{ctx:J}}}),nt=new I({props:{name:"get_image_features",anchor:"transformers.Llama4ForConditionalGeneration.get_image_features",parameters:[{name:"pixel_values",val:": FloatTensor"},{name:"vision_feature_layer",val:": typing.Union[int, list[int]]"},{name:"vision_feature_select_strategy",val:": str"},{name:"**kwargs",val:""}],parametersDescription:[{anchor:"transformers.Llama4ForConditionalGeneration.get_image_features.pixel_values",description:`<strong>pixel_values</strong> (<code>torch.FloatTensor]</code> of shape <code>(batch_size, channels, height, width)</code>) &#x2014;
The tensors corresponding to the input images.`,name:"pixel_values"},{anchor:"transformers.Llama4ForConditionalGeneration.get_image_features.vision_feature_layer",description:`<strong>vision_feature_layer</strong> (<code>Union[int, list[int]]</code>) &#x2014;
The index of the layer to select the vision feature. If multiple indices are provided,
the vision feature of the corresponding indices will be concatenated to form the
vision features.`,name:"vision_feature_layer"},{anchor:"transformers.Llama4ForConditionalGeneration.get_image_features.vision_feature_select_strategy",description:`<strong>vision_feature_select_strategy</strong> (<code>str</code>) &#x2014;
The feature selection strategy used to select the vision feature from the vision backbone.
Can be one of <code>&quot;default&quot;</code> or <code>&quot;full&quot;</code>`,name:"vision_feature_select_strategy"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L1174",returnDescription:`<script context="module">export const metadata = 'undefined';<\/script>


<p>Image feature tensor of shape <code>(num_images, image_length, embed_dim)</code>).</p>
`,returnType:`<script context="module">export const metadata = 'undefined';<\/script>


<p>image_features (<code>torch.Tensor</code>)</p>
`}}),ot=new I({props:{name:"get_placeholder_mask",anchor:"transformers.Llama4ForConditionalGeneration.get_placeholder_mask",parameters:[{name:"input_ids",val:": LongTensor"},{name:"inputs_embeds",val:": FloatTensor"},{name:"image_features",val:": FloatTensor"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L1204"}}),st=new F({props:{title:"Llama4ForCausalLM",local:"transformers.Llama4ForCausalLM",headingTag:"h2"}}),rt=new I({props:{name:"class transformers.Llama4ForCausalLM",anchor:"transformers.Llama4ForCausalLM",parameters:[{name:"config",val:": Llama4TextConfig"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L566"}}),lt=new I({props:{name:"forward",anchor:"transformers.Llama4ForCausalLM.forward",parameters:[{name:"input_ids",val:": LongTensor = None"},{name:"attention_mask",val:": typing.Optional[torch.Tensor] = None"},{name:"position_ids",val:": typing.Optional[torch.LongTensor] = None"},{name:"past_key_values",val:": typing.Union[transformers.cache_utils.Cache, list[torch.FloatTensor], NoneType] = None"},{name:"inputs_embeds",val:": typing.Optional[torch.FloatTensor] = None"},{name:"labels",val:": typing.Optional[torch.LongTensor] = None"},{name:"use_cache",val:": typing.Optional[bool] = None"},{name:"cache_position",val:": typing.Optional[torch.LongTensor] = None"},{name:"logits_to_keep",val:": typing.Union[int, torch.Tensor] = 0"},{name:"**kwargs",val:": typing_extensions.Unpack[transformers.utils.generic.TransformersKwargs]"}],parametersDescription:[{anchor:"transformers.Llama4ForCausalLM.forward.input_ids",description:`<strong>input_ids</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>) &#x2014;
Indices of input sequence tokens in the vocabulary. Padding will be ignored by default.</p>
<p>Indices can be obtained using <a href="/docs/transformers/v4.56.2/en/model_doc/auto#transformers.AutoTokenizer">AutoTokenizer</a>. See <a href="/docs/transformers/v4.56.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.encode">PreTrainedTokenizer.encode()</a> and
<a href="/docs/transformers/v4.56.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.__call__">PreTrainedTokenizer.<strong>call</strong>()</a> for details.</p>
<p><a href="../glossary#input-ids">What are input IDs?</a>`,name:"input_ids"},{anchor:"transformers.Llama4ForCausalLM.forward.attention_mask",description:`<strong>attention_mask</strong> (<code>torch.Tensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Mask to avoid performing attention on padding token indices. Mask values selected in <code>[0, 1]</code>:</p>
<ul>
<li>1 for tokens that are <strong>not masked</strong>,</li>
<li>0 for tokens that are <strong>masked</strong>.</li>
</ul>
<p><a href="../glossary#attention-mask">What are attention masks?</a>`,name:"attention_mask"},{anchor:"transformers.Llama4ForCausalLM.forward.position_ids",description:`<strong>position_ids</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Indices of positions of each input sequence tokens in the position embeddings. Selected in the range <code>[0, config.n_positions - 1]</code>.</p>
<p><a href="../glossary#position-ids">What are position IDs?</a>`,name:"position_ids"},{anchor:"transformers.Llama4ForCausalLM.forward.past_key_values",description:`<strong>past_key_values</strong> (<code>Union[~cache_utils.Cache, list[torch.FloatTensor], NoneType]</code>) &#x2014;
Pre-computed hidden-states (key and values in the self-attention blocks and in the cross-attention
blocks) that can be used to speed up sequential decoding. This typically consists in the <code>past_key_values</code>
returned by the model at a previous stage of decoding, when <code>use_cache=True</code> or <code>config.use_cache=True</code>.</p>
<p>Only <a href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.Cache">Cache</a> instance is allowed as input, see our <a href="https://huggingface.co/docs/transformers/en/kv_cache" rel="nofollow">kv cache guide</a>.
If no <code>past_key_values</code> are passed, <a href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.DynamicCache">DynamicCache</a> will be initialized by default.</p>
<p>The model will output the same cache format that is fed as input.</p>
<p>If <code>past_key_values</code> are used, the user is expected to input only unprocessed <code>input_ids</code> (those that don&#x2019;t
have their past key value states given to this model) of shape <code>(batch_size, unprocessed_length)</code> instead of all <code>input_ids</code>
of shape <code>(batch_size, sequence_length)</code>.`,name:"past_key_values"},{anchor:"transformers.Llama4ForCausalLM.forward.inputs_embeds",description:`<strong>inputs_embeds</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, sequence_length, hidden_size)</code>, <em>optional</em>) &#x2014;
Optionally, instead of passing <code>input_ids</code> you can choose to directly pass an embedded representation. This
is useful if you want more control over how to convert <code>input_ids</code> indices into associated vectors than the
model&#x2019;s internal embedding lookup matrix.`,name:"inputs_embeds"},{anchor:"transformers.Llama4ForCausalLM.forward.labels",description:`<strong>labels</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Labels for computing the masked language modeling loss. Indices should either be in <code>[0, ..., config.vocab_size]</code> or -100 (see <code>input_ids</code> docstring). Tokens with indices set to <code>-100</code> are ignored
(masked), the loss is only computed for the tokens with labels in <code>[0, ..., config.vocab_size]</code>.`,name:"labels"},{anchor:"transformers.Llama4ForCausalLM.forward.use_cache",description:`<strong>use_cache</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
If set to <code>True</code>, <code>past_key_values</code> key value states are returned and can be used to speed up decoding (see
<code>past_key_values</code>).`,name:"use_cache"},{anchor:"transformers.Llama4ForCausalLM.forward.cache_position",description:`<strong>cache_position</strong> (<code>torch.LongTensor</code> of shape <code>(sequence_length)</code>, <em>optional</em>) &#x2014;
Indices depicting the position of the input sequence tokens in the sequence. Contrarily to <code>position_ids</code>,
this tensor is not affected by padding. It is used to update the cache in the correct position and to infer
the complete sequence length.`,name:"cache_position"},{anchor:"transformers.Llama4ForCausalLM.forward.logits_to_keep",description:`<strong>logits_to_keep</strong> (<code>Union[int, torch.Tensor]</code>, defaults to <code>0</code>) &#x2014;
If an <code>int</code>, compute logits for the last <code>logits_to_keep</code> tokens. If <code>0</code>, calculate logits for all
<code>input_ids</code> (special case). Only last token logits are needed for generation, and calculating them only for that
token can save memory, which becomes pretty significant for long sequences or large vocabulary size.
If a <code>torch.Tensor</code>, must be 1D corresponding to the indices to keep in the sequence length dimension.
This is useful when using packed tensor format (single dimension for batch and sequence length).`,name:"logits_to_keep"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L582",returnDescription:`<script context="module">export const metadata = 'undefined';<\/script>


<p>A <a
  href="/docs/transformers/v4.56.2/en/main_classes/output#transformers.modeling_outputs.CausalLMOutputWithPast"
>transformers.modeling_outputs.CausalLMOutputWithPast</a> or a tuple of
<code>torch.FloatTensor</code> (if <code>return_dict=False</code> is passed or when <code>config.return_dict=False</code>) comprising various
elements depending on the configuration (<a
  href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4Config"
>Llama4Config</a>) and inputs.</p>
<ul>
<li>
<p><strong>loss</strong> (<code>torch.FloatTensor</code> of shape <code>(1,)</code>, <em>optional</em>, returned when <code>labels</code> is provided) â€” Language modeling loss (for next-token prediction).</p>
</li>
<li>
<p><strong>logits</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, sequence_length, config.vocab_size)</code>) â€” Prediction scores of the language modeling head (scores for each vocabulary token before SoftMax).</p>
</li>
<li>
<p><strong>past_key_values</strong> (<code>Cache</code>, <em>optional</em>, returned when <code>use_cache=True</code> is passed or when <code>config.use_cache=True</code>) â€” It is a <a
  href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.Cache"
>Cache</a> instance. For more details, see our <a
  href="https://huggingface.co/docs/transformers/en/kv_cache"
  rel="nofollow"
>kv cache guide</a>.</p>
<p>Contains pre-computed hidden-states (key and values in the self-attention blocks) that can be used (see
<code>past_key_values</code> input) to speed up sequential decoding.</p>
</li>
<li>
<p><strong>hidden_states</strong> (<code>tuple(torch.FloatTensor)</code>, <em>optional</em>, returned when <code>output_hidden_states=True</code> is passed or when <code>config.output_hidden_states=True</code>) â€” Tuple of <code>torch.FloatTensor</code> (one for the output of the embeddings, if the model has an embedding layer, +
one for the output of each layer) of shape <code>(batch_size, sequence_length, hidden_size)</code>.</p>
<p>Hidden-states of the model at the output of each layer plus the optional initial embedding outputs.</p>
</li>
<li>
<p><strong>attentions</strong> (<code>tuple(torch.FloatTensor)</code>, <em>optional</em>, returned when <code>output_attentions=True</code> is passed or when <code>config.output_attentions=True</code>) â€” Tuple of <code>torch.FloatTensor</code> (one for each layer) of shape <code>(batch_size, num_heads, sequence_length, sequence_length)</code>.</p>
<p>Attentions weights after the attention softmax, used to compute the weighted average in the self-attention
heads.</p>
</li>
</ul>
`,returnType:`<script context="module">export const metadata = 'undefined';<\/script>


<p><a
  href="/docs/transformers/v4.56.2/en/main_classes/output#transformers.modeling_outputs.CausalLMOutputWithPast"
>transformers.modeling_outputs.CausalLMOutputWithPast</a> or <code>tuple(torch.FloatTensor)</code></p>
`}}),ge=new en({props:{$$slots:{default:[ns]},$$scope:{ctx:J}}}),_e=new sn({props:{anchor:"transformers.Llama4ForCausalLM.forward.example",$$slots:{default:[os]},$$scope:{ctx:J}}}),dt=new F({props:{title:"Llama4TextModel",local:"transformers.Llama4TextModel",headingTag:"h2"}}),ct=new I({props:{name:"class transformers.Llama4TextModel",anchor:"transformers.Llama4TextModel",parameters:[{name:"config",val:": Llama4TextConfig"}],parametersDescription:[{anchor:"transformers.Llama4TextModel.config",description:`<strong>config</strong> (<a href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4TextConfig">Llama4TextConfig</a>) &#x2014;
Model configuration class with all the parameters of the model. Initializing with a config file does not
load the weights associated with the model, only the configuration. Check out the
<a href="/docs/transformers/v4.56.2/en/main_classes/model#transformers.PreTrainedModel.from_pretrained">from_pretrained()</a> method to load the model weights.`,name:"config"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L467"}}),mt=new I({props:{name:"forward",anchor:"transformers.Llama4TextModel.forward",parameters:[{name:"input_ids",val:": LongTensor = None"},{name:"attention_mask",val:": typing.Optional[torch.Tensor] = None"},{name:"position_ids",val:": typing.Optional[torch.LongTensor] = None"},{name:"past_key_values",val:": typing.Optional[transformers.cache_utils.Cache] = None"},{name:"inputs_embeds",val:": typing.Optional[torch.FloatTensor] = None"},{name:"use_cache",val:": typing.Optional[bool] = None"},{name:"cache_position",val:": typing.Optional[torch.LongTensor] = None"},{name:"**kwargs",val:": typing_extensions.Unpack[transformers.utils.generic.TransformersKwargs]"}],parametersDescription:[{anchor:"transformers.Llama4TextModel.forward.input_ids",description:`<strong>input_ids</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>) &#x2014;
Indices of input sequence tokens in the vocabulary. Padding will be ignored by default.</p>
<p>Indices can be obtained using <a href="/docs/transformers/v4.56.2/en/model_doc/auto#transformers.AutoTokenizer">AutoTokenizer</a>. See <a href="/docs/transformers/v4.56.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.encode">PreTrainedTokenizer.encode()</a> and
<a href="/docs/transformers/v4.56.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.__call__">PreTrainedTokenizer.<strong>call</strong>()</a> for details.</p>
<p><a href="../glossary#input-ids">What are input IDs?</a>`,name:"input_ids"},{anchor:"transformers.Llama4TextModel.forward.attention_mask",description:`<strong>attention_mask</strong> (<code>torch.Tensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Mask to avoid performing attention on padding token indices. Mask values selected in <code>[0, 1]</code>:</p>
<ul>
<li>1 for tokens that are <strong>not masked</strong>,</li>
<li>0 for tokens that are <strong>masked</strong>.</li>
</ul>
<p><a href="../glossary#attention-mask">What are attention masks?</a>`,name:"attention_mask"},{anchor:"transformers.Llama4TextModel.forward.position_ids",description:`<strong>position_ids</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Indices of positions of each input sequence tokens in the position embeddings. Selected in the range <code>[0, config.n_positions - 1]</code>.</p>
<p><a href="../glossary#position-ids">What are position IDs?</a>`,name:"position_ids"},{anchor:"transformers.Llama4TextModel.forward.past_key_values",description:`<strong>past_key_values</strong> (<code>~cache_utils.Cache</code>, <em>optional</em>) &#x2014;
Pre-computed hidden-states (key and values in the self-attention blocks and in the cross-attention
blocks) that can be used to speed up sequential decoding. This typically consists in the <code>past_key_values</code>
returned by the model at a previous stage of decoding, when <code>use_cache=True</code> or <code>config.use_cache=True</code>.</p>
<p>Only <a href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.Cache">Cache</a> instance is allowed as input, see our <a href="https://huggingface.co/docs/transformers/en/kv_cache" rel="nofollow">kv cache guide</a>.
If no <code>past_key_values</code> are passed, <a href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.DynamicCache">DynamicCache</a> will be initialized by default.</p>
<p>The model will output the same cache format that is fed as input.</p>
<p>If <code>past_key_values</code> are used, the user is expected to input only unprocessed <code>input_ids</code> (those that don&#x2019;t
have their past key value states given to this model) of shape <code>(batch_size, unprocessed_length)</code> instead of all <code>input_ids</code>
of shape <code>(batch_size, sequence_length)</code>.`,name:"past_key_values"},{anchor:"transformers.Llama4TextModel.forward.inputs_embeds",description:`<strong>inputs_embeds</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, sequence_length, hidden_size)</code>, <em>optional</em>) &#x2014;
Optionally, instead of passing <code>input_ids</code> you can choose to directly pass an embedded representation. This
is useful if you want more control over how to convert <code>input_ids</code> indices into associated vectors than the
model&#x2019;s internal embedding lookup matrix.`,name:"inputs_embeds"},{anchor:"transformers.Llama4TextModel.forward.use_cache",description:`<strong>use_cache</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
If set to <code>True</code>, <code>past_key_values</code> key value states are returned and can be used to speed up decoding (see
<code>past_key_values</code>).`,name:"use_cache"},{anchor:"transformers.Llama4TextModel.forward.cache_position",description:`<strong>cache_position</strong> (<code>torch.LongTensor</code> of shape <code>(sequence_length)</code>, <em>optional</em>) &#x2014;
Indices depicting the position of the input sequence tokens in the sequence. Contrarily to <code>position_ids</code>,
this tensor is not affected by padding. It is used to update the cache in the correct position and to infer
the complete sequence length.`,name:"cache_position"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L493",returnDescription:`<script context="module">export const metadata = 'undefined';<\/script>


<p>A <a
  href="/docs/transformers/v4.56.2/en/main_classes/output#transformers.modeling_outputs.BaseModelOutputWithPast"
>transformers.modeling_outputs.BaseModelOutputWithPast</a> or a tuple of
<code>torch.FloatTensor</code> (if <code>return_dict=False</code> is passed or when <code>config.return_dict=False</code>) comprising various
elements depending on the configuration (<a
  href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4Config"
>Llama4Config</a>) and inputs.</p>
<ul>
<li>
<p><strong>last_hidden_state</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, sequence_length, hidden_size)</code>) â€” Sequence of hidden-states at the output of the last layer of the model.</p>
<p>If <code>past_key_values</code> is used only the last hidden-state of the sequences of shape <code>(batch_size, 1, hidden_size)</code> is output.</p>
</li>
<li>
<p><strong>past_key_values</strong> (<code>Cache</code>, <em>optional</em>, returned when <code>use_cache=True</code> is passed or when <code>config.use_cache=True</code>) â€” It is a <a
  href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.Cache"
>Cache</a> instance. For more details, see our <a
  href="https://huggingface.co/docs/transformers/en/kv_cache"
  rel="nofollow"
>kv cache guide</a>.</p>
<p>Contains pre-computed hidden-states (key and values in the self-attention blocks and optionally if
<code>config.is_encoder_decoder=True</code> in the cross-attention blocks) that can be used (see <code>past_key_values</code>
input) to speed up sequential decoding.</p>
</li>
<li>
<p><strong>hidden_states</strong> (<code>tuple(torch.FloatTensor)</code>, <em>optional</em>, returned when <code>output_hidden_states=True</code> is passed or when <code>config.output_hidden_states=True</code>) â€” Tuple of <code>torch.FloatTensor</code> (one for the output of the embeddings, if the model has an embedding layer, +
one for the output of each layer) of shape <code>(batch_size, sequence_length, hidden_size)</code>.</p>
<p>Hidden-states of the model at the output of each layer plus the optional initial embedding outputs.</p>
</li>
<li>
<p><strong>attentions</strong> (<code>tuple(torch.FloatTensor)</code>, <em>optional</em>, returned when <code>output_attentions=True</code> is passed or when <code>config.output_attentions=True</code>) â€” Tuple of <code>torch.FloatTensor</code> (one for each layer) of shape <code>(batch_size, num_heads, sequence_length, sequence_length)</code>.</p>
<p>Attentions weights after the attention softmax, used to compute the weighted average in the self-attention
heads.</p>
</li>
</ul>
`,returnType:`<script context="module">export const metadata = 'undefined';<\/script>


<p><a
  href="/docs/transformers/v4.56.2/en/main_classes/output#transformers.modeling_outputs.BaseModelOutputWithPast"
>transformers.modeling_outputs.BaseModelOutputWithPast</a> or <code>tuple(torch.FloatTensor)</code></p>
`}}),ye=new en({props:{$$slots:{default:[as]},$$scope:{ctx:J}}}),ut=new F({props:{title:"Llama4ForCausalLM",local:"transformers.Llama4ForCausalLM",headingTag:"h2"}}),ht=new I({props:{name:"class transformers.Llama4ForCausalLM",anchor:"transformers.Llama4ForCausalLM",parameters:[{name:"config",val:": Llama4TextConfig"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L566"}}),ft=new I({props:{name:"forward",anchor:"transformers.Llama4ForCausalLM.forward",parameters:[{name:"input_ids",val:": LongTensor = None"},{name:"attention_mask",val:": typing.Optional[torch.Tensor] = None"},{name:"position_ids",val:": typing.Optional[torch.LongTensor] = None"},{name:"past_key_values",val:": typing.Union[transformers.cache_utils.Cache, list[torch.FloatTensor], NoneType] = None"},{name:"inputs_embeds",val:": typing.Optional[torch.FloatTensor] = None"},{name:"labels",val:": typing.Optional[torch.LongTensor] = None"},{name:"use_cache",val:": typing.Optional[bool] = None"},{name:"cache_position",val:": typing.Optional[torch.LongTensor] = None"},{name:"logits_to_keep",val:": typing.Union[int, torch.Tensor] = 0"},{name:"**kwargs",val:": typing_extensions.Unpack[transformers.utils.generic.TransformersKwargs]"}],parametersDescription:[{anchor:"transformers.Llama4ForCausalLM.forward.input_ids",description:`<strong>input_ids</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>) &#x2014;
Indices of input sequence tokens in the vocabulary. Padding will be ignored by default.</p>
<p>Indices can be obtained using <a href="/docs/transformers/v4.56.2/en/model_doc/auto#transformers.AutoTokenizer">AutoTokenizer</a>. See <a href="/docs/transformers/v4.56.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.encode">PreTrainedTokenizer.encode()</a> and
<a href="/docs/transformers/v4.56.2/en/internal/tokenization_utils#transformers.PreTrainedTokenizerBase.__call__">PreTrainedTokenizer.<strong>call</strong>()</a> for details.</p>
<p><a href="../glossary#input-ids">What are input IDs?</a>`,name:"input_ids"},{anchor:"transformers.Llama4ForCausalLM.forward.attention_mask",description:`<strong>attention_mask</strong> (<code>torch.Tensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Mask to avoid performing attention on padding token indices. Mask values selected in <code>[0, 1]</code>:</p>
<ul>
<li>1 for tokens that are <strong>not masked</strong>,</li>
<li>0 for tokens that are <strong>masked</strong>.</li>
</ul>
<p><a href="../glossary#attention-mask">What are attention masks?</a>`,name:"attention_mask"},{anchor:"transformers.Llama4ForCausalLM.forward.position_ids",description:`<strong>position_ids</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Indices of positions of each input sequence tokens in the position embeddings. Selected in the range <code>[0, config.n_positions - 1]</code>.</p>
<p><a href="../glossary#position-ids">What are position IDs?</a>`,name:"position_ids"},{anchor:"transformers.Llama4ForCausalLM.forward.past_key_values",description:`<strong>past_key_values</strong> (<code>Union[~cache_utils.Cache, list[torch.FloatTensor], NoneType]</code>) &#x2014;
Pre-computed hidden-states (key and values in the self-attention blocks and in the cross-attention
blocks) that can be used to speed up sequential decoding. This typically consists in the <code>past_key_values</code>
returned by the model at a previous stage of decoding, when <code>use_cache=True</code> or <code>config.use_cache=True</code>.</p>
<p>Only <a href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.Cache">Cache</a> instance is allowed as input, see our <a href="https://huggingface.co/docs/transformers/en/kv_cache" rel="nofollow">kv cache guide</a>.
If no <code>past_key_values</code> are passed, <a href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.DynamicCache">DynamicCache</a> will be initialized by default.</p>
<p>The model will output the same cache format that is fed as input.</p>
<p>If <code>past_key_values</code> are used, the user is expected to input only unprocessed <code>input_ids</code> (those that don&#x2019;t
have their past key value states given to this model) of shape <code>(batch_size, unprocessed_length)</code> instead of all <code>input_ids</code>
of shape <code>(batch_size, sequence_length)</code>.`,name:"past_key_values"},{anchor:"transformers.Llama4ForCausalLM.forward.inputs_embeds",description:`<strong>inputs_embeds</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, sequence_length, hidden_size)</code>, <em>optional</em>) &#x2014;
Optionally, instead of passing <code>input_ids</code> you can choose to directly pass an embedded representation. This
is useful if you want more control over how to convert <code>input_ids</code> indices into associated vectors than the
model&#x2019;s internal embedding lookup matrix.`,name:"inputs_embeds"},{anchor:"transformers.Llama4ForCausalLM.forward.labels",description:`<strong>labels</strong> (<code>torch.LongTensor</code> of shape <code>(batch_size, sequence_length)</code>, <em>optional</em>) &#x2014;
Labels for computing the masked language modeling loss. Indices should either be in <code>[0, ..., config.vocab_size]</code> or -100 (see <code>input_ids</code> docstring). Tokens with indices set to <code>-100</code> are ignored
(masked), the loss is only computed for the tokens with labels in <code>[0, ..., config.vocab_size]</code>.`,name:"labels"},{anchor:"transformers.Llama4ForCausalLM.forward.use_cache",description:`<strong>use_cache</strong> (<code>bool</code>, <em>optional</em>) &#x2014;
If set to <code>True</code>, <code>past_key_values</code> key value states are returned and can be used to speed up decoding (see
<code>past_key_values</code>).`,name:"use_cache"},{anchor:"transformers.Llama4ForCausalLM.forward.cache_position",description:`<strong>cache_position</strong> (<code>torch.LongTensor</code> of shape <code>(sequence_length)</code>, <em>optional</em>) &#x2014;
Indices depicting the position of the input sequence tokens in the sequence. Contrarily to <code>position_ids</code>,
this tensor is not affected by padding. It is used to update the cache in the correct position and to infer
the complete sequence length.`,name:"cache_position"},{anchor:"transformers.Llama4ForCausalLM.forward.logits_to_keep",description:`<strong>logits_to_keep</strong> (<code>Union[int, torch.Tensor]</code>, defaults to <code>0</code>) &#x2014;
If an <code>int</code>, compute logits for the last <code>logits_to_keep</code> tokens. If <code>0</code>, calculate logits for all
<code>input_ids</code> (special case). Only last token logits are needed for generation, and calculating them only for that
token can save memory, which becomes pretty significant for long sequences or large vocabulary size.
If a <code>torch.Tensor</code>, must be 1D corresponding to the indices to keep in the sequence length dimension.
This is useful when using packed tensor format (single dimension for batch and sequence length).`,name:"logits_to_keep"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L582",returnDescription:`<script context="module">export const metadata = 'undefined';<\/script>


<p>A <a
  href="/docs/transformers/v4.56.2/en/main_classes/output#transformers.modeling_outputs.CausalLMOutputWithPast"
>transformers.modeling_outputs.CausalLMOutputWithPast</a> or a tuple of
<code>torch.FloatTensor</code> (if <code>return_dict=False</code> is passed or when <code>config.return_dict=False</code>) comprising various
elements depending on the configuration (<a
  href="/docs/transformers/v4.56.2/en/model_doc/llama4#transformers.Llama4Config"
>Llama4Config</a>) and inputs.</p>
<ul>
<li>
<p><strong>loss</strong> (<code>torch.FloatTensor</code> of shape <code>(1,)</code>, <em>optional</em>, returned when <code>labels</code> is provided) â€” Language modeling loss (for next-token prediction).</p>
</li>
<li>
<p><strong>logits</strong> (<code>torch.FloatTensor</code> of shape <code>(batch_size, sequence_length, config.vocab_size)</code>) â€” Prediction scores of the language modeling head (scores for each vocabulary token before SoftMax).</p>
</li>
<li>
<p><strong>past_key_values</strong> (<code>Cache</code>, <em>optional</em>, returned when <code>use_cache=True</code> is passed or when <code>config.use_cache=True</code>) â€” It is a <a
  href="/docs/transformers/v4.56.2/en/internal/generation_utils#transformers.Cache"
>Cache</a> instance. For more details, see our <a
  href="https://huggingface.co/docs/transformers/en/kv_cache"
  rel="nofollow"
>kv cache guide</a>.</p>
<p>Contains pre-computed hidden-states (key and values in the self-attention blocks) that can be used (see
<code>past_key_values</code> input) to speed up sequential decoding.</p>
</li>
<li>
<p><strong>hidden_states</strong> (<code>tuple(torch.FloatTensor)</code>, <em>optional</em>, returned when <code>output_hidden_states=True</code> is passed or when <code>config.output_hidden_states=True</code>) â€” Tuple of <code>torch.FloatTensor</code> (one for the output of the embeddings, if the model has an embedding layer, +
one for the output of each layer) of shape <code>(batch_size, sequence_length, hidden_size)</code>.</p>
<p>Hidden-states of the model at the output of each layer plus the optional initial embedding outputs.</p>
</li>
<li>
<p><strong>attentions</strong> (<code>tuple(torch.FloatTensor)</code>, <em>optional</em>, returned when <code>output_attentions=True</code> is passed or when <code>config.output_attentions=True</code>) â€” Tuple of <code>torch.FloatTensor</code> (one for each layer) of shape <code>(batch_size, num_heads, sequence_length, sequence_length)</code>.</p>
<p>Attentions weights after the attention softmax, used to compute the weighted average in the self-attention
heads.</p>
</li>
</ul>
`,returnType:`<script context="module">export const metadata = 'undefined';<\/script>


<p><a
  href="/docs/transformers/v4.56.2/en/main_classes/output#transformers.modeling_outputs.CausalLMOutputWithPast"
>transformers.modeling_outputs.CausalLMOutputWithPast</a> or <code>tuple(torch.FloatTensor)</code></p>
`}}),Te=new en({props:{$$slots:{default:[ss]},$$scope:{ctx:J}}}),be=new sn({props:{anchor:"transformers.Llama4ForCausalLM.forward.example",$$slots:{default:[rs]},$$scope:{ctx:J}}}),_t=new F({props:{title:"Llama4VisionModel",local:"transformers.Llama4VisionModel",headingTag:"h2"}}),yt=new I({props:{name:"class transformers.Llama4VisionModel",anchor:"transformers.Llama4VisionModel",parameters:[{name:"config",val:": Llama4VisionConfig"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L1005"}}),Tt=new I({props:{name:"forward",anchor:"transformers.Llama4VisionModel.forward",parameters:[{name:"pixel_values",val:": Tensor"},{name:"attention_mask",val:": typing.Optional[torch.Tensor] = None"},{name:"output_attentions",val:": typing.Optional[bool] = None"},{name:"output_hidden_states",val:": typing.Optional[bool] = None"},{name:"return_dict",val:": typing.Optional[bool] = None"}],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L1041"}}),we=new sn({props:{anchor:"transformers.Llama4VisionModel.forward.example",$$slots:{default:[ls]},$$scope:{ctx:J}}}),bt=new I({props:{name:"get_input_embeddings",anchor:"transformers.Llama4VisionModel.get_input_embeddings",parameters:[],source:"https://github.com/huggingface/transformers/blob/v4.56.2/src/transformers/models/llama4/modeling_llama4.py#L1035"}}),wt=new Fa({props:{source:"https://github.com/huggingface/transformers/blob/main/docs/source/en/model_doc/llama4.md"}}),{c(){t=u("meta"),m=i(),n=u("p"),r=i(),c=u("p"),c.innerHTML=o,p=i(),g(v.$$.fragment),$=i(),k=u("div"),k.innerHTML=U,C=i(),O=u("p"),O.innerHTML=tn,Ue=i(),K=u("ul"),K.innerHTML=nn,rn=i(),$e=u("p"),$e.textContent=Ho,ln=i(),ke=u("p"),ke.innerHTML=So,dn=i(),g(re.$$.fragment),cn=i(),Ce=u("p"),Ce.innerHTML=Ao,mn=i(),g(le.$$.fragment),pn=i(),g(xe.$$.fragment),un=i(),g(je.$$.fragment),hn=i(),Ie=u("p"),Ie.innerHTML=Po,fn=i(),Le=u("p"),Le.innerHTML=Do,gn=i(),g(ie.$$.fragment),_n=i(),g(ze.$$.fragment),yn=i(),Ge=u("p"),Ge.innerHTML=Oo,Tn=i(),Ze=u("p"),Ze.textContent=Ko,bn=i(),Ve=u("p"),Ve.textContent=ea,Mn=i(),g(de.$$.fragment),wn=i(),g(Fe.$$.fragment),vn=i(),We=u("p"),We.textContent=ta,Jn=i(),Be=u("p"),Be.innerHTML=na,Un=i(),g(Re.$$.fragment),$n=i(),g(qe.$$.fragment),kn=i(),G=u("div"),g(Ee.$$.fragment),oo=i(),Ct=u("p"),Ct.innerHTML=oa,ao=i(),xt=u("p"),xt.innerHTML=aa,so=i(),jt=u("p"),jt.innerHTML=sa,ro=i(),g(ce.$$.fragment),Cn=i(),g(Ne.$$.fragment),xn=i(),Z=u("div"),g(Xe.$$.fragment),lo=i(),It=u("p"),It.innerHTML=ra,io=i(),Lt=u("p"),Lt.innerHTML=la,co=i(),zt=u("p"),zt.innerHTML=ia,mo=i(),Gt=u("p"),Gt.textContent=da,jn=i(),g(Qe.$$.fragment),In=i(),W=u("div"),g(Ye.$$.fragment),po=i(),Zt=u("p"),Zt.innerHTML=ca,uo=i(),Vt=u("p"),Vt.innerHTML=ma,ho=i(),Ft=u("p"),Ft.innerHTML=pa,Ln=i(),g(He.$$.fragment),zn=i(),oe=u("div"),g(Se.$$.fragment),fo=i(),Wt=u("p"),Wt.innerHTML=ua,Gn=i(),g(Ae.$$.fragment),Zn=i(),B=u("div"),g(Pe.$$.fragment),go=i(),Bt=u("p"),Bt.textContent=ha,_o=i(),Rt=u("div"),g(De.$$.fragment),yo=i(),me=u("div"),g(Oe.$$.fragment),To=i(),qt=u("p"),qt.textContent=fa,Vn=i(),g(Ke.$$.fragment),Fn=i(),R=u("div"),g(et.$$.fragment),bo=i(),N=u("div"),g(tt.$$.fragment),Mo=i(),Et=u("p"),Et.innerHTML=ga,wo=i(),g(pe.$$.fragment),vo=i(),g(ue.$$.fragment),Jo=i(),he=u("div"),g(nt.$$.fragment),Uo=i(),Nt=u("p"),Nt.textContent=_a,$o=i(),fe=u("div"),g(ot.$$.fragment),ko=i(),Xt=u("p"),Xt.innerHTML=ya,Wn=i(),at=u("ul"),at.innerHTML=Ta,Bn=i(),g(st.$$.fragment),Rn=i(),ae=u("div"),g(rt.$$.fragment),Co=i(),X=u("div"),g(lt.$$.fragment),xo=i(),Qt=u("p"),Qt.innerHTML=ba,jo=i(),g(ge.$$.fragment),Io=i(),g(_e.$$.fragment),qn=i(),it=u("ul"),it.innerHTML=Ma,En=i(),g(dt.$$.fragment),Nn=i(),V=u("div"),g(ct.$$.fragment),Lo=i(),Yt=u("p"),Yt.textContent=wa,zo=i(),Ht=u("p"),Ht.innerHTML=va,Go=i(),St=u("p"),St.innerHTML=Ja,Zo=i(),ee=u("div"),g(mt.$$.fragment),Vo=i(),At=u("p"),At.innerHTML=Ua,Fo=i(),g(ye.$$.fragment),Xn=i(),pt=u("ul"),pt.innerHTML=$a,Qn=i(),g(ut.$$.fragment),Yn=i(),se=u("div"),g(ht.$$.fragment),Wo=i(),Q=u("div"),g(ft.$$.fragment),Bo=i(),Pt=u("p"),Pt.innerHTML=ka,Ro=i(),g(Te.$$.fragment),qo=i(),g(be.$$.fragment),Hn=i(),gt=u("ul"),gt.innerHTML=Ca,Sn=i(),g(_t.$$.fragment),An=i(),Y=u("div"),g(yt.$$.fragment),Eo=i(),Me=u("div"),g(Tt.$$.fragment),No=i(),g(we.$$.fragment),Xo=i(),ve=u("div"),g(bt.$$.fragment),Qo=i(),Dt=u("p"),Dt.textContent=xa,Pn=i(),Mt=u("ul"),Mt.innerHTML=ja,Dn=i(),g(wt.$$.fragment),On=i(),on=u("p"),this.h()},l(e){const s=Za("svelte-u9bgzb",document.head);t=h(s,"META",{name:!0,content:!0}),s.forEach(a),m=d(e),n=h(e,"P",{}),x(n).forEach(a),r=d(e),c=h(e,"P",{"data-svelte-h":!0}),w(c)!=="svelte-1gcexay"&&(c.innerHTML=o),p=d(e),_(v.$$.fragment,e),$=d(e),k=h(e,"DIV",{style:!0,"data-svelte-h":!0}),w(k)!=="svelte-151sj7j"&&(k.innerHTML=U),C=d(e),O=h(e,"P",{"data-svelte-h":!0}),w(O)!=="svelte-m9lv2p"&&(O.innerHTML=tn),Ue=d(e),K=h(e,"UL",{"data-svelte-h":!0}),w(K)!=="svelte-1y7yvda"&&(K.innerHTML=nn),rn=d(e),$e=h(e,"P",{"data-svelte-h":!0}),w($e)!=="svelte-omzkf7"&&($e.textContent=Ho),ln=d(e),ke=h(e,"P",{"data-svelte-h":!0}),w(ke)!=="svelte-1q2xgmk"&&(ke.innerHTML=So),dn=d(e),_(re.$$.fragment,e),cn=d(e),Ce=h(e,"P",{"data-svelte-h":!0}),w(Ce)!=="svelte-tuvgj8"&&(Ce.innerHTML=Ao),mn=d(e),_(le.$$.fragment,e),pn=d(e),_(xe.$$.fragment,e),un=d(e),_(je.$$.fragment,e),hn=d(e),Ie=h(e,"P",{"data-svelte-h":!0}),w(Ie)!=="svelte-x0ymgx"&&(Ie.innerHTML=Po),fn=d(e),Le=h(e,"P",{"data-svelte-h":!0}),w(Le)!=="svelte-1mlq2xi"&&(Le.innerHTML=Do),gn=d(e),_(ie.$$.fragment,e),_n=d(e),_(ze.$$.fragment,e),yn=d(e),Ge=h(e,"P",{"data-svelte-h":!0}),w(Ge)!=="svelte-3fz0dv"&&(Ge.innerHTML=Oo),Tn=d(e),Ze=h(e,"P",{"data-svelte-h":!0}),w(Ze)!=="svelte-ql9del"&&(Ze.textContent=Ko),bn=d(e),Ve=h(e,"P",{"data-svelte-h":!0}),w(Ve)!=="svelte-1e6p2bq"&&(Ve.textContent=ea),Mn=d(e),_(de.$$.fragment,e),wn=d(e),_(Fe.$$.fragment,e),vn=d(e),We=h(e,"P",{"data-svelte-h":!0}),w(We)!=="svelte-1ey514g"&&(We.textContent=ta),Jn=d(e),Be=h(e,"P",{"data-svelte-h":!0}),w(Be)!=="svelte-1ezy410"&&(Be.innerHTML=na),Un=d(e),_(Re.$$.fragment,e),$n=d(e),_(qe.$$.fragment,e),kn=d(e),G=h(e,"DIV",{class:!0});var q=x(G);_(Ee.$$.fragment,q),oo=d(q),Ct=h(q,"P",{"data-svelte-h":!0}),w(Ct)!=="svelte-efaf7b"&&(Ct.innerHTML=oa),ao=d(q),xt=h(q,"P",{"data-svelte-h":!0}),w(xt)!=="svelte-sh2hyl"&&(xt.innerHTML=aa),so=d(q),jt=h(q,"P",{"data-svelte-h":!0}),w(jt)!=="svelte-1ek1ss9"&&(jt.innerHTML=sa),ro=d(q),_(ce.$$.fragment,q),q.forEach(a),Cn=d(e),_(Ne.$$.fragment,e),xn=d(e),Z=h(e,"DIV",{class:!0});var E=x(Z);_(Xe.$$.fragment,E),lo=d(E),It=h(E,"P",{"data-svelte-h":!0}),w(It)!=="svelte-1ucfyj"&&(It.innerHTML=ra),io=d(E),Lt=h(E,"P",{"data-svelte-h":!0}),w(Lt)!=="svelte-sh2hyl"&&(Lt.innerHTML=la),co=d(E),zt=h(E,"P",{"data-svelte-h":!0}),w(zt)!=="svelte-1ek1ss9"&&(zt.innerHTML=ia),mo=d(E),Gt=h(E,"P",{"data-svelte-h":!0}),w(Gt)!=="svelte-11lpom8"&&(Gt.textContent=da),E.forEach(a),jn=d(e),_(Qe.$$.fragment,e),In=d(e),W=h(e,"DIV",{class:!0});var H=x(W);_(Ye.$$.fragment,H),po=d(H),Zt=h(H,"P",{"data-svelte-h":!0}),w(Zt)!=="svelte-1d2m86w"&&(Zt.innerHTML=ca),uo=d(H),Vt=h(H,"P",{"data-svelte-h":!0}),w(Vt)!=="svelte-sh2hyl"&&(Vt.innerHTML=ma),ho=d(H),Ft=h(H,"P",{"data-svelte-h":!0}),w(Ft)!=="svelte-1ek1ss9"&&(Ft.innerHTML=pa),H.forEach(a),Ln=d(e),_(He.$$.fragment,e),zn=d(e),oe=h(e,"DIV",{class:!0});var vt=x(oe);_(Se.$$.fragment,vt),fo=d(vt),Wt=h(vt,"P",{"data-svelte-h":!0}),w(Wt)!=="svelte-13mxcss"&&(Wt.innerHTML=ua),vt.forEach(a),Gn=d(e),_(Ae.$$.fragment,e),Zn=d(e),B=h(e,"DIV",{class:!0});var S=x(B);_(Pe.$$.fragment,S),go=d(S),Bt=h(S,"P",{"data-svelte-h":!0}),w(Bt)!=="svelte-1wru4bd"&&(Bt.textContent=ha),_o=d(S),Rt=h(S,"DIV",{class:!0});var an=x(Rt);_(De.$$.fragment,an),an.forEach(a),yo=d(S),me=h(S,"DIV",{class:!0});var Jt=x(me);_(Oe.$$.fragment,Jt),To=d(Jt),qt=h(Jt,"P",{"data-svelte-h":!0}),w(qt)!=="svelte-15zn3yd"&&(qt.textContent=fa),Jt.forEach(a),S.forEach(a),Vn=d(e),_(Ke.$$.fragment,e),Fn=d(e),R=h(e,"DIV",{class:!0});var A=x(R);_(et.$$.fragment,A),bo=d(A),N=h(A,"DIV",{class:!0});var P=x(N);_(tt.$$.fragment,P),Mo=d(P),Et=h(P,"P",{"data-svelte-h":!0}),w(Et)!=="svelte-vkzlk"&&(Et.innerHTML=ga),wo=d(P),_(pe.$$.fragment,P),vo=d(P),_(ue.$$.fragment,P),P.forEach(a),Jo=d(A),he=h(A,"DIV",{class:!0});var Ut=x(he);_(nt.$$.fragment,Ut),Uo=d(Ut),Nt=h(Ut,"P",{"data-svelte-h":!0}),w(Nt)!=="svelte-s9i4hu"&&(Nt.textContent=_a),Ut.forEach(a),$o=d(A),fe=h(A,"DIV",{class:!0});var $t=x(fe);_(ot.$$.fragment,$t),ko=d($t),Xt=h($t,"P",{"data-svelte-h":!0}),w(Xt)!=="svelte-3ue1dv"&&(Xt.innerHTML=ya),$t.forEach(a),A.forEach(a),Wn=d(e),at=h(e,"UL",{"data-svelte-h":!0}),w(at)!=="svelte-n3ow4o"&&(at.innerHTML=Ta),Bn=d(e),_(st.$$.fragment,e),Rn=d(e),ae=h(e,"DIV",{class:!0});var kt=x(ae);_(rt.$$.fragment,kt),Co=d(kt),X=h(kt,"DIV",{class:!0});var D=x(X);_(lt.$$.fragment,D),xo=d(D),Qt=h(D,"P",{"data-svelte-h":!0}),w(Qt)!=="svelte-2avdjw"&&(Qt.innerHTML=ba),jo=d(D),_(ge.$$.fragment,D),Io=d(D),_(_e.$$.fragment,D),D.forEach(a),kt.forEach(a),qn=d(e),it=h(e,"UL",{"data-svelte-h":!0}),w(it)!=="svelte-n3ow4o"&&(it.innerHTML=Ma),En=d(e),_(dt.$$.fragment,e),Nn=d(e),V=h(e,"DIV",{class:!0});var te=x(V);_(ct.$$.fragment,te),Lo=d(te),Yt=h(te,"P",{"data-svelte-h":!0}),w(Yt)!=="svelte-h0upho"&&(Yt.textContent=wa),zo=d(te),Ht=h(te,"P",{"data-svelte-h":!0}),w(Ht)!=="svelte-q52n56"&&(Ht.innerHTML=va),Go=d(te),St=h(te,"P",{"data-svelte-h":!0}),w(St)!=="svelte-hswkmf"&&(St.innerHTML=Ja),Zo=d(te),ee=h(te,"DIV",{class:!0});var Ot=x(ee);_(mt.$$.fragment,Ot),Vo=d(Ot),At=h(Ot,"P",{"data-svelte-h":!0}),w(At)!=="svelte-vylfqc"&&(At.innerHTML=Ua),Fo=d(Ot),_(ye.$$.fragment,Ot),Ot.forEach(a),te.forEach(a),Xn=d(e),pt=h(e,"UL",{"data-svelte-h":!0}),w(pt)!=="svelte-n3ow4o"&&(pt.innerHTML=$a),Qn=d(e),_(ut.$$.fragment,e),Yn=d(e),se=h(e,"DIV",{class:!0});var eo=x(se);_(ht.$$.fragment,eo),Wo=d(eo),Q=h(eo,"DIV",{class:!0});var Je=x(Q);_(ft.$$.fragment,Je),Bo=d(Je),Pt=h(Je,"P",{"data-svelte-h":!0}),w(Pt)!=="svelte-2avdjw"&&(Pt.innerHTML=ka),Ro=d(Je),_(Te.$$.fragment,Je),qo=d(Je),_(be.$$.fragment,Je),Je.forEach(a),eo.forEach(a),Hn=d(e),gt=h(e,"UL",{"data-svelte-h":!0}),w(gt)!=="svelte-n3ow4o"&&(gt.innerHTML=Ca),Sn=d(e),_(_t.$$.fragment,e),An=d(e),Y=h(e,"DIV",{class:!0});var Kt=x(Y);_(yt.$$.fragment,Kt),Eo=d(Kt),Me=h(Kt,"DIV",{class:!0});var to=x(Me);_(Tt.$$.fragment,to),No=d(to),_(we.$$.fragment,to),to.forEach(a),Xo=d(Kt),ve=h(Kt,"DIV",{class:!0});var no=x(ve);_(bt.$$.fragment,no),Qo=d(no),Dt=h(no,"P",{"data-svelte-h":!0}),w(Dt)!=="svelte-1dcynhg"&&(Dt.textContent=xa),no.forEach(a),Kt.forEach(a),Pn=d(e),Mt=h(e,"UL",{"data-svelte-h":!0}),w(Mt)!=="svelte-n3ow4o"&&(Mt.innerHTML=ja),Dn=d(e),_(wt.$$.fragment,e),On=d(e),on=h(e,"P",{}),x(on).forEach(a),this.h()},h(){j(t,"name","hf:doc:metadata"),j(t,"content",ds),Va(k,"float","right"),j(G,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(Z,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(W,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(oe,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(Rt,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(me,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(B,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(N,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(he,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(fe,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(R,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(X,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(ae,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(ee,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(V,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(Q,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(se,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(Me,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(ve,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8"),j(Y,"class","docstring border-l-2 border-t-2 pl-4 pt-3.5 border-gray-100 rounded-tl-xl mb-6 mt-8")},m(e,s){f(document.head,t),l(e,m,s),l(e,n,s),l(e,r,s),l(e,c,s),l(e,p,s),y(v,e,s),l(e,$,s),l(e,k,s),l(e,C,s),l(e,O,s),l(e,Ue,s),l(e,K,s),l(e,rn,s),l(e,$e,s),l(e,ln,s),l(e,ke,s),l(e,dn,s),y(re,e,s),l(e,cn,s),l(e,Ce,s),l(e,mn,s),y(le,e,s),l(e,pn,s),y(xe,e,s),l(e,un,s),y(je,e,s),l(e,hn,s),l(e,Ie,s),l(e,fn,s),l(e,Le,s),l(e,gn,s),y(ie,e,s),l(e,_n,s),y(ze,e,s),l(e,yn,s),l(e,Ge,s),l(e,Tn,s),l(e,Ze,s),l(e,bn,s),l(e,Ve,s),l(e,Mn,s),y(de,e,s),l(e,wn,s),y(Fe,e,s),l(e,vn,s),l(e,We,s),l(e,Jn,s),l(e,Be,s),l(e,Un,s),y(Re,e,s),l(e,$n,s),y(qe,e,s),l(e,kn,s),l(e,G,s),y(Ee,G,null),f(G,oo),f(G,Ct),f(G,ao),f(G,xt),f(G,so),f(G,jt),f(G,ro),y(ce,G,null),l(e,Cn,s),y(Ne,e,s),l(e,xn,s),l(e,Z,s),y(Xe,Z,null),f(Z,lo),f(Z,It),f(Z,io),f(Z,Lt),f(Z,co),f(Z,zt),f(Z,mo),f(Z,Gt),l(e,jn,s),y(Qe,e,s),l(e,In,s),l(e,W,s),y(Ye,W,null),f(W,po),f(W,Zt),f(W,uo),f(W,Vt),f(W,ho),f(W,Ft),l(e,Ln,s),y(He,e,s),l(e,zn,s),l(e,oe,s),y(Se,oe,null),f(oe,fo),f(oe,Wt),l(e,Gn,s),y(Ae,e,s),l(e,Zn,s),l(e,B,s),y(Pe,B,null),f(B,go),f(B,Bt),f(B,_o),f(B,Rt),y(De,Rt,null),f(B,yo),f(B,me),y(Oe,me,null),f(me,To),f(me,qt),l(e,Vn,s),y(Ke,e,s),l(e,Fn,s),l(e,R,s),y(et,R,null),f(R,bo),f(R,N),y(tt,N,null),f(N,Mo),f(N,Et),f(N,wo),y(pe,N,null),f(N,vo),y(ue,N,null),f(R,Jo),f(R,he),y(nt,he,null),f(he,Uo),f(he,Nt),f(R,$o),f(R,fe),y(ot,fe,null),f(fe,ko),f(fe,Xt),l(e,Wn,s),l(e,at,s),l(e,Bn,s),y(st,e,s),l(e,Rn,s),l(e,ae,s),y(rt,ae,null),f(ae,Co),f(ae,X),y(lt,X,null),f(X,xo),f(X,Qt),f(X,jo),y(ge,X,null),f(X,Io),y(_e,X,null),l(e,qn,s),l(e,it,s),l(e,En,s),y(dt,e,s),l(e,Nn,s),l(e,V,s),y(ct,V,null),f(V,Lo),f(V,Yt),f(V,zo),f(V,Ht),f(V,Go),f(V,St),f(V,Zo),f(V,ee),y(mt,ee,null),f(ee,Vo),f(ee,At),f(ee,Fo),y(ye,ee,null),l(e,Xn,s),l(e,pt,s),l(e,Qn,s),y(ut,e,s),l(e,Yn,s),l(e,se,s),y(ht,se,null),f(se,Wo),f(se,Q),y(ft,Q,null),f(Q,Bo),f(Q,Pt),f(Q,Ro),y(Te,Q,null),f(Q,qo),y(be,Q,null),l(e,Hn,s),l(e,gt,s),l(e,Sn,s),y(_t,e,s),l(e,An,s),l(e,Y,s),y(yt,Y,null),f(Y,Eo),f(Y,Me),y(Tt,Me,null),f(Me,No),y(we,Me,null),f(Y,Xo),f(Y,ve),y(bt,ve,null),f(ve,Qo),f(ve,Dt),l(e,Pn,s),l(e,Mt,s),l(e,Dn,s),y(wt,e,s),l(e,On,s),l(e,on,s),Kn=!0},p(e,[s]){const q={};s&2&&(q.$$scope={dirty:s,ctx:e}),re.$set(q);const E={};s&2&&(E.$$scope={dirty:s,ctx:e}),le.$set(E);const H={};s&2&&(H.$$scope={dirty:s,ctx:e}),ie.$set(H);const vt={};s&2&&(vt.$$scope={dirty:s,ctx:e}),de.$set(vt);const S={};s&2&&(S.$$scope={dirty:s,ctx:e}),ce.$set(S);const an={};s&2&&(an.$$scope={dirty:s,ctx:e}),pe.$set(an);const Jt={};s&2&&(Jt.$$scope={dirty:s,ctx:e}),ue.$set(Jt);const A={};s&2&&(A.$$scope={dirty:s,ctx:e}),ge.$set(A);const P={};s&2&&(P.$$scope={dirty:s,ctx:e}),_e.$set(P);const Ut={};s&2&&(Ut.$$scope={dirty:s,ctx:e}),ye.$set(Ut);const $t={};s&2&&($t.$$scope={dirty:s,ctx:e}),Te.$set($t);const kt={};s&2&&(kt.$$scope={dirty:s,ctx:e}),be.$set(kt);const D={};s&2&&(D.$$scope={dirty:s,ctx:e}),we.$set(D)},i(e){Kn||(T(v.$$.fragment,e),T(re.$$.fragment,e),T(le.$$.fragment,e),T(xe.$$.fragment,e),T(je.$$.fragment,e),T(ie.$$.fragment,e),T(ze.$$.fragment,e),T(de.$$.fragment,e),T(Fe.$$.fragment,e),T(Re.$$.fragment,e),T(qe.$$.fragment,e),T(Ee.$$.fragment,e),T(ce.$$.fragment,e),T(Ne.$$.fragment,e),T(Xe.$$.fragment,e),T(Qe.$$.fragment,e),T(Ye.$$.fragment,e),T(He.$$.fragment,e),T(Se.$$.fragment,e),T(Ae.$$.fragment,e),T(Pe.$$.fragment,e),T(De.$$.fragment,e),T(Oe.$$.fragment,e),T(Ke.$$.fragment,e),T(et.$$.fragment,e),T(tt.$$.fragment,e),T(pe.$$.fragment,e),T(ue.$$.fragment,e),T(nt.$$.fragment,e),T(ot.$$.fragment,e),T(st.$$.fragment,e),T(rt.$$.fragment,e),T(lt.$$.fragment,e),T(ge.$$.fragment,e),T(_e.$$.fragment,e),T(dt.$$.fragment,e),T(ct.$$.fragment,e),T(mt.$$.fragment,e),T(ye.$$.fragment,e),T(ut.$$.fragment,e),T(ht.$$.fragment,e),T(ft.$$.fragment,e),T(Te.$$.fragment,e),T(be.$$.fragment,e),T(_t.$$.fragment,e),T(yt.$$.fragment,e),T(Tt.$$.fragment,e),T(we.$$.fragment,e),T(bt.$$.fragment,e),T(wt.$$.fragment,e),Kn=!0)},o(e){b(v.$$.fragment,e),b(re.$$.fragment,e),b(le.$$.fragment,e),b(xe.$$.fragment,e),b(je.$$.fragment,e),b(ie.$$.fragment,e),b(ze.$$.fragment,e),b(de.$$.fragment,e),b(Fe.$$.fragment,e),b(Re.$$.fragment,e),b(qe.$$.fragment,e),b(Ee.$$.fragment,e),b(ce.$$.fragment,e),b(Ne.$$.fragment,e),b(Xe.$$.fragment,e),b(Qe.$$.fragment,e),b(Ye.$$.fragment,e),b(He.$$.fragment,e),b(Se.$$.fragment,e),b(Ae.$$.fragment,e),b(Pe.$$.fragment,e),b(De.$$.fragment,e),b(Oe.$$.fragment,e),b(Ke.$$.fragment,e),b(et.$$.fragment,e),b(tt.$$.fragment,e),b(pe.$$.fragment,e),b(ue.$$.fragment,e),b(nt.$$.fragment,e),b(ot.$$.fragment,e),b(st.$$.fragment,e),b(rt.$$.fragment,e),b(lt.$$.fragment,e),b(ge.$$.fragment,e),b(_e.$$.fragment,e),b(dt.$$.fragment,e),b(ct.$$.fragment,e),b(mt.$$.fragment,e),b(ye.$$.fragment,e),b(ut.$$.fragment,e),b(ht.$$.fragment,e),b(ft.$$.fragment,e),b(Te.$$.fragment,e),b(be.$$.fragment,e),b(_t.$$.fragment,e),b(yt.$$.fragment,e),b(Tt.$$.fragment,e),b(we.$$.fragment,e),b(bt.$$.fragment,e),b(wt.$$.fragment,e),Kn=!1},d(e){e&&(a(m),a(n),a(r),a(c),a(p),a($),a(k),a(C),a(O),a(Ue),a(K),a(rn),a($e),a(ln),a(ke),a(dn),a(cn),a(Ce),a(mn),a(pn),a(un),a(hn),a(Ie),a(fn),a(Le),a(gn),a(_n),a(yn),a(Ge),a(Tn),a(Ze),a(bn),a(Ve),a(Mn),a(wn),a(vn),a(We),a(Jn),a(Be),a(Un),a($n),a(kn),a(G),a(Cn),a(xn),a(Z),a(jn),a(In),a(W),a(Ln),a(zn),a(oe),a(Gn),a(Zn),a(B),a(Vn),a(Fn),a(R),a(Wn),a(at),a(Bn),a(Rn),a(ae),a(qn),a(it),a(En),a(Nn),a(V),a(Xn),a(pt),a(Qn),a(Yn),a(se),a(Hn),a(gt),a(Sn),a(An),a(Y),a(Pn),a(Mt),a(Dn),a(On),a(on)),a(t),M(v,e),M(re,e),M(le,e),M(xe,e),M(je,e),M(ie,e),M(ze,e),M(de,e),M(Fe,e),M(Re,e),M(qe,e),M(Ee),M(ce),M(Ne,e),M(Xe),M(Qe,e),M(Ye),M(He,e),M(Se),M(Ae,e),M(Pe),M(De),M(Oe),M(Ke,e),M(et),M(tt),M(pe),M(ue),M(nt),M(ot),M(st,e),M(rt),M(lt),M(ge),M(_e),M(dt,e),M(ct),M(mt),M(ye),M(ut,e),M(ht),M(ft),M(Te),M(be),M(_t,e),M(yt),M(Tt),M(we),M(bt),M(wt,e)}}}const ds='{"title":"Llama4","local":"llama4","sections":[{"title":"Efficiency; how to get the best out of llama 4","local":"efficiency-how-to-get-the-best-out-of-llama-4","sections":[{"title":"The Attention methods","local":"the-attention-methods","sections":[],"depth":3},{"title":"Quantization","local":"quantization","sections":[],"depth":3},{"title":"Offloading","local":"offloading","sections":[],"depth":3}],"depth":2},{"title":"Llama4Config","local":"transformers.Llama4Config","sections":[],"depth":2},{"title":"Llama4TextConfig","local":"transformers.Llama4TextConfig","sections":[],"depth":2},{"title":"Llama4VisionConfig","local":"transformers.Llama4VisionConfig","sections":[],"depth":2},{"title":"Llama4Processor","local":"transformers.Llama4Processor","sections":[],"depth":2},{"title":"Llama4ImageProcessorFast","local":"transformers.Llama4ImageProcessorFast","sections":[],"depth":2},{"title":"Llama4ForConditionalGeneration","local":"transformers.Llama4ForConditionalGeneration","sections":[],"depth":2},{"title":"Llama4ForCausalLM","local":"transformers.Llama4ForCausalLM","sections":[],"depth":2},{"title":"Llama4TextModel","local":"transformers.Llama4TextModel","sections":[],"depth":2},{"title":"Llama4ForCausalLM","local":"transformers.Llama4ForCausalLM","sections":[],"depth":2},{"title":"Llama4VisionModel","local":"transformers.Llama4VisionModel","sections":[],"depth":2}],"depth":1}';function cs(J){return La(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class Ts extends za{constructor(t){super(),Ga(this,t,cs,is,Ia,{})}}export{Ts as component};
