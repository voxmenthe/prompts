import{s as pe,n as re,o as me}from"../chunks/scheduler.18a86fab.js";import{S as ue,i as fe,g as o,s as n,r as L,A as de,h as i,f as l,c as a,j as ae,u as g,x as r,k as oe,y as ce,a as s,v as J,d as T,t as j,w as A}from"../chunks/index.98837b22.js";import{C as ie}from"../chunks/CodeBlock.8d0c2e8a.js";import{H as O,E as be}from"../chunks/getInferenceSnippets.06c2775f.js";function he(D){let p,k,C,U,m,B,u,R,f,Y="By default this is disabled. Enables the loading of torch and safetensor based weights to be loaded in parallel. Can decrease the time to load large models significantly, often times producing speed ups around ~50%.",x,d,z="Can be set to a string equal to <code>&quot;false&quot;</code> or <code>&quot;true&quot;</code>. e.g. <code>os.environ[&quot;HF_ENABLE_PARALLEL_LOADING&quot;] = &quot;true&quot;</code>.",I,c,K="e.g. <code>facebook/opt-30b</code> on an AWS EC2 g4dn.metal instance can be made to load in ~30s with this enabled vs ~55s without it.",P,b,ee="Profile before committing to using this environment variable, this will not produce speed ups for smaller models.",W,h,H,M,G,y,te="Determines how many threads should be used when parallel loading is enabled. Default is <code>8</code>.",N,w,le="If the number of files that are being loaded is less than the number of threads specified, the number that is actually spawned will be equal to the number of files.",V,_,se="e.g. If you specify 8 workers, and there are only 2 files, only 2 workers will be spawned.",F,E,ne="Tune as you see fit.",Z,$,Q,v,X,q,S;return m=new O({props:{title:"Environment Variables",local:"environment-variables",headingTag:"h1"}}),u=new O({props:{title:"HF_ENABLE_PARALLEL_LOADING",local:"hfenableparallelloading",headingTag:"h2"}}),h=new ie({props:{code:"aW1wb3J0JTIwb3MlMEElMEFvcy5lbnZpcm9uJTVCJTIySEZfRU5BQkxFX1BBUkFMTEVMX0xPQURJTkclMjIlNUQlMjAlM0QlMjAlMjJ0cnVlJTIyJTBBJTBBZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMHBpcGVsaW5lJTBBJTBBbW9kZWwlMjAlM0QlMjBwaXBlbGluZSh0YXNrJTNEJTIydGV4dC1nZW5lcmF0aW9uJTIyJTJDJTIwbW9kZWwlM0QlMjJmYWNlYm9vayUyRm9wdC0zMGIlMjIlMkMlMjBkZXZpY2VfbWFwJTNEJTIyYXV0byUyMik=",highlighted:`<span class="hljs-keyword">import</span> os

os.environ[<span class="hljs-string">&quot;HF_ENABLE_PARALLEL_LOADING&quot;</span>] = <span class="hljs-string">&quot;true&quot;</span>

<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline

model = pipeline(task=<span class="hljs-string">&quot;text-generation&quot;</span>, model=<span class="hljs-string">&quot;facebook/opt-30b&quot;</span>, device_map=<span class="hljs-string">&quot;auto&quot;</span>)`,wrap:!1}}),M=new O({props:{title:"HF_PARALLEL_LOADING_WORKERS",local:"hfparallelloadingworkers",headingTag:"h2"}}),$=new ie({props:{code:"aW1wb3J0JTIwb3MlMEElMEFvcy5lbnZpcm9uJTVCJTIySEZfRU5BQkxFX1BBUkFMTEVMX0xPQURJTkclMjIlNUQlMjAlM0QlMjAlMjJ0cnVlJTIyJTBBb3MuZW52aXJvbiU1QiUyMkhGX1BBUkFMTEVMX0xPQURJTkdfV09SS0VSUyUyMiU1RCUyMCUzRCUyMCUyMjQlMjIlMEElMEFmcm9tJTIwdHJhbnNmb3JtZXJzJTIwaW1wb3J0JTIwcGlwZWxpbmUlMEElMEFtb2RlbCUyMCUzRCUyMHBpcGVsaW5lKHRhc2slM0QlMjJ0ZXh0LWdlbmVyYXRpb24lMjIlMkMlMjBtb2RlbCUzRCUyMmZhY2Vib29rJTJGb3B0LTMwYiUyMiUyQyUyMGRldmljZV9tYXAlM0QlMjJhdXRvJTIyKQ==",highlighted:`<span class="hljs-keyword">import</span> os

os.environ[<span class="hljs-string">&quot;HF_ENABLE_PARALLEL_LOADING&quot;</span>] = <span class="hljs-string">&quot;true&quot;</span>
os.environ[<span class="hljs-string">&quot;HF_PARALLEL_LOADING_WORKERS&quot;</span>] = <span class="hljs-string">&quot;4&quot;</span>

<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> pipeline

model = pipeline(task=<span class="hljs-string">&quot;text-generation&quot;</span>, model=<span class="hljs-string">&quot;facebook/opt-30b&quot;</span>, device_map=<span class="hljs-string">&quot;auto&quot;</span>)`,wrap:!1}}),v=new be({props:{source:"https://github.com/huggingface/transformers/blob/main/docs/source/en/reference/environment_variables.md"}}),{c(){p=o("meta"),k=n(),C=o("p"),U=n(),L(m.$$.fragment),B=n(),L(u.$$.fragment),R=n(),f=o("p"),f.textContent=Y,x=n(),d=o("p"),d.innerHTML=z,I=n(),c=o("p"),c.innerHTML=K,P=n(),b=o("p"),b.textContent=ee,W=n(),L(h.$$.fragment),H=n(),L(M.$$.fragment),G=n(),y=o("p"),y.innerHTML=te,N=n(),w=o("p"),w.textContent=le,V=n(),_=o("p"),_.textContent=se,F=n(),E=o("p"),E.textContent=ne,Z=n(),L($.$$.fragment),Q=n(),L(v.$$.fragment),X=n(),q=o("p"),this.h()},l(e){const t=de("svelte-u9bgzb",document.head);p=i(t,"META",{name:!0,content:!0}),t.forEach(l),k=a(e),C=i(e,"P",{}),ae(C).forEach(l),U=a(e),g(m.$$.fragment,e),B=a(e),g(u.$$.fragment,e),R=a(e),f=i(e,"P",{"data-svelte-h":!0}),r(f)!=="svelte-eaqfo5"&&(f.textContent=Y),x=a(e),d=i(e,"P",{"data-svelte-h":!0}),r(d)!=="svelte-1lr9rtb"&&(d.innerHTML=z),I=a(e),c=i(e,"P",{"data-svelte-h":!0}),r(c)!=="svelte-12hvrat"&&(c.innerHTML=K),P=a(e),b=i(e,"P",{"data-svelte-h":!0}),r(b)!=="svelte-1w44q0s"&&(b.textContent=ee),W=a(e),g(h.$$.fragment,e),H=a(e),g(M.$$.fragment,e),G=a(e),y=i(e,"P",{"data-svelte-h":!0}),r(y)!=="svelte-2gt5tv"&&(y.innerHTML=te),N=a(e),w=i(e,"P",{"data-svelte-h":!0}),r(w)!=="svelte-4bxvcm"&&(w.textContent=le),V=a(e),_=i(e,"P",{"data-svelte-h":!0}),r(_)!=="svelte-ao7h2k"&&(_.textContent=se),F=a(e),E=i(e,"P",{"data-svelte-h":!0}),r(E)!=="svelte-1u6w5un"&&(E.textContent=ne),Z=a(e),g($.$$.fragment,e),Q=a(e),g(v.$$.fragment,e),X=a(e),q=i(e,"P",{}),ae(q).forEach(l),this.h()},h(){oe(p,"name","hf:doc:metadata"),oe(p,"content",Me)},m(e,t){ce(document.head,p),s(e,k,t),s(e,C,t),s(e,U,t),J(m,e,t),s(e,B,t),J(u,e,t),s(e,R,t),s(e,f,t),s(e,x,t),s(e,d,t),s(e,I,t),s(e,c,t),s(e,P,t),s(e,b,t),s(e,W,t),J(h,e,t),s(e,H,t),J(M,e,t),s(e,G,t),s(e,y,t),s(e,N,t),s(e,w,t),s(e,V,t),s(e,_,t),s(e,F,t),s(e,E,t),s(e,Z,t),J($,e,t),s(e,Q,t),J(v,e,t),s(e,X,t),s(e,q,t),S=!0},p:re,i(e){S||(T(m.$$.fragment,e),T(u.$$.fragment,e),T(h.$$.fragment,e),T(M.$$.fragment,e),T($.$$.fragment,e),T(v.$$.fragment,e),S=!0)},o(e){j(m.$$.fragment,e),j(u.$$.fragment,e),j(h.$$.fragment,e),j(M.$$.fragment,e),j($.$$.fragment,e),j(v.$$.fragment,e),S=!1},d(e){e&&(l(k),l(C),l(U),l(B),l(R),l(f),l(x),l(d),l(I),l(c),l(P),l(b),l(W),l(H),l(G),l(y),l(N),l(w),l(V),l(_),l(F),l(E),l(Z),l(Q),l(X),l(q)),l(p),A(m,e),A(u,e),A(h,e),A(M,e),A($,e),A(v,e)}}}const Me='{"title":"Environment Variables","local":"environment-variables","sections":[{"title":"HF_ENABLE_PARALLEL_LOADING","local":"hfenableparallelloading","sections":[],"depth":2},{"title":"HF_PARALLEL_LOADING_WORKERS","local":"hfparallelloadingworkers","sections":[],"depth":2}],"depth":1}';function ye(D){return me(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class ve extends ue{constructor(p){super(),fe(this,p,ye,he,pe,{})}}export{ve as component};
